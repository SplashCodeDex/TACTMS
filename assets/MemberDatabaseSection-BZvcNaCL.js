import{c as v,j as e,o as _,m as G,C as J,u as K,r as c,w as Q,B as M,x as W,F as X,l as Y}from"./index-cVAyqvce.js";/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=v("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=v("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=v("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=v("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),O=({checked:o,onChange:f,disabled:g=!1,className:j=""})=>e.jsx("button",{type:"button",role:"checkbox","aria-checked":o,disabled:g,onClick:()=>!g&&f(!o),className:`
        relative flex items-center justify-center w-6 h-6 rounded-full border-2 transition-all duration-200
        ${g?"opacity-50 cursor-not-allowed":"cursor-pointer"}
        ${o?"bg-[var(--primary-accent-start)] border-[var(--primary-accent-start)]":"bg-transparent border-[var(--text-muted)] hover:border-[var(--primary-accent-start)]"}
        ${j}
      `,children:e.jsx(_,{children:o&&e.jsx(G.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{duration:.2,ease:"backOut"},children:e.jsx(J,{size:14,className:"text-white stroke-[3]"})})})}),te=()=>{var E;const{memberDatabase:o={},onUploadMasterList:f,onCreateTitheList:g,onEditMember:j,addToast:R}=K(),[t,L]=c.useState(Object.keys(o)[0]||null),[p,B]=c.useState(""),[d,k]=c.useState([]),[s,N]=c.useState({key:"customOrder",direction:"asc"}),[i,F]=c.useState(1),[b]=c.useState(10),[y,U]=c.useState(""),[u,$]=c.useState(""),D=(r,n)=>{var m;const a=(m=r.target.files)==null?void 0:m[0];a&&f(a,!0,n)},l=c.useMemo(()=>{var n;if(!t)return[];let r=[];return t==="ALL MEMBERS"?Object.values(o).forEach(a=>{a&&a.data&&(r=[...r,...a.data])}):r=((n=o[t])==null?void 0:n.data)||[],p&&(r=r.filter(a=>Object.values(a).some(m=>String(m).toLowerCase().includes(p.toLowerCase())))),(y||u)&&(r=Q(r,Number(y)||void 0,Number(u)||void 0)),s.key&&r.sort((a,m)=>{if(s.key==="customOrder")return(a.customOrder||0)-(m.customOrder||0);const P=String(a[s.key]).toLowerCase(),z=String(m[s.key]).toLowerCase();return P<z?s.direction==="asc"?-1:1:P>z?s.direction==="asc"?1:-1:0}),r},[o,t,p,s,y,u]),w=r=>{s.key===r?s.direction==="asc"?N({key:r,direction:"desc"}):N({key:"customOrder",direction:"asc"}):N({key:r,direction:"asc"})},A=i*b,T=A-b,q=l.slice(T,A),h=r=>F(r),x=Math.ceil(l.length/b),I=r=>{k(n=>n.some(a=>a["No."]===r["No."])?n.filter(a=>a["No."]!==r["No."]):[...n,r])},V=()=>{d.length===l.length?k([]):k(l)},H=()=>{if(d.length===0){R("Please select at least one member to create a list.","warning");return}if(t){const r=[...d].sort((n,a)=>(n.customOrder||0)-(a.customOrder||0));g(r,t)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Member Database"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(M,{variant:"primary",onClick:H,disabled:d.length===0,leftIcon:e.jsx(W,{size:16}),children:["Create Tithe List (",d.length,")"]})})]}),e.jsxs("div",{className:"flex border-b border-[var(--border-color)] overflow-x-auto",children:[Object.keys(o).filter(r=>r!=="true").map(r=>e.jsx("button",{onClick:()=>L(r),className:`px-4 py-2 text-sm font-medium transition-colors duration-200 whitespace-nowrap ${t===r?"border-b-2 border-[var(--primary-accent-start)] text-[var(--primary-accent-start)]":"text-[var(--text-secondary)] hover:text-[var(--text-primary)]"}`,children:r},r)),e.jsx("button",{onClick:()=>L("ALL MEMBERS"),className:`ml-auto px-4 py-2 text-sm font-medium transition-colors duration-200 whitespace-nowrap ${t==="ALL MEMBERS"?"border-b-2 border-[var(--primary-accent-start)] text-[var(--primary-accent-start)]":"text-[var(--text-secondary)] hover:text-[var(--text-primary)]"}`,children:"ALL MEMBERS"})]}),t&&(o[t]||t==="ALL MEMBERS")?e.jsxs("div",{className:"content-card",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 p-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:t}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[t==="ALL MEMBERS"?l.length:(E=o[t])==null?void 0:E.data.length," members"]})]}),e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-[var(--bg-secondary)] p-1 rounded-md border border-[var(--border-color)]",children:[e.jsx(X,{size:16,className:"text-gray-400 ml-2"}),e.jsx("input",{type:"number",placeholder:"Min Age",value:y,onChange:r=>U(r.target.value),className:"bg-transparent border-none text-sm w-20 focus:ring-0 p-1"}),e.jsx("span",{className:"text-gray-400",children:"-"}),e.jsx("input",{type:"number",placeholder:"Max Age",value:u,onChange:r=>$(r.target.value),className:"bg-transparent border-none text-sm w-20 focus:ring-0 p-1"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Y,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"text",placeholder:"Search members...",value:p,onChange:r=>B(r.target.value),className:"pl-10 pr-4 py-2 bg-[var(--bg-secondary)] border border-[var(--border-color)] rounded-lg focus:ring-2 focus:ring-[var(--primary-accent-start)] focus:border-transparent w-64"})]}),e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:".xlsx, .xls",onChange:r=>t&&D(r,t),className:"hidden",disabled:t==="ALL MEMBERS"}),e.jsx(M,{variant:"primary",leftIcon:e.jsx(ee,{size:16}),disabled:t==="ALL MEMBERS",className:"pointer-events-none",children:"Upload Master List"})]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"modern-table min-w-full divide-y divide-[var(--border-color)]",children:[e.jsx("thead",{className:"bg-[var(--bg-elevated)]",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"p-4",children:e.jsx(O,{checked:d.length===l.length&&l.length>0,onChange:()=>V()})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700 dark:hover:text-gray-200 transition-colors",onClick:()=>w("First Name"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Name",s.key==="First Name"&&(s.direction==="asc"?e.jsx(S,{size:14}):e.jsx(C,{size:14}))]})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700 dark:hover:text-gray-200 transition-colors",onClick:()=>w("Membership Number"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Membership No.",s.key==="Membership Number"&&(s.direction==="asc"?e.jsx(S,{size:14}):e.jsx(C,{size:14}))]})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700 dark:hover:text-gray-200 transition-colors",onClick:()=>w("Phone Number"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Phone Number",s.key==="Phone Number"&&(s.direction==="asc"?e.jsx(S,{size:14}):e.jsx(C,{size:14}))]})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-[var(--border-color)]",children:q.map(r=>e.jsxs("tr",{children:[e.jsx("td",{className:"p-4",children:e.jsx(O,{checked:d.some(n=>n["No."]===r["No."]),onChange:()=>I(r)})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-[var(--text-primary)]",children:[" ",r["First Name"]," ",r.Surname]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:r["Membership Number"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:r["Phone Number"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>j(r,t),children:e.jsx(Z,{size:16})})})]},r["No."]))})]})}),l.length>b&&e.jsxs("div",{className:"flex justify-center mt-4 items-center gap-2",children:[e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mr-4",children:["Page ",i," of ",x]}),e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[e.jsx("button",{onClick:()=>h(i-1),disabled:i===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),i>3&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>h(1),className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700",children:"1"}),i>4&&e.jsx("span",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400",children:"..."})]}),Array.from({length:x},(r,n)=>n+1).filter(r=>r>=Number(i)-2&&r<=Number(i)+2).map(r=>e.jsx("button",{onClick:()=>h(r),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${i===r?"z-10 bg-blue-50 border-blue-500 text-blue-600 dark:bg-blue-900 dark:border-blue-400 dark:text-blue-300":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700"}`,children:r},r)),i<x-2&&e.jsxs(e.Fragment,{children:[i<x-3&&e.jsx("span",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400",children:"..."}),e.jsx("button",{onClick:()=>h(x),className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700",children:x})]}),e.jsx("button",{onClick:()=>h(i+1),disabled:i===x,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]}):e.jsxs("div",{className:"text-center py-12 content-card",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No member databases found."}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Upload a master list for an assembly to get started."})]})]})};export{te as default};
