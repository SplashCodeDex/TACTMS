import{c as v,R as u,j as e,F as A,B as m,U as S,X as L,r as h,aj as T,ak as z,al as R,n as F,p as I,am as O,S as E,b as P,d as U,e as V,g as N,q as G,m as p,an as H,ao as Y,E as q,o as _,ap as $,aq as B,ar as W}from"./index-C0VftjXC.js";import{I as j}from"./InfoTooltip-QyCQH6LY.js";import{A as K}from"./arrow-right-NEU9vxU2.js";import"./info-CH9s8b57.js";/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=v("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=v("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=v("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=v("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=v("WalletCards",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2",key:"4125el"}],["path",{d:"M3 11h3c.8 0 1.6.3 2.1.9l1.1.9c1.6 1.6 4.1 1.6 5.7 0l1.1-.9c.5-.5 1.3-.9 2.1-.9H21",key:"1dpki6"}]]),ae=u.memo(({ageRangeMin:a,setAgeRangeMin:s,ageRangeMax:n,setAgeRangeMax:o,inputErrors:i,handleApplyAgeFilter:r,isAgeFilterActive:t,handleRemoveAgeFilter:d,isLoading:l,originalData:c,uploadedFile:g,titheListData:k,processedDataA:b,setHasUnsavedChanges:y})=>{const x=c.length===0&&!!g&&k.length>0;return e.jsxs("div",{className:"bg-[var(--bg-elevated)] p-6 rounded-xl border border-[var(--border-color)] h-full flex flex-col",children:[e.jsx("div",{className:"flex-grow",children:e.jsxs("div",{"aria-labelledby":"age-filter-heading",children:[e.jsxs("h3",{id:"age-filter-heading",className:"text-lg font-semibold flex items-center mb-4",children:[e.jsx(A,{size:20,className:"mr-3 text-[var(--primary-accent-end)]"}),"Age Filter (Optional)"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-4 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"ageMin",className:"form-label",children:"Min Age (Years)"}),e.jsx("input",{type:"number",id:"ageMin",value:a,onChange:f=>{s(f.target.value),y(!0)},placeholder:"e.g., 18",className:`form-input-light ${i.age?"input-error":""}`,disabled:x,"aria-invalid":!!i.age,"aria-describedby":i.age?"ageError":void 0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"ageMax",className:"form-label",children:"Max Age (Years)"}),e.jsx("input",{type:"number",id:"ageMax",value:n,onChange:f=>{o(f.target.value),y(!0)},placeholder:"e.g., 65",className:`form-input-light ${i.age?"input-error":""}`,disabled:x,"aria-invalid":!!i.age,"aria-describedby":i.age?"ageError":void 0})]})]}),i.age&&e.jsx("p",{id:"ageError",className:"form-error-text mt-2 col-span-2",children:i.age}),x&&e.jsx("p",{className:"text-xs text-[var(--text-muted)] mt-2",children:"Age filter requires original member data. Re-upload Excel or load a favorite with member data to enable."}),t&&b.length>0&&e.jsxs("p",{className:"mt-4 text-sm text-[var(--primary-accent-start)]",children:["Filtered: ",b.length," records match age criteria."]}),t&&b.length===0&&c.length>0&&e.jsx("p",{className:"mt-4 text-sm text-[var(--warning-text)]",children:"No records match the current age filter."})]})}),e.jsxs("div",{className:"mt-6 flex flex-wrap gap-3",children:[e.jsx(m,{onClick:r,disabled:!a&&!n||l||x,leftIcon:e.jsx(S,{size:18}),variant:"secondary",children:"Apply Age Filter"}),t&&e.jsx(m,{onClick:d,variant:"outline",leftIcon:e.jsx(L,{size:18}),disabled:l||x,children:"Remove Filter"})]})]})});var C="Toggle",w=h.forwardRef((a,s)=>{const{pressed:n,defaultPressed:o,onPressedChange:i,...r}=a,[t,d]=T({prop:n,onChange:i,defaultProp:o??!1,caller:C});return e.jsx(z.button,{type:"button","aria-pressed":t,"data-state":t?"on":"off","data-disabled":a.disabled?"":void 0,...r,ref:s,onClick:R(a.onClick,()=>{a.disabled||d(!t)})})});w.displayName=C;var M=w;const te=I("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}}),D=h.forwardRef(({className:a,variant:s,size:n,...o},i)=>e.jsx(M,{ref:i,className:F(te({variant:s,size:n,className:a})),...o}));D.displayName=M.displayName;const se=u.memo(({concatenationConfig:a,handleConcatenationConfigChange:s})=>e.jsx("div",{className:"bg-[var(--bg-elevated)] p-6 rounded-xl border border-[var(--border-color)] h-full",children:e.jsxs("div",{"aria-labelledby":"concat-config-heading",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{id:"concat-config-heading",className:"text-lg font-semibold flex items-center",children:[e.jsx(Q,{size:20,className:"mr-3 text-[var(--primary-accent-end)]"}),"Membership Name Concatenation"]}),e.jsx(j,{text:e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-semibold mb-1 text-[var(--text-primary)]",children:'Select fields to build the "Membership Number" column.'}),e.jsx("p",{className:"text-xs",children:"This combined string identifies members. Numbers appear as (Main|Old) or (Number)."})]})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:Object.keys(O).map(n=>e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(D,{pressed:a[n],onPressedChange:()=>s(n),"aria-label":`Toggle ${n}`,children:n})},n))}),e.jsx("p",{className:"mt-3 text-xs text-[var(--text-muted)]",children:"Your default settings are saved locally in your browser."})]})]})})),ne=u.memo(({selectedDate:a,descriptionText:s,onDateChange:n,onDescriptionChange:o})=>{const i=u.useMemo(()=>a.toISOString().split("T")[0],[a]),r=d=>{try{const l=new Date(d.target.value),c=new Date(l.getTime()+l.getTimezoneOffset()*6e4);n(c)}catch(l){console.error("Invalid date input:",l)}},t=d=>{const l=new Date,c=l.getDay();let g=new Date(l);d==="last"?g.setDate(l.getDate()-c):g.setDate(l.getDate()+(7-c)),n(g)};return e.jsx("div",{className:"bg-[var(--bg-elevated)] p-6 rounded-xl border border-[var(--border-color)] h-full",children:e.jsxs("div",{"aria-labelledby":"tithe-details-heading",children:[e.jsxs("h3",{id:"tithe-details-heading",className:"text-lg font-semibold flex items-center mb-4",children:[e.jsx(X,{size:20,className:"mr-3 text-[var(--primary-accent-end)]"}),"Tithe List Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"selectedDate",className:"form-label",children:"Transaction Date for List"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"date",id:"selectedDate",value:i,onChange:r,className:"form-input-light flex-grow"}),e.jsx(m,{onClick:()=>t("last"),size:"icon",variant:"subtle",title:"Last Sunday",children:e.jsx(Z,{size:16})}),e.jsx(m,{onClick:()=>t("next"),size:"icon",variant:"subtle",title:"Next Sunday",children:e.jsx(K,{size:16})})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"descriptionText",className:"form-label",children:"Narration/Description Template"}),e.jsx("input",{type:"text",id:"descriptionText",value:s,onChange:d=>o(d.target.value),className:"form-input-light",placeholder:"e.g., Tithe"}),e.jsx(j,{text:"Use {DD-MMM-YYYY} as a placeholder for the selected transaction date. The date will be automatically substituted.",className:"mt-2"})]})]})]})})}),ie=u.memo(({originalData:a,amountMappingColumn:s,setAmountMappingColumn:n,setHasUnsavedChanges:o})=>{const i=h.useMemo(()=>{if(a.length>0){const t=new Set;return a.slice(0,10).forEach(d=>{Object.keys(d).forEach(l=>t.add(l))}),Array.from(t).sort()}return[]},[a]),r=i.length===0;return e.jsx("div",{className:"bg-[var(--bg-elevated)] p-6 rounded-xl border border-[var(--border-color)] h-full",children:e.jsxs("div",{"aria-labelledby":"amount-map-heading",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{id:"amount-map-heading",className:"text-lg font-semibold flex items-center",children:[e.jsx(ee,{size:20,className:"mr-3 text-[var(--primary-accent-end)]"}),"Amount Mapping (Optional)"]}),e.jsx(j,{text:"Automatically populate 'Transaction Amount' from a column in your uploaded Excel file when you generate the list."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"amount-column-select",className:"form-label",children:"Map Amount from Excel Column"}),e.jsxs(E,{value:s||"none",onValueChange:t=>{n(t==="none"?null:t),o(!0)},disabled:r,children:[e.jsx(P,{id:"amount-column-select",className:"w-full","aria-label":"Select column to map transaction amount from",children:e.jsx(U,{placeholder:"Do not map amount"})}),e.jsxs(V,{className:"glassmorphism-bg border border-[var(--border-color)] rounded-xl",children:[e.jsx(N,{value:"none",children:"Do not map amount"}),i.map(t=>e.jsx(N,{value:t,children:t},t))]})]}),r&&e.jsx("p",{className:"text-xs text-[var(--text-muted)] mt-2",children:"Upload a file to see available columns for mapping."})]})]})})}),re=({handleGenerateReport:a,isGenerating:s,hasData:n})=>e.jsxs("div",{className:"bg-[var(--bg-elevated)] p-6 rounded-xl border border-[var(--border-color)] h-full flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"section-heading !border-b-0 !pb-0 !mb-0",children:[e.jsx(G,{size:20,className:"mr-3 icon-primary"}),"AI Data Validation"]}),e.jsx("p",{className:"text-sm text-[var(--text-secondary)] mt-2",children:"Generate an AI-powered report to identify potential data quality issues in your uploaded list."})]}),e.jsx(m,{onClick:a,disabled:s||!n,isLoading:s,variant:"secondary",className:"mt-4",children:s?"Generating Report...":"Generate Validation Report"})]}),le=p.div,he=a=>{const[s,n]=h.useState(!0),[o,i]=h.useState(navigator.onLine);return h.useEffect(()=>{const r=()=>i(!0),t=()=>i(!1);return window.addEventListener("online",r),window.addEventListener("offline",t),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",t)}},[]),e.jsx(le,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.4,ease:"easeOut"},children:e.jsxs("section",{className:"content-card","aria-labelledby":"configuration-heading",children:[e.jsxs("div",{className:"flex justify-between items-center cursor-pointer",onClick:()=>n(!s),role:"button",tabIndex:0,onKeyDown:r=>{(r.key==="Enter"||r.key===" ")&&n(!s)},"aria-expanded":s,"aria-controls":"configuration-content",children:[e.jsxs("h2",{id:"configuration-heading",className:"section-heading !border-b-0 !pb-0 !mb-0",children:[e.jsx(H,{size:22,className:"mr-3 icon-primary"}),"Processing Configuration"]}),e.jsx(p.div,{animate:{rotate:s?0:-180},transition:{duration:.3},children:s?e.jsx(Y,{size:20,className:"ml-2 text-[var(--text-secondary)]"}):e.jsx(q,{size:20,className:"ml-2 text-[var(--text-secondary)]"})})]}),e.jsx(_,{initial:!1,children:s&&e.jsx(p.div,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto",marginTop:"1rem"},collapsed:{opacity:0,height:0,marginTop:0}},transition:{duration:.4,ease:[.04,.62,.23,.98]},style:{overflow:"hidden"},children:e.jsx("div",{className:"pt-6 border-t border-[var(--border-color)]/50",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 items-start",children:[e.jsx(se,{concatenationConfig:a.concatenationConfig,handleConcatenationConfigChange:a.handleConcatenationConfigChange}),e.jsx(ne,{selectedDate:a.selectedDate,descriptionText:a.descriptionText,onDateChange:a.onDateChange,onDescriptionChange:a.onDescriptionChange}),e.jsx(ae,{ageRangeMin:a.ageRangeMin,setAgeRangeMin:a.setAgeRangeMin,ageRangeMax:a.ageRangeMax,setAgeRangeMax:a.setAgeRangeMax,inputErrors:a.inputErrors,handleApplyAgeFilter:a.handleApplyAgeFilter,isAgeFilterActive:a.isAgeFilterActive,handleRemoveAgeFilter:a.handleRemoveAgeFilter,isLoading:a.isLoading,originalData:a.originalData,uploadedFile:a.uploadedFile,titheListData:a.titheListData,processedDataA:a.processedDataA,setHasUnsavedChanges:a.setHasUnsavedChanges}),e.jsx(ie,{originalData:a.originalData,amountMappingColumn:a.amountMappingColumn,setAmountMappingColumn:a.setAmountMappingColumn,setHasUnsavedChanges:a.setHasUnsavedChanges}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(re,{handleGenerateReport:a.handleGenerateValidationReport,isGenerating:a.isGeneratingReport,hasData:a.originalData.length>0})}),e.jsxs("div",{className:"lg:col-span-2 pt-6 border-t border-[var(--border-color)]/50",children:[e.jsxs("h3",{className:"subsection-heading flex items-center",children:[e.jsx(J,{size:18,className:"mr-2 icon-primary"}),"Cloud Sync"]}),a.isConfigured?e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-[var(--background-modifier-hover)] border border-[var(--border-color)]",children:[a.isLoggedIn&&a.userProfile?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:a.userProfile.imageUrl,alt:"User",className:"w-10 h-10 rounded-full"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-[var(--text-normal)]",children:a.userProfile.name}),e.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:a.userProfile.email})]})]}):e.jsx("p",{className:"text-[var(--text-muted)]",children:"Sign in to sync your favorites and transaction logs."}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx($,{status:a.syncStatus,isOnline:o}),a.isLoggedIn?e.jsxs(m,{onClick:a.signOut,variant:"secondary",className:"!py-2",children:[e.jsx(B,{size:16,className:"mr-2"}),"Sign Out"]}):e.jsxs(m,{onClick:a.signIn,variant:"primary",className:"!py-2",children:[e.jsx(W,{size:16,className:"mr-2"}),"Sign in with Google"]})]})]}):e.jsx("div",{className:"text-center p-4 bg-[var(--background-modifier-hover)] rounded-lg border border-[var(--border-color)]",children:e.jsxs("p",{className:"text-[var(--text-muted)]",children:["Cloud Sync is not configured. Add your credentials to the ",e.jsx("code",{children:".env.local"})," file."]})})]})]})})},"content")})]})})};export{he as default};
