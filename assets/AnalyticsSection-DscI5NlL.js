import{c as _e,j as n,r as u,b as pe,d as Ir,P as Ne,e as We,g as ne,h as re,i as Mr,k as ye,l as Gt,n as Bt,o as Yt,p as dt,q as jr,B as Ue,m as Xt,s as kr,C as zr,t as Ur,u as Hr,v as Fr,w as rr,U as Wr,G as Gr,x as ve}from"./index-ryEH5VkR.js";import{B as Br}from"./BarChart-C7yB948o.js";/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=_e("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=_e("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=_e("MessageSquareQuote",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M8 12a2 2 0 0 0 2-2V8H8",key:"1jfesj"}],["path",{d:"M14 12a2 2 0 0 0 2-2V8h-2",key:"1dq9mh"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=_e("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=_e("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),Kr=()=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsxs("div",{className:"flex items-end gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-[var(--bg-elevated)] animate-pulse flex-shrink-0"}),n.jsx("div",{className:"w-3/5",children:n.jsx("div",{className:"h-20 w-full rounded-lg bg-[var(--bg-elevated)] animate-pulse"})})]}),n.jsxs("div",{className:"flex items-end gap-3 flex-row-reverse",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-[var(--bg-elevated)] animate-pulse flex-shrink-0"}),n.jsx("div",{className:"w-1/2",children:n.jsx("div",{className:"h-12 w-full rounded-lg bg-[var(--bg-elevated)] animate-pulse"})})]}),n.jsxs("div",{className:"flex items-end gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-[var(--bg-elevated)] animate-pulse flex-shrink-0"}),n.jsx("div",{className:"w-4/5",children:n.jsx("div",{className:"h-28 w-full rounded-lg bg-[var(--bg-elevated)] animate-pulse"})})]})]});var Zr=u.createContext(void 0);function Jr(t){const r=u.useContext(Zr);return t||r||"ltr"}function Qr(t,[r,o]){return Math.min(o,Math.max(r,t))}function en(t,r){return u.useReducer((o,s)=>r[o][s]??o,t)}var ht="ScrollArea",[nr]=Ir(ht),[tn,G]=nr(ht),or=u.forwardRef((t,r)=>{const{__scopeScrollArea:o,type:s="hover",dir:a,scrollHideDelay:l=600,...d}=t,[m,f]=u.useState(null),[c,h]=u.useState(null),[b,x]=u.useState(null),[S,A]=u.useState(null),[I,U]=u.useState(null),[w,$]=u.useState(0),[Y,E]=u.useState(0),[H,q]=u.useState(!1),[oe,ae]=u.useState(!1),N=pe(r,y=>f(y)),F=Jr(a);return n.jsx(tn,{scope:o,type:s,dir:F,scrollHideDelay:l,scrollArea:m,viewport:c,onViewportChange:h,content:b,onContentChange:x,scrollbarX:S,onScrollbarXChange:A,scrollbarXEnabled:H,onScrollbarXEnabledChange:q,scrollbarY:I,onScrollbarYChange:U,scrollbarYEnabled:oe,onScrollbarYEnabledChange:ae,onCornerWidthChange:$,onCornerHeightChange:E,children:n.jsx(Ne.div,{dir:F,...d,ref:N,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":Y+"px",...t.style}})})});or.displayName=ht;var ar="ScrollAreaViewport",sr=u.forwardRef((t,r)=>{const{__scopeScrollArea:o,children:s,nonce:a,...l}=t,d=G(ar,o),m=u.useRef(null),f=pe(r,m,d.onViewportChange);return n.jsxs(n.Fragment,{children:[n.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),n.jsx(Ne.div,{"data-radix-scroll-area-viewport":"",...l,ref:f,style:{overflowX:d.scrollbarXEnabled?"scroll":"hidden",overflowY:d.scrollbarYEnabled?"scroll":"hidden",...t.style},children:n.jsx("div",{ref:d.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});sr.displayName=ar;var V="ScrollAreaScrollbar",pt=u.forwardRef((t,r)=>{const{forceMount:o,...s}=t,a=G(V,t.__scopeScrollArea),{onScrollbarXEnabledChange:l,onScrollbarYEnabledChange:d}=a,m=t.orientation==="horizontal";return u.useEffect(()=>(m?l(!0):d(!0),()=>{m?l(!1):d(!1)}),[m,l,d]),a.type==="hover"?n.jsx(rn,{...s,ref:r,forceMount:o}):a.type==="scroll"?n.jsx(nn,{...s,ref:r,forceMount:o}):a.type==="auto"?n.jsx(ir,{...s,ref:r,forceMount:o}):a.type==="always"?n.jsx(gt,{...s,ref:r}):null});pt.displayName=V;var rn=u.forwardRef((t,r)=>{const{forceMount:o,...s}=t,a=G(V,t.__scopeScrollArea),[l,d]=u.useState(!1);return u.useEffect(()=>{const m=a.scrollArea;let f=0;if(m){const c=()=>{window.clearTimeout(f),d(!0)},h=()=>{f=window.setTimeout(()=>d(!1),a.scrollHideDelay)};return m.addEventListener("pointerenter",c),m.addEventListener("pointerleave",h),()=>{window.clearTimeout(f),m.removeEventListener("pointerenter",c),m.removeEventListener("pointerleave",h)}}},[a.scrollArea,a.scrollHideDelay]),n.jsx(We,{present:o||l,children:n.jsx(ir,{"data-state":l?"visible":"hidden",...s,ref:r})})}),nn=u.forwardRef((t,r)=>{const{forceMount:o,...s}=t,a=G(V,t.__scopeScrollArea),l=t.orientation==="horizontal",d=Be(()=>f("SCROLL_END"),100),[m,f]=en("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return u.useEffect(()=>{if(m==="idle"){const c=window.setTimeout(()=>f("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(c)}},[m,a.scrollHideDelay,f]),u.useEffect(()=>{const c=a.viewport,h=l?"scrollLeft":"scrollTop";if(c){let b=c[h];const x=()=>{const S=c[h];b!==S&&(f("SCROLL"),d()),b=S};return c.addEventListener("scroll",x),()=>c.removeEventListener("scroll",x)}},[a.viewport,l,f,d]),n.jsx(We,{present:o||m!=="hidden",children:n.jsx(gt,{"data-state":m==="hidden"?"hidden":"visible",...s,ref:r,onPointerEnter:ne(t.onPointerEnter,()=>f("POINTER_ENTER")),onPointerLeave:ne(t.onPointerLeave,()=>f("POINTER_LEAVE"))})})}),ir=u.forwardRef((t,r)=>{const o=G(V,t.__scopeScrollArea),{forceMount:s,...a}=t,[l,d]=u.useState(!1),m=t.orientation==="horizontal",f=Be(()=>{if(o.viewport){const c=o.viewport.offsetWidth<o.viewport.scrollWidth,h=o.viewport.offsetHeight<o.viewport.scrollHeight;d(m?c:h)}},10);return he(o.viewport,f),he(o.content,f),n.jsx(We,{present:s||l,children:n.jsx(gt,{"data-state":l?"visible":"hidden",...a,ref:r})})}),gt=u.forwardRef((t,r)=>{const{orientation:o="vertical",...s}=t,a=G(V,t.__scopeScrollArea),l=u.useRef(null),d=u.useRef(0),[m,f]=u.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=mr(m.viewport,m.content),h={...s,sizes:m,onSizesChange:f,hasThumb:c>0&&c<1,onThumbChange:x=>l.current=x,onThumbPointerUp:()=>d.current=0,onThumbPointerDown:x=>d.current=x};function b(x,S){return dn(x,d.current,m,S)}return o==="horizontal"?n.jsx(on,{...h,ref:r,onThumbPositionChange:()=>{if(a.viewport&&l.current){const x=a.viewport.scrollLeft,S=Vt(x,m,a.dir);l.current.style.transform=`translate3d(${S}px, 0, 0)`}},onWheelScroll:x=>{a.viewport&&(a.viewport.scrollLeft=x)},onDragScroll:x=>{a.viewport&&(a.viewport.scrollLeft=b(x,a.dir))}}):o==="vertical"?n.jsx(an,{...h,ref:r,onThumbPositionChange:()=>{if(a.viewport&&l.current){const x=a.viewport.scrollTop,S=Vt(x,m);l.current.style.transform=`translate3d(0, ${S}px, 0)`}},onWheelScroll:x=>{a.viewport&&(a.viewport.scrollTop=x)},onDragScroll:x=>{a.viewport&&(a.viewport.scrollTop=b(x))}}):null}),on=u.forwardRef((t,r)=>{const{sizes:o,onSizesChange:s,...a}=t,l=G(V,t.__scopeScrollArea),[d,m]=u.useState(),f=u.useRef(null),c=pe(r,f,l.onScrollbarXChange);return u.useEffect(()=>{f.current&&m(getComputedStyle(f.current))},[f]),n.jsx(cr,{"data-orientation":"horizontal",...a,ref:c,sizes:o,style:{bottom:0,left:l.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:l.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Ge(o)+"px",...t.style},onThumbPointerDown:h=>t.onThumbPointerDown(h.x),onDragScroll:h=>t.onDragScroll(h.x),onWheelScroll:(h,b)=>{if(l.viewport){const x=l.viewport.scrollLeft+h.deltaX;t.onWheelScroll(x),hr(x,b)&&h.preventDefault()}},onResize:()=>{f.current&&l.viewport&&d&&s({content:l.viewport.scrollWidth,viewport:l.viewport.offsetWidth,scrollbar:{size:f.current.clientWidth,paddingStart:Fe(d.paddingLeft),paddingEnd:Fe(d.paddingRight)}})}})}),an=u.forwardRef((t,r)=>{const{sizes:o,onSizesChange:s,...a}=t,l=G(V,t.__scopeScrollArea),[d,m]=u.useState(),f=u.useRef(null),c=pe(r,f,l.onScrollbarYChange);return u.useEffect(()=>{f.current&&m(getComputedStyle(f.current))},[f]),n.jsx(cr,{"data-orientation":"vertical",...a,ref:c,sizes:o,style:{top:0,right:l.dir==="ltr"?0:void 0,left:l.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Ge(o)+"px",...t.style},onThumbPointerDown:h=>t.onThumbPointerDown(h.y),onDragScroll:h=>t.onDragScroll(h.y),onWheelScroll:(h,b)=>{if(l.viewport){const x=l.viewport.scrollTop+h.deltaY;t.onWheelScroll(x),hr(x,b)&&h.preventDefault()}},onResize:()=>{f.current&&l.viewport&&d&&s({content:l.viewport.scrollHeight,viewport:l.viewport.offsetHeight,scrollbar:{size:f.current.clientHeight,paddingStart:Fe(d.paddingTop),paddingEnd:Fe(d.paddingBottom)}})}})}),[sn,lr]=nr(V),cr=u.forwardRef((t,r)=>{const{__scopeScrollArea:o,sizes:s,hasThumb:a,onThumbChange:l,onThumbPointerUp:d,onThumbPointerDown:m,onThumbPositionChange:f,onDragScroll:c,onWheelScroll:h,onResize:b,...x}=t,S=G(V,o),[A,I]=u.useState(null),U=pe(r,N=>I(N)),w=u.useRef(null),$=u.useRef(""),Y=S.viewport,E=s.content-s.viewport,H=re(h),q=re(f),oe=Be(b,10);function ae(N){if(w.current){const F=N.clientX-w.current.left,y=N.clientY-w.current.top;c({x:F,y})}}return u.useEffect(()=>{const N=F=>{const y=F.target;(A==null?void 0:A.contains(y))&&H(F,E)};return document.addEventListener("wheel",N,{passive:!1}),()=>document.removeEventListener("wheel",N,{passive:!1})},[Y,A,E,H]),u.useEffect(q,[s,q]),he(A,oe),he(S.content,oe),n.jsx(sn,{scope:o,scrollbar:A,hasThumb:a,onThumbChange:re(l),onThumbPointerUp:re(d),onThumbPositionChange:q,onThumbPointerDown:re(m),children:n.jsx(Ne.div,{...x,ref:U,style:{position:"absolute",...x.style},onPointerDown:ne(t.onPointerDown,N=>{N.button===0&&(N.target.setPointerCapture(N.pointerId),w.current=A.getBoundingClientRect(),$.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",S.viewport&&(S.viewport.style.scrollBehavior="auto"),ae(N))}),onPointerMove:ne(t.onPointerMove,ae),onPointerUp:ne(t.onPointerUp,N=>{const F=N.target;F.hasPointerCapture(N.pointerId)&&F.releasePointerCapture(N.pointerId),document.body.style.webkitUserSelect=$.current,S.viewport&&(S.viewport.style.scrollBehavior=""),w.current=null})})})}),He="ScrollAreaThumb",dr=u.forwardRef((t,r)=>{const{forceMount:o,...s}=t,a=lr(He,t.__scopeScrollArea);return n.jsx(We,{present:o||a.hasThumb,children:n.jsx(ln,{ref:r,...s})})}),ln=u.forwardRef((t,r)=>{const{__scopeScrollArea:o,style:s,...a}=t,l=G(He,o),d=lr(He,o),{onThumbPositionChange:m}=d,f=pe(r,b=>d.onThumbChange(b)),c=u.useRef(void 0),h=Be(()=>{c.current&&(c.current(),c.current=void 0)},100);return u.useEffect(()=>{const b=l.viewport;if(b){const x=()=>{if(h(),!c.current){const S=un(b,m);c.current=S,m()}};return m(),b.addEventListener("scroll",x),()=>b.removeEventListener("scroll",x)}},[l.viewport,h,m]),n.jsx(Ne.div,{"data-state":d.hasThumb?"visible":"hidden",...a,ref:f,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:ne(t.onPointerDownCapture,b=>{const S=b.target.getBoundingClientRect(),A=b.clientX-S.left,I=b.clientY-S.top;d.onThumbPointerDown({x:A,y:I})}),onPointerUp:ne(t.onPointerUp,d.onThumbPointerUp)})});dr.displayName=He;var bt="ScrollAreaCorner",ur=u.forwardRef((t,r)=>{const o=G(bt,t.__scopeScrollArea),s=!!(o.scrollbarX&&o.scrollbarY);return o.type!=="scroll"&&s?n.jsx(cn,{...t,ref:r}):null});ur.displayName=bt;var cn=u.forwardRef((t,r)=>{const{__scopeScrollArea:o,...s}=t,a=G(bt,o),[l,d]=u.useState(0),[m,f]=u.useState(0),c=!!(l&&m);return he(a.scrollbarX,()=>{var b;const h=((b=a.scrollbarX)==null?void 0:b.offsetHeight)||0;a.onCornerHeightChange(h),f(h)}),he(a.scrollbarY,()=>{var b;const h=((b=a.scrollbarY)==null?void 0:b.offsetWidth)||0;a.onCornerWidthChange(h),d(h)}),c?n.jsx(Ne.div,{...s,ref:r,style:{width:l,height:m,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Fe(t){return t?parseInt(t,10):0}function mr(t,r){const o=t/r;return isNaN(o)?0:o}function Ge(t){const r=mr(t.viewport,t.content),o=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=(t.scrollbar.size-o)*r;return Math.max(s,18)}function dn(t,r,o,s="ltr"){const a=Ge(o),l=a/2,d=r||l,m=a-d,f=o.scrollbar.paddingStart+d,c=o.scrollbar.size-o.scrollbar.paddingEnd-m,h=o.content-o.viewport,b=s==="ltr"?[0,h]:[h*-1,0];return fr([f,c],b)(t)}function Vt(t,r,o="ltr"){const s=Ge(r),a=r.scrollbar.paddingStart+r.scrollbar.paddingEnd,l=r.scrollbar.size-a,d=r.content-r.viewport,m=l-s,f=o==="ltr"?[0,d]:[d*-1,0],c=Qr(t,f);return fr([0,d],[0,m])(c)}function fr(t,r){return o=>{if(t[0]===t[1]||r[0]===r[1])return r[0];const s=(r[1]-r[0])/(t[1]-t[0]);return r[0]+s*(o-t[0])}}function hr(t,r){return t>0&&t<r}var un=(t,r=()=>{})=>{let o={left:t.scrollLeft,top:t.scrollTop},s=0;return function a(){const l={left:t.scrollLeft,top:t.scrollTop},d=o.left!==l.left,m=o.top!==l.top;(d||m)&&r(),o=l,s=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(s)};function Be(t,r){const o=re(t),s=u.useRef(0);return u.useEffect(()=>()=>window.clearTimeout(s.current),[]),u.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(o,r)},[o,r])}function he(t,r){const o=re(r);Mr(()=>{let s=0;if(t){const a=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(o)});return a.observe(t),()=>{window.cancelAnimationFrame(s),a.unobserve(t)}}},[t,o])}var pr=or,mn=sr,fn=ur;const gr=u.forwardRef(({className:t,children:r,...o},s)=>n.jsxs(pr,{ref:s,className:ye("relative overflow-hidden",t),...o,children:[n.jsx(mn,{className:"h-full w-full rounded-[inherit]",children:r}),n.jsx(br,{}),n.jsx(fn,{})]}));gr.displayName=pr.displayName;const br=u.forwardRef(({className:t,orientation:r="vertical",...o},s)=>n.jsx(pt,{ref:s,orientation:r,className:ye("flex touch-none select-none transition-colors",r==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",r==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...o,children:n.jsx(dr,{className:"relative flex-1 rounded-full bg-border"})}));br.displayName=pt.displayName;const hn=({chatHistory:t,isLoading:r,onSendMessage:o,suggestedPrompts:s})=>{const[a,l]=u.useState(""),d=u.useRef(null);u.useEffect(()=>{var c;(c=d.current)==null||c.scrollIntoView({behavior:"smooth"})},[t]);const m=c=>{c==null||c.preventDefault(),a.trim()&&!r&&(o(a.trim()),l(""))},f=c=>{o(c)};return n.jsxs("div",{className:"flex flex-col h-[60vh] md:h-[calc(100vh-250px)]",children:[n.jsxs(gr,{className:"flex-grow pr-4 space-y-6",children:[t.map((c,h)=>n.jsxs("div",{className:ye("flex items-start gap-3",c.role==="user"?"justify-end":"justify-start"),children:[c.role==="model"&&n.jsxs(Gt,{className:"h-8 w-8",children:[n.jsx(Bt,{src:"/img/ai-avatar.png",alt:"AI Avatar"})," ",n.jsx(Yt,{children:n.jsx(dt,{className:"h-5 w-5"})})]}),n.jsx("div",{className:ye("chat-bubble p-3 rounded-lg max-w-[70%]",c.role==="user"?"bg-[var(--primary-accent-start)] text-white rounded-br-none":"bg-[var(--bg-card)] text-[var(--text-primary)] rounded-bl-none"),children:c.isLoading&&c.parts[0].text===""?n.jsxs("div",{className:"typing-indicator px-2 py-1",children:[n.jsx("span",{}),n.jsx("span",{}),n.jsx("span",{})]}):n.jsx("div",{className:"text-sm",dangerouslySetInnerHTML:{__html:jr(c.parts[0].text||"")}})}),c.role==="user"&&n.jsxs(Gt,{className:"h-8 w-8",children:[n.jsx(Bt,{src:"/img/user-avatar.png",alt:"User Avatar"})," ",n.jsx(Yt,{children:"You"})]})]},h)),n.jsx("div",{ref:d})]}),n.jsxs("div",{className:"pt-4 mt-auto",children:[n.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:s.map(c=>n.jsxs(Ue,{size:"sm",variant:"subtle",onClick:()=>f(c),disabled:r,children:[n.jsx(qr,{size:14,className:"mr-1.5 text-[var(--primary-accent-end)]"})," ",c]},c))}),n.jsxs("form",{onSubmit:m,className:"flex items-center gap-3",children:[n.jsx("textarea",{value:a,onChange:c=>l(c.target.value),onKeyDown:c=>{c.key==="Enter"&&!c.shiftKey&&m(c)},placeholder:"Ask a follow-up question...",className:"form-input-light flex-grow !rounded-xl resize-none",rows:1,style:{maxHeight:"150px"},disabled:r}),n.jsx(Ue,{type:"submit",size:"icon",variant:"primary",disabled:r||!a.trim(),children:n.jsx($r,{size:18})})]})]})]})};/*! @license DOMPurify 3.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.0/LICENSE */const{entries:xr,setPrototypeOf:$t,isFrozen:pn,getPrototypeOf:gn,getOwnPropertyDescriptor:bn}=Object;let{freeze:j,seal:W,create:ut}=Object,{apply:mt,construct:ft}=typeof Reflect<"u"&&Reflect;j||(j=function(r){return r});W||(W=function(r){return r});mt||(mt=function(r,o){for(var s=arguments.length,a=new Array(s>2?s-2:0),l=2;l<s;l++)a[l-2]=arguments[l];return r.apply(o,a)});ft||(ft=function(r){for(var o=arguments.length,s=new Array(o>1?o-1:0),a=1;a<o;a++)s[a-1]=arguments[a];return new r(...s)});const je=k(Array.prototype.forEach),xn=k(Array.prototype.lastIndexOf),qt=k(Array.prototype.pop),Se=k(Array.prototype.push),vn=k(Array.prototype.splice),ze=k(String.prototype.toLowerCase),ot=k(String.prototype.toString),at=k(String.prototype.match),Te=k(String.prototype.replace),Sn=k(String.prototype.indexOf),Tn=k(String.prototype.trim),B=k(Object.prototype.hasOwnProperty),M=k(RegExp.prototype.test),Ae=An(TypeError);function k(t){return function(r){r instanceof RegExp&&(r.lastIndex=0);for(var o=arguments.length,s=new Array(o>1?o-1:0),a=1;a<o;a++)s[a-1]=arguments[a];return mt(t,r,s)}}function An(t){return function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return ft(t,o)}}function v(t,r){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ze;$t&&$t(t,null);let s=r.length;for(;s--;){let a=r[s];if(typeof a=="string"){const l=o(a);l!==a&&(pn(r)||(r[s]=l),a=l)}t[a]=!0}return t}function En(t){for(let r=0;r<t.length;r++)B(t,r)||(t[r]=null);return t}function Q(t){const r=ut(null);for(const[o,s]of xr(t))B(t,o)&&(Array.isArray(s)?r[o]=En(s):s&&typeof s=="object"&&s.constructor===Object?r[o]=Q(s):r[o]=s);return r}function Ee(t,r){for(;t!==null;){const s=bn(t,r);if(s){if(s.get)return k(s.get);if(typeof s.value=="function")return k(s.value)}t=gn(t)}function o(){return null}return o}const Kt=j(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),st=j(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),it=j(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),wn=j(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),lt=j(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),yn=j(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Zt=j(["#text"]),Jt=j(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),ct=j(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Qt=j(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ke=j(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),_n=W(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Nn=W(/<%[\w\W]*|[\w\W]*%>/gm),Rn=W(/\$\{[\w\W]*/gm),Cn=W(/^data-[\-\w.\u00B7-\uFFFF]+$/),Ln=W(/^aria-[\-\w]+$/),vr=W(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Dn=W(/^(?:\w+script|data):/i),Pn=W(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Sr=W(/^html$/i),On=W(/^[a-z][.\w]*(-[.\w]+)+$/i);var er=Object.freeze({__proto__:null,ARIA_ATTR:Ln,ATTR_WHITESPACE:Pn,CUSTOM_ELEMENT:On,DATA_ATTR:Cn,DOCTYPE_NAME:Sr,ERB_EXPR:Nn,IS_ALLOWED_URI:vr,IS_SCRIPT_OR_DATA:Dn,MUSTACHE_EXPR:_n,TMPLIT_EXPR:Rn});const we={element:1,text:3,progressingInstruction:7,comment:8,document:9},In=function(){return typeof window>"u"?null:window},Mn=function(r,o){if(typeof r!="object"||typeof r.createPolicy!="function")return null;let s=null;const a="data-tt-policy-suffix";o&&o.hasAttribute(a)&&(s=o.getAttribute(a));const l="dompurify"+(s?"#"+s:"");try{return r.createPolicy(l,{createHTML(d){return d},createScriptURL(d){return d}})}catch{return console.warn("TrustedTypes policy "+l+" could not be created."),null}},tr=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Tr(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:In();const r=g=>Tr(g);if(r.version="3.3.0",r.removed=[],!t||!t.document||t.document.nodeType!==we.document||!t.Element)return r.isSupported=!1,r;let{document:o}=t;const s=o,a=s.currentScript,{DocumentFragment:l,HTMLTemplateElement:d,Node:m,Element:f,NodeFilter:c,NamedNodeMap:h=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:b,DOMParser:x,trustedTypes:S}=t,A=f.prototype,I=Ee(A,"cloneNode"),U=Ee(A,"remove"),w=Ee(A,"nextSibling"),$=Ee(A,"childNodes"),Y=Ee(A,"parentNode");if(typeof d=="function"){const g=o.createElement("template");g.content&&g.content.ownerDocument&&(o=g.content.ownerDocument)}let E,H="";const{implementation:q,createNodeIterator:oe,createDocumentFragment:ae,getElementsByTagName:N}=o,{importNode:F}=s;let y=tr();r.isSupported=typeof xr=="function"&&typeof Y=="function"&&q&&q.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Re,ERB_EXPR:Ye,TMPLIT_EXPR:Xe,DATA_ATTR:Ar,ARIA_ATTR:Er,IS_SCRIPT_OR_DATA:wr,ATTR_WHITESPACE:xt,CUSTOM_ELEMENT:yr}=er;let{IS_ALLOWED_URI:vt}=er,C=null;const St=v({},[...Kt,...st,...it,...lt,...Zt]);let D=null;const Tt=v({},[...Jt,...ct,...Qt,...ke]);let _=Object.seal(ut(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ge=null,Ve=null;const se=Object.seal(ut(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let At=!0,$e=!0,Et=!1,wt=!0,ie=!1,Ce=!0,ee=!1,qe=!1,Ke=!1,le=!1,Le=!1,De=!1,yt=!0,_t=!1;const _r="user-content-";let Ze=!0,be=!1,ce={},de=null;const Nt=v({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Rt=null;const Ct=v({},["audio","video","img","source","image","track"]);let Je=null;const Lt=v({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Pe="http://www.w3.org/1998/Math/MathML",Oe="http://www.w3.org/2000/svg",K="http://www.w3.org/1999/xhtml";let ue=K,Qe=!1,et=null;const Nr=v({},[Pe,Oe,K],ot);let Ie=v({},["mi","mo","mn","ms","mtext"]),Me=v({},["annotation-xml"]);const Rr=v({},["title","style","font","a","script"]);let xe=null;const Cr=["application/xhtml+xml","text/html"],Lr="text/html";let L=null,me=null;const Dr=o.createElement("form"),Dt=function(e){return e instanceof RegExp||e instanceof Function},tt=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(me&&me===e)){if((!e||typeof e!="object")&&(e={}),e=Q(e),xe=Cr.indexOf(e.PARSER_MEDIA_TYPE)===-1?Lr:e.PARSER_MEDIA_TYPE,L=xe==="application/xhtml+xml"?ot:ze,C=B(e,"ALLOWED_TAGS")?v({},e.ALLOWED_TAGS,L):St,D=B(e,"ALLOWED_ATTR")?v({},e.ALLOWED_ATTR,L):Tt,et=B(e,"ALLOWED_NAMESPACES")?v({},e.ALLOWED_NAMESPACES,ot):Nr,Je=B(e,"ADD_URI_SAFE_ATTR")?v(Q(Lt),e.ADD_URI_SAFE_ATTR,L):Lt,Rt=B(e,"ADD_DATA_URI_TAGS")?v(Q(Ct),e.ADD_DATA_URI_TAGS,L):Ct,de=B(e,"FORBID_CONTENTS")?v({},e.FORBID_CONTENTS,L):Nt,ge=B(e,"FORBID_TAGS")?v({},e.FORBID_TAGS,L):Q({}),Ve=B(e,"FORBID_ATTR")?v({},e.FORBID_ATTR,L):Q({}),ce=B(e,"USE_PROFILES")?e.USE_PROFILES:!1,At=e.ALLOW_ARIA_ATTR!==!1,$e=e.ALLOW_DATA_ATTR!==!1,Et=e.ALLOW_UNKNOWN_PROTOCOLS||!1,wt=e.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ie=e.SAFE_FOR_TEMPLATES||!1,Ce=e.SAFE_FOR_XML!==!1,ee=e.WHOLE_DOCUMENT||!1,le=e.RETURN_DOM||!1,Le=e.RETURN_DOM_FRAGMENT||!1,De=e.RETURN_TRUSTED_TYPE||!1,Ke=e.FORCE_BODY||!1,yt=e.SANITIZE_DOM!==!1,_t=e.SANITIZE_NAMED_PROPS||!1,Ze=e.KEEP_CONTENT!==!1,be=e.IN_PLACE||!1,vt=e.ALLOWED_URI_REGEXP||vr,ue=e.NAMESPACE||K,Ie=e.MATHML_TEXT_INTEGRATION_POINTS||Ie,Me=e.HTML_INTEGRATION_POINTS||Me,_=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&Dt(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(_.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&Dt(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(_.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(_.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ie&&($e=!1),Le&&(le=!0),ce&&(C=v({},Zt),D=[],ce.html===!0&&(v(C,Kt),v(D,Jt)),ce.svg===!0&&(v(C,st),v(D,ct),v(D,ke)),ce.svgFilters===!0&&(v(C,it),v(D,ct),v(D,ke)),ce.mathMl===!0&&(v(C,lt),v(D,Qt),v(D,ke))),e.ADD_TAGS&&(typeof e.ADD_TAGS=="function"?se.tagCheck=e.ADD_TAGS:(C===St&&(C=Q(C)),v(C,e.ADD_TAGS,L))),e.ADD_ATTR&&(typeof e.ADD_ATTR=="function"?se.attributeCheck=e.ADD_ATTR:(D===Tt&&(D=Q(D)),v(D,e.ADD_ATTR,L))),e.ADD_URI_SAFE_ATTR&&v(Je,e.ADD_URI_SAFE_ATTR,L),e.FORBID_CONTENTS&&(de===Nt&&(de=Q(de)),v(de,e.FORBID_CONTENTS,L)),Ze&&(C["#text"]=!0),ee&&v(C,["html","head","body"]),C.table&&(v(C,["tbody"]),delete ge.tbody),e.TRUSTED_TYPES_POLICY){if(typeof e.TRUSTED_TYPES_POLICY.createHTML!="function")throw Ae('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof e.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Ae('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');E=e.TRUSTED_TYPES_POLICY,H=E.createHTML("")}else E===void 0&&(E=Mn(S,a)),E!==null&&typeof H=="string"&&(H=E.createHTML(""));j&&j(e),me=e}},Pt=v({},[...st,...it,...wn]),Ot=v({},[...lt,...yn]),Pr=function(e){let i=Y(e);(!i||!i.tagName)&&(i={namespaceURI:ue,tagName:"template"});const p=ze(e.tagName),T=ze(i.tagName);return et[e.namespaceURI]?e.namespaceURI===Oe?i.namespaceURI===K?p==="svg":i.namespaceURI===Pe?p==="svg"&&(T==="annotation-xml"||Ie[T]):!!Pt[p]:e.namespaceURI===Pe?i.namespaceURI===K?p==="math":i.namespaceURI===Oe?p==="math"&&Me[T]:!!Ot[p]:e.namespaceURI===K?i.namespaceURI===Oe&&!Me[T]||i.namespaceURI===Pe&&!Ie[T]?!1:!Ot[p]&&(Rr[p]||!Pt[p]):!!(xe==="application/xhtml+xml"&&et[e.namespaceURI]):!1},X=function(e){Se(r.removed,{element:e});try{Y(e).removeChild(e)}catch{U(e)}},te=function(e,i){try{Se(r.removed,{attribute:i.getAttributeNode(e),from:i})}catch{Se(r.removed,{attribute:null,from:i})}if(i.removeAttribute(e),e==="is")if(le||Le)try{X(i)}catch{}else try{i.setAttribute(e,"")}catch{}},It=function(e){let i=null,p=null;if(Ke)e="<remove></remove>"+e;else{const R=at(e,/^[\r\n\t ]+/);p=R&&R[0]}xe==="application/xhtml+xml"&&ue===K&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const T=E?E.createHTML(e):e;if(ue===K)try{i=new x().parseFromString(T,xe)}catch{}if(!i||!i.documentElement){i=q.createDocument(ue,"template",null);try{i.documentElement.innerHTML=Qe?H:T}catch{}}const O=i.body||i.documentElement;return e&&p&&O.insertBefore(o.createTextNode(p),O.childNodes[0]||null),ue===K?N.call(i,ee?"html":"body")[0]:ee?i.documentElement:O},Mt=function(e){return oe.call(e.ownerDocument||e,e,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},rt=function(e){return e instanceof b&&(typeof e.nodeName!="string"||typeof e.textContent!="string"||typeof e.removeChild!="function"||!(e.attributes instanceof h)||typeof e.removeAttribute!="function"||typeof e.setAttribute!="function"||typeof e.namespaceURI!="string"||typeof e.insertBefore!="function"||typeof e.hasChildNodes!="function")},jt=function(e){return typeof m=="function"&&e instanceof m};function Z(g,e,i){je(g,p=>{p.call(r,e,i,me)})}const kt=function(e){let i=null;if(Z(y.beforeSanitizeElements,e,null),rt(e))return X(e),!0;const p=L(e.nodeName);if(Z(y.uponSanitizeElement,e,{tagName:p,allowedTags:C}),Ce&&e.hasChildNodes()&&!jt(e.firstElementChild)&&M(/<[/\w!]/g,e.innerHTML)&&M(/<[/\w!]/g,e.textContent)||e.nodeType===we.progressingInstruction||Ce&&e.nodeType===we.comment&&M(/<[/\w]/g,e.data))return X(e),!0;if(!(se.tagCheck instanceof Function&&se.tagCheck(p))&&(!C[p]||ge[p])){if(!ge[p]&&Ut(p)&&(_.tagNameCheck instanceof RegExp&&M(_.tagNameCheck,p)||_.tagNameCheck instanceof Function&&_.tagNameCheck(p)))return!1;if(Ze&&!de[p]){const T=Y(e)||e.parentNode,O=$(e)||e.childNodes;if(O&&T){const R=O.length;for(let z=R-1;z>=0;--z){const J=I(O[z],!0);J.__removalCount=(e.__removalCount||0)+1,T.insertBefore(J,w(e))}}}return X(e),!0}return e instanceof f&&!Pr(e)||(p==="noscript"||p==="noembed"||p==="noframes")&&M(/<\/no(script|embed|frames)/i,e.innerHTML)?(X(e),!0):(ie&&e.nodeType===we.text&&(i=e.textContent,je([Re,Ye,Xe],T=>{i=Te(i,T," ")}),e.textContent!==i&&(Se(r.removed,{element:e.cloneNode()}),e.textContent=i)),Z(y.afterSanitizeElements,e,null),!1)},zt=function(e,i,p){if(yt&&(i==="id"||i==="name")&&(p in o||p in Dr))return!1;if(!($e&&!Ve[i]&&M(Ar,i))){if(!(At&&M(Er,i))){if(!(se.attributeCheck instanceof Function&&se.attributeCheck(i,e))){if(!D[i]||Ve[i]){if(!(Ut(e)&&(_.tagNameCheck instanceof RegExp&&M(_.tagNameCheck,e)||_.tagNameCheck instanceof Function&&_.tagNameCheck(e))&&(_.attributeNameCheck instanceof RegExp&&M(_.attributeNameCheck,i)||_.attributeNameCheck instanceof Function&&_.attributeNameCheck(i,e))||i==="is"&&_.allowCustomizedBuiltInElements&&(_.tagNameCheck instanceof RegExp&&M(_.tagNameCheck,p)||_.tagNameCheck instanceof Function&&_.tagNameCheck(p))))return!1}else if(!Je[i]){if(!M(vt,Te(p,xt,""))){if(!((i==="src"||i==="xlink:href"||i==="href")&&e!=="script"&&Sn(p,"data:")===0&&Rt[e])){if(!(Et&&!M(wr,Te(p,xt,"")))){if(p)return!1}}}}}}}return!0},Ut=function(e){return e!=="annotation-xml"&&at(e,yr)},Ht=function(e){Z(y.beforeSanitizeAttributes,e,null);const{attributes:i}=e;if(!i||rt(e))return;const p={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:D,forceKeepAttr:void 0};let T=i.length;for(;T--;){const O=i[T],{name:R,namespaceURI:z,value:J}=O,fe=L(R),nt=J;let P=R==="value"?nt:Tn(nt);if(p.attrName=fe,p.attrValue=P,p.keepAttr=!0,p.forceKeepAttr=void 0,Z(y.uponSanitizeAttribute,e,p),P=p.attrValue,_t&&(fe==="id"||fe==="name")&&(te(R,e),P=_r+P),Ce&&M(/((--!?|])>)|<\/(style|title|textarea)/i,P)){te(R,e);continue}if(fe==="attributename"&&at(P,"href")){te(R,e);continue}if(p.forceKeepAttr)continue;if(!p.keepAttr){te(R,e);continue}if(!wt&&M(/\/>/i,P)){te(R,e);continue}ie&&je([Re,Ye,Xe],Wt=>{P=Te(P,Wt," ")});const Ft=L(e.nodeName);if(!zt(Ft,fe,P)){te(R,e);continue}if(E&&typeof S=="object"&&typeof S.getAttributeType=="function"&&!z)switch(S.getAttributeType(Ft,fe)){case"TrustedHTML":{P=E.createHTML(P);break}case"TrustedScriptURL":{P=E.createScriptURL(P);break}}if(P!==nt)try{z?e.setAttributeNS(z,R,P):e.setAttribute(R,P),rt(e)?X(e):qt(r.removed)}catch{te(R,e)}}Z(y.afterSanitizeAttributes,e,null)},Or=function g(e){let i=null;const p=Mt(e);for(Z(y.beforeSanitizeShadowDOM,e,null);i=p.nextNode();)Z(y.uponSanitizeShadowNode,i,null),kt(i),Ht(i),i.content instanceof l&&g(i.content);Z(y.afterSanitizeShadowDOM,e,null)};return r.sanitize=function(g){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=null,p=null,T=null,O=null;if(Qe=!g,Qe&&(g="<!-->"),typeof g!="string"&&!jt(g))if(typeof g.toString=="function"){if(g=g.toString(),typeof g!="string")throw Ae("dirty is not a string, aborting")}else throw Ae("toString is not a function");if(!r.isSupported)return g;if(qe||tt(e),r.removed=[],typeof g=="string"&&(be=!1),be){if(g.nodeName){const J=L(g.nodeName);if(!C[J]||ge[J])throw Ae("root node is forbidden and cannot be sanitized in-place")}}else if(g instanceof m)i=It("<!---->"),p=i.ownerDocument.importNode(g,!0),p.nodeType===we.element&&p.nodeName==="BODY"||p.nodeName==="HTML"?i=p:i.appendChild(p);else{if(!le&&!ie&&!ee&&g.indexOf("<")===-1)return E&&De?E.createHTML(g):g;if(i=It(g),!i)return le?null:De?H:""}i&&Ke&&X(i.firstChild);const R=Mt(be?g:i);for(;T=R.nextNode();)kt(T),Ht(T),T.content instanceof l&&Or(T.content);if(be)return g;if(le){if(Le)for(O=ae.call(i.ownerDocument);i.firstChild;)O.appendChild(i.firstChild);else O=i;return(D.shadowroot||D.shadowrootmode)&&(O=F.call(s,O,!0)),O}let z=ee?i.outerHTML:i.innerHTML;return ee&&C["!doctype"]&&i.ownerDocument&&i.ownerDocument.doctype&&i.ownerDocument.doctype.name&&M(Sr,i.ownerDocument.doctype.name)&&(z="<!DOCTYPE "+i.ownerDocument.doctype.name+`>
`+z),ie&&je([Re,Ye,Xe],J=>{z=Te(z,J," ")}),E&&De?E.createHTML(z):z},r.setConfig=function(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};tt(g),qe=!0},r.clearConfig=function(){me=null,qe=!1},r.isValidAttribute=function(g,e,i){me||tt({});const p=L(g),T=L(e);return zt(p,T,i)},r.addHook=function(g,e){typeof e=="function"&&Se(y[g],e)},r.removeHook=function(g,e){if(e!==void 0){const i=xn(y[g],e);return i===-1?void 0:vn(y[g],i,1)[0]}return qt(y[g])},r.removeHooks=function(g){y[g]=[]},r.removeAllHooks=function(){y=tr()},r}var jn=Tr();const kn=Ur("inline-flex items-center justify-center cursor-pointer rounded-md transition-colors disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary-accent-start text-white shadow-xs hover:bg-primary-accent-end",muted:"bg-muted text-muted-foreground",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50"},size:{default:"size-8 rounded-lg [&_svg]:size-4",sm:"size-6 [&_svg]:size-3",md:"size-10 rounded-lg [&_svg]:size-5",lg:"size-12 rounded-xl [&_svg]:size-6"}},defaultVariants:{variant:"default",size:"default"}});function zn({content:t,className:r,size:o,variant:s,delay:a=3e3,onClick:l,onCopy:d,isCopied:m,onCopyChange:f,...c}){const[h,b]=u.useState(m??!1),x=h?zr:Yr;u.useEffect(()=>{b(m??!1)},[m]);const S=u.useCallback(I=>{b(I),f==null||f(I)},[f]),A=u.useCallback(I=>{m||(t&&navigator.clipboard.writeText(t).then(()=>{S(!0),setTimeout(()=>S(!1),a),d==null||d(t)}).catch(U=>{console.error("Error copying command",U)}),l==null||l(I))},[m,t,a,l,d,S]);return n.jsx(Xt.button,{"data-slot":"copy-button",whileHover:{scale:1.05},whileTap:{scale:.95},className:ye(kn({variant:s,size:o}),r),onClick:A,...c,children:n.jsx(kr,{mode:"wait",children:n.jsx(Xt.span,{"data-slot":"copy-button-icon",initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{duration:.15},children:n.jsx(x,{})},h?"check":"copy")})})}const Un=({summary:t})=>{const r=t.replace(/\n/g,"<br />").replace(/\* \*\*(.*?)\*\*/g,'<li><strong class="text-[var(--primary-accent-start)]">$1</strong>').replace(/<\/strong>:(.*?)<br \/>/g,"</strong>:$1</li>").replace(/- \*\*(.*?)\*\*/g,'<li><strong class="text-[var(--primary-accent-start)]">$1</strong>').replace(/\*\*(.*?)\*\*/g,'<strong class="text-[var(--primary-accent-start)]">$1</strong>').replace(/- (.*?)(<br \/>|$)/g,'<li class="list-none ml-0 mb-1.5">$1</li>'),o=jn.sanitize(r);return n.jsxs("div",{className:"content-card bg-[var(--bg-elevated)] border-l-4 border-[var(--primary-accent-start)]",children:[n.jsxs("h3",{className:"section-heading text-base !mb-3",children:[n.jsx(Xr,{size:18,className:"mr-3 icon-primary"}),"AI-Generated Summary"]}),n.jsx("ul",{className:"text-sm space-y-2 text-[var(--text-secondary)]",dangerouslySetInnerHTML:{__html:o}})]})},Hn=()=>n.jsx("div",{className:"space-y-4",children:[...Array(3)].map((t,r)=>n.jsxs("div",{className:"p-4 bg-[var(--bg-card-subtle-accent)] rounded-lg animate-pulse",children:[n.jsx("div",{className:"h-4 bg-[var(--border-color)] rounded w-1/3 mb-3"}),n.jsx("div",{className:"h-3 bg-[var(--border-color)] rounded w-full mb-1"}),n.jsx("div",{className:"h-3 bg-[var(--border-color)] rounded w-5/6"})]},r))}),Fn=({reconciliationReport:t,addToast:r})=>{const[o,s]=u.useState([]),[a,l]=u.useState(!1),[d,m]=u.useState(null),f=(t==null?void 0:t.newMembers)||[],c=async()=>{if(f.length===0){r("No new members found in the current data to generate messages for.","warning");return}l(!0),m(null),s([]);try{const b=new Gr("AIzaSyCc8wwsp9E7PuNUu20Svoc_wSaSQXtMbjM").getGenerativeModel({model:"gemini-1.5-flash"}),S=`You are a friendly and welcoming church administrator for The Apostolic Church. Your task is to generate a short, personalized, and encouraging SMS message for each of the following new church members.



Guidelines:

- Keep each message under 160 characters to fit in a standard SMS.

- Start with a warm greeting addressing the member by their first name.

- Express joy that they have joined the church family.

- End with a warm closing, for example "God bless you." or "Welcome to the family!".

- Maintain a positive and uplifting tone.

- DO NOT add any extra text or explanation outside of the required JSON output.



Here are the new members to welcome: ${f.map(w=>`${w["First Name"]||""} ${w.Surname||""}`.trim()).filter(Boolean).join(", ")}`,U=(await b.generateContent({contents:[{role:"user",parts:[{text:S}]}],generationConfig:{responseMimeType:"application/json",responseSchema:{type:ve.OBJECT,properties:{analysis:{type:ve.ARRAY,items:{type:ve.OBJECT,properties:{memberName:{type:ve.STRING,description:"The full name of the new church member."},message:{type:ve.STRING,description:"The personalized welcome SMS message for the member."}},required:["memberName","message"]}}},required:["analysis"]}}})).response.text();if(U){const w=JSON.parse(U);if(w&&Array.isArray(w.analysis))s(w.analysis);else throw new Error("AI response was not a JSON object with an 'analysis' array.")}else throw new Error("AI response was empty.")}catch(h){console.error("Error generating outreach messages:",h),m("Sorry, I couldn't generate the messages. The AI might be busy. Please try again in a moment."),r("Failed to generate outreach messages.","error")}finally{l(!1)}};return n.jsxs("section",{className:"content-card",children:[n.jsxs("h2",{className:"section-heading",children:[n.jsx(Vr,{size:22,className:"mr-3 icon-primary"}),"AI Outreach Assistant"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 items-center",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"outreach-target",className:"form-label",children:"Select Target Group"}),n.jsx("select",{id:"outreach-target",className:"form-input-light w-full",children:n.jsxs("option",{children:["New Members (Souls Won) (",f.length,")"]})})]}),n.jsx("div",{className:"self-end",children:n.jsx(Ue,{onClick:c,isLoading:a,disabled:f.length===0||a,variant:"secondary",fullWidth:!0,children:"Generate Welcome Messages"})})]}),n.jsxs("div",{className:"mt-6 pt-6 border-t border-[var(--border-color)]",children:[a&&n.jsx(Hn,{}),d&&n.jsxs("div",{className:"text-center py-6 text-[var(--danger-text)]",children:[n.jsx(rr,{size:32,className:"mx-auto mb-2"}),n.jsx("p",{children:d})]}),!a&&!d&&o.length>0&&n.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto pr-2",children:o.map((h,b)=>n.jsxs("div",{className:"p-4 bg-[var(--bg-elevated)] rounded-lg border border-[var(--border-color)]",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsxs("h4",{className:"font-semibold text-[var(--text-primary)] flex items-center gap-2",children:[n.jsx(Wr,{size:16})," ",h.memberName]}),n.jsx(zn,{content:h.message})]}),n.jsx("p",{className:"text-sm text-[var(--text-secondary)] whitespace-pre-wrap",children:h.message})]},b))}),!a&&!d&&o.length===0&&n.jsx("div",{className:"text-center py-6 text-[var(--text-muted)]",children:f.length>0?"Click 'Generate' to create personalized welcome messages for your new members.":"No new members found in the current workspace. Upload and reconcile a new file to identify them."})]})]})},Bn=()=>{var E;const{titheListData:t=[],currentAssembly:r,selectedDate:o,addToast:s,tithersCount:a,nonTithersCount:l,totalAmount:d,reconciliationReport:m}=Hr(),{chatHistory:f,chartData:c,isLoading:h,error:b,startChat:x,sendMessage:S}=Fr(),A=()=>{x(t,r,o,a,l,d)},I=H=>{H.trim()&&S(H)},U=t.length>0,w=f.length>0,$=(E=f[0])==null?void 0:E.summary,Y=["What are the key observations from this data?","Suggest some potential actions based on these numbers.","What if participation increased by 10%?",`How does ${r||"this assembly"} compare to typical patterns?`];return n.jsxs("div",{className:"space-y-8",children:[n.jsx(Fn,{reconciliationReport:m,addToast:s}),n.jsx("section",{className:"content-card",children:n.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-4",children:[n.jsxs("h2",{id:"analytics-heading",className:"section-heading border-none pb-0 mb-0",children:[n.jsx(dt,{size:22,className:"mr-3 icon-primary"}),"AI-Powered Analytics Chat"]}),n.jsx(Ue,{onClick:A,disabled:!U||h,isLoading:h&&!w,variant:"primary",children:w?`Restart Analysis for ${r}`:"Analyze with AI"})]})}),n.jsxs("div",{className:"min-h-[400px]",children:[b&&n.jsxs("div",{className:"content-card text-center py-10 flex flex-col items-center",children:[n.jsx(rr,{size:48,className:"text-[var(--danger-text)] mb-4"}),n.jsx("h3",{className:"text-xl font-semibold text-[var(--danger-text)]",children:"Analysis Failed"}),n.jsx("p",{className:"text-[var(--text-secondary)] mt-2 max-w-md",children:b})]}),!w&&!h&&!b&&n.jsxs("div",{className:"content-card text-center py-10 flex flex-col items-center animate-fadeIn",children:[n.jsx(dt,{size:52,className:"mx-auto text-[var(--text-muted)] mb-4 opacity-50"}),n.jsx("h3",{className:"text-xl font-semibold text-[var(--text-primary)]",children:"Ready for Insights?"}),n.jsx("p",{className:"text-[var(--text-secondary)] mt-2 max-w-md",children:U?`You have a list for ${r} Assembly ready. Click "Analyze with AI" to start a conversation about your data.`:"Generate or load a tithe list in the Processor view, then come back here to get an AI-powered analysis."})]}),h&&!w&&n.jsx("div",{className:"content-card",children:n.jsx(Kr,{})}),w&&!b&&n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-start",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[$&&n.jsx(Un,{summary:$}),n.jsx("div",{className:"content-card",children:n.jsx(hn,{chatHistory:f,isLoading:h,onSendMessage:I,suggestedPrompts:Y})})]}),n.jsx("div",{className:"lg:col-span-1 space-y-8 sticky top-8",children:c.length>0&&n.jsxs("div",{className:"content-card animate-fadeIn",children:[n.jsx("h3",{className:"section-heading text-base !mb-6",children:"Contribution Distribution"}),n.jsx(Br,{data:c})]})})]})]})]})};export{Bn as default};
