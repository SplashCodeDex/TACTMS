import{c as m,R as v,j as e,ah as D,B as h,U as A,X as z,r as g,ai as S,P as L,g as R,k as T,t as O,aj as F,p as I,m as p,s as P,ak as E,al as U}from"./index-DzIkMYN8.js";import{I as j,C as V}from"./InfoTooltip-Dx9ftuZ_.js";import"./info-CfUMOwU-.js";/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=m("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=m("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=m("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=m("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=m("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=m("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=m("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=m("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=m("WalletCards",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2",key:"4125el"}],["path",{d:"M3 11h3c.8 0 1.6.3 2.1.9l1.1.9c1.6 1.6 4.1 1.6 5.7 0l1.1-.9c.5-.5 1.3-.9 2.1-.9H21",key:"1dpki6"}]]),Z=v.memo(({ageRangeMin:a,setAgeRangeMin:t,ageRangeMax:s,setAgeRangeMax:d,inputErrors:n,handleApplyAgeFilter:r,isAgeFilterActive:l,handleRemoveAgeFilter:i,isLoading:o,originalData:c,uploadedFile:x,titheListData:M,processedDataA:f,setHasUnsavedChanges:y})=>{const u=c.length===0&&!!x&&M.length>0;return e.jsxs("div",{className:"bg-[var(--bg-elevated)] p-6 rounded-xl border border-[var(--border-color)] h-full flex flex-col",children:[e.jsx("div",{className:"flex-grow",children:e.jsxs("div",{"aria-labelledby":"age-filter-heading",children:[e.jsxs("h3",{id:"age-filter-heading",className:"text-lg font-semibold flex items-center mb-4",children:[e.jsx(D,{size:20,className:"mr-3 text-[var(--primary-accent-end)]"}),"Age Filter (Optional)"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-4 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"ageMin",className:"form-label",children:"Min Age (Years)"}),e.jsx("input",{type:"number",id:"ageMin",value:a,onChange:b=>{t(b.target.value),y(!0)},placeholder:"e.g., 18",className:`form-input-light ${n.age?"input-error":""}`,disabled:u,"aria-invalid":!!n.age,"aria-describedby":n.age?"ageError":void 0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"ageMax",className:"form-label",children:"Max Age (Years)"}),e.jsx("input",{type:"number",id:"ageMax",value:s,onChange:b=>{d(b.target.value),y(!0)},placeholder:"e.g., 65",className:`form-input-light ${n.age?"input-error":""}`,disabled:u,"aria-invalid":!!n.age,"aria-describedby":n.age?"ageError":void 0})]})]}),n.age&&e.jsx("p",{id:"ageError",className:"form-error-text mt-2 col-span-2",children:n.age}),u&&e.jsx("p",{className:"text-xs text-[var(--text-muted)] mt-2",children:"Age filter requires original member data. Re-upload Excel or load a favorite with member data to enable."}),l&&f.length>0&&e.jsxs("p",{className:"mt-4 text-sm text-[var(--primary-accent-start)]",children:["Filtered: ",f.length," records match age criteria."]}),l&&f.length===0&&c.length>0&&e.jsx("p",{className:"mt-4 text-sm text-[var(--warning-text)]",children:"No records match the current age filter."})]})}),e.jsxs("div",{className:"mt-6 flex flex-wrap gap-3",children:[e.jsx(h,{onClick:r,disabled:!a&&!s||o||u,leftIcon:e.jsx(A,{size:18}),variant:"secondary",children:"Apply Age Filter"}),l&&e.jsx(h,{onClick:i,variant:"outline",leftIcon:e.jsx(z,{size:18}),disabled:o||u,children:"Remove Filter"})]})]})});var N="Toggle",C=g.forwardRef((a,t)=>{const{pressed:s,defaultPressed:d,onPressedChange:n,...r}=a,[l,i]=S({prop:s,onChange:n,defaultProp:d??!1,caller:N});return e.jsx(L.button,{type:"button","aria-pressed":l,"data-state":l?"on":"off","data-disabled":a.disabled?"":void 0,...r,ref:t,onClick:R(a.onClick,()=>{a.disabled||i(!l)})})});C.displayName=N;var w=C;const X=O("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}}),k=g.forwardRef(({className:a,variant:t,size:s,...d},n)=>e.jsx(w,{ref:n,className:T(X({variant:t,size:s,className:a})),...d}));k.displayName=w.displayName;const J=v.memo(({concatenationConfig:a,handleConcatenationConfigChange:t})=>e.jsx("div",{className:"bg-[var(--bg-elevated)] p-6 rounded-xl border border-[var(--border-color)] h-full",children:e.jsxs("div",{"aria-labelledby":"concat-config-heading",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{id:"concat-config-heading",className:"text-lg font-semibold flex items-center",children:[e.jsx($,{size:20,className:"mr-3 text-[var(--primary-accent-end)]"}),"Membership Name Concatenation"]}),e.jsx(j,{text:e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-semibold mb-1 text-[var(--text-primary)]",children:'Select fields to build the "Membership Number" column.'}),e.jsx("p",{className:"text-xs",children:"This combined string identifies members. Numbers appear as (Main|Old) or (Number)."})]})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:Object.keys(F).map(s=>e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(k,{pressed:a[s],onPressedChange:()=>t(s),"aria-label":`Toggle ${s}`,children:s})},s))}),e.jsx("p",{className:"mt-3 text-xs text-[var(--text-muted)]",children:"Your default settings are saved locally in your browser."})]})]})})),Q=v.memo(({selectedDate:a,descriptionText:t,onDateChange:s,onDescriptionChange:d})=>{const n=v.useMemo(()=>a.toISOString().split("T")[0],[a]),r=i=>{try{const o=new Date(i.target.value),c=new Date(o.getTime()+o.getTimezoneOffset()*6e4);s(c)}catch(o){console.error("Invalid date input:",o)}},l=i=>{const o=new Date,c=o.getDay();let x=new Date(o);i==="last"?x.setDate(o.getDate()-c):x.setDate(o.getDate()+(7-c)),s(x)};return e.jsx("div",{className:"bg-[var(--bg-elevated)] p-6 rounded-xl border border-[var(--border-color)] h-full",children:e.jsxs("div",{"aria-labelledby":"tithe-details-heading",children:[e.jsxs("h3",{id:"tithe-details-heading",className:"text-lg font-semibold flex items-center mb-4",children:[e.jsx(Y,{size:20,className:"mr-3 text-[var(--primary-accent-end)]"}),"Tithe List Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"selectedDate",className:"form-label",children:"Transaction Date for List"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"date",id:"selectedDate",value:n,onChange:r,className:"form-input-light flex-grow"}),e.jsx(h,{onClick:()=>l("last"),size:"icon",variant:"subtle",title:"Last Sunday",children:e.jsx(H,{size:16})}),e.jsx(h,{onClick:()=>l("next"),size:"icon",variant:"subtle",title:"Next Sunday",children:e.jsx(G,{size:16})})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"descriptionText",className:"form-label",children:"Narration/Description Template"}),e.jsx("input",{type:"text",id:"descriptionText",value:t,onChange:i=>d(i.target.value),className:"form-input-light",placeholder:"e.g., Tithe"}),e.jsx(j,{text:"Use {DD-MMM-YYYY} as a placeholder for the selected transaction date. The date will be automatically substituted.",className:"mt-2"})]})]})]})})}),ee=v.memo(({originalData:a,amountMappingColumn:t,setAmountMappingColumn:s,setHasUnsavedChanges:d})=>{const n=g.useMemo(()=>{if(a.length>0){const i=new Set;return a.slice(0,10).forEach(o=>{Object.keys(o).forEach(c=>i.add(c))}),Array.from(i).sort()}return[]},[a]),r=n.length===0,l=i=>{s(i.target.value==="none"?null:i.target.value),d(!0)};return e.jsx("div",{className:"bg-[var(--bg-elevated)] p-6 rounded-xl border border-[var(--border-color)] h-full",children:e.jsxs("div",{"aria-labelledby":"amount-map-heading",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{id:"amount-map-heading",className:"text-lg font-semibold flex items-center",children:[e.jsx(K,{size:20,className:"mr-3 text-[var(--primary-accent-end)]"}),"Amount Mapping (Optional)"]}),e.jsx(j,{text:"Automatically populate 'Transaction Amount' from a column in your uploaded Excel file when you generate the list."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"amount-column-select",className:"form-label",children:"Map Amount from Excel Column"}),e.jsxs("select",{id:"amount-column-select",value:t||"none",onChange:l,disabled:r,className:"form-input-light w-full","aria-label":"Select column to map transaction amount from",children:[e.jsx("option",{value:"none",children:"Do not map amount"}),n.map(i=>e.jsx("option",{value:i,children:i},i))]}),r&&e.jsx("p",{className:"text-xs text-[var(--text-muted)] mt-2",children:"Upload a file to see available columns for mapping."})]})]})})}),ae=({handleGenerateReport:a,isGenerating:t,hasData:s})=>e.jsxs("div",{className:"bg-[var(--bg-elevated)] p-6 rounded-xl border border-[var(--border-color)] h-full flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"section-heading !border-b-0 !pb-0 !mb-0",children:[e.jsx(I,{size:20,className:"mr-3 icon-primary"}),"AI Data Validation"]}),e.jsx("p",{className:"text-sm text-[var(--text-secondary)] mt-2",children:"Generate an AI-powered report to identify potential data quality issues in your uploaded list."})]}),e.jsx(h,{onClick:a,disabled:t||!s,isLoading:t,variant:"secondary",className:"mt-4",children:t?"Generating Report...":"Generate Validation Report"})]}),te=p.div,le=a=>{const[t,s]=g.useState(!0),[d,n]=g.useState(navigator.onLine);return g.useEffect(()=>{const r=()=>n(!0),l=()=>n(!1);return window.addEventListener("online",r),window.addEventListener("offline",l),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",l)}},[]),e.jsx(te,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.4,ease:"easeOut"},children:e.jsxs("section",{className:"content-card","aria-labelledby":"configuration-heading",children:[e.jsxs("div",{className:"flex justify-between items-center cursor-pointer",onClick:()=>s(!t),role:"button",tabIndex:0,onKeyDown:r=>{(r.key==="Enter"||r.key===" ")&&s(!t)},"aria-expanded":t,"aria-controls":"configuration-content",children:[e.jsxs("h2",{id:"configuration-heading",className:"section-heading !border-b-0 !pb-0 !mb-0",children:[e.jsx(W,{size:22,className:"mr-3 icon-primary"}),"Processing Configuration"]}),e.jsx(p.div,{animate:{rotate:t?0:-180},transition:{duration:.3},children:t?e.jsx(q,{size:20,className:"ml-2 text-[var(--text-secondary)]"}):e.jsx(V,{size:20,className:"ml-2 text-[var(--text-secondary)]"})})]}),e.jsx(P,{initial:!1,children:t&&e.jsx(p.div,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto",marginTop:"1rem"},collapsed:{opacity:0,height:0,marginTop:0}},transition:{duration:.4,ease:[.04,.62,.23,.98]},style:{overflow:"hidden"},children:e.jsx("div",{className:"pt-6 border-t border-[var(--border-color)]/50",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 items-start",children:[e.jsx(J,{concatenationConfig:a.concatenationConfig,handleConcatenationConfigChange:a.handleConcatenationConfigChange}),e.jsx(Q,{selectedDate:a.selectedDate,descriptionText:a.descriptionText,onDateChange:a.onDateChange,onDescriptionChange:a.onDescriptionChange}),e.jsx(Z,{ageRangeMin:a.ageRangeMin,setAgeRangeMin:a.setAgeRangeMin,ageRangeMax:a.ageRangeMax,setAgeRangeMax:a.setAgeRangeMax,inputErrors:a.inputErrors,handleApplyAgeFilter:a.handleApplyAgeFilter,isAgeFilterActive:a.isAgeFilterActive,handleRemoveAgeFilter:a.handleRemoveAgeFilter,isLoading:a.isLoading,originalData:a.originalData,uploadedFile:a.uploadedFile,titheListData:a.titheListData,processedDataA:a.processedDataA,setHasUnsavedChanges:a.setHasUnsavedChanges}),e.jsx(ee,{originalData:a.originalData,amountMappingColumn:a.amountMappingColumn,setAmountMappingColumn:a.setAmountMappingColumn,setHasUnsavedChanges:a.setHasUnsavedChanges}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(ae,{handleGenerateReport:a.handleGenerateValidationReport,isGenerating:a.isGeneratingReport,hasData:a.originalData.length>0})}),e.jsxs("div",{className:"lg:col-span-2 pt-6 border-t border-[var(--border-color)]/50",children:[e.jsxs("h3",{className:"subsection-heading flex items-center",children:[e.jsx(_,{size:18,className:"mr-2 icon-primary"}),"Cloud Sync"]}),a.isConfigured?e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-[var(--background-modifier-hover)] border border-[var(--border-color)]",children:[a.isLoggedIn&&a.userProfile?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:a.userProfile.imageUrl,alt:"User",className:"w-10 h-10 rounded-full"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-[var(--text-normal)]",children:a.userProfile.name}),e.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:a.userProfile.email})]})]}):e.jsx("p",{className:"text-[var(--text-muted)]",children:"Sign in to sync your favorites and transaction logs."}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(E,{status:a.syncStatus,isOnline:d}),a.isLoggedIn?e.jsxs(h,{onClick:a.signOut,variant:"secondary",className:"!py-2",children:[e.jsx(B,{size:16,className:"mr-2"}),"Sign Out"]}):e.jsxs(h,{onClick:a.signIn,variant:"primary",className:"!py-2",children:[e.jsx(U,{size:16,className:"mr-2"}),"Sign in with Google"]})]})]}):e.jsx("div",{className:"text-center p-4 bg-[var(--background-modifier-hover)] rounded-lg border border-[var(--border-color)]",children:e.jsxs("p",{className:"text-[var(--text-muted)]",children:["Cloud Sync is not configured. Add your credentials to the ",e.jsx("code",{children:".env.local"})," file."]})})]})]})})},"content")})]})})};export{le as default};
