import{c as P,r as a,j as t,A as S,L as D,g as L,D as z,S as _,P as M,b as E,h as R,M as G,e as I,m as g,a as q}from"./index-CrkeRRwJ.js";/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=P("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=P("CornerDownLeft",[["polyline",{points:"9 10 4 15 9 20",key:"r3jprv"}],["path",{d:"M20 4v7a4 4 0 0 1-4 4H4",key:"6o5b7l"}]]),B=({isOpen:l,onClose:f,setActiveView:o,setTheme:c,onStartNewWeek:p,favorites:d,theme:m})=>{const[n,y]=a.useState(""),[i,u]=a.useState(0),b=a.useRef(null),v=a.useRef(null),w=a.useMemo(()=>new Set(d.map(e=>e.assemblyName)),[d]),x=a.useMemo(()=>[{id:"nav_dashboard",title:"Go to Dashboard",subtitle:"View KPIs and recent activity",icon:t.jsx(D,{size:18}),onPerform:()=>o("dashboard"),keywords:["home","main"]},{id:"nav_processor",title:"Go to Tithe Processor",subtitle:"Process weekly tithe lists",icon:t.jsx(L,{size:18}),onPerform:()=>o("processor"),keywords:["upload","generate","new list"]},{id:"nav_database",title:"Go to Member Database",subtitle:"View and manage master lists",icon:t.jsx(z,{size:18}),onPerform:()=>o("database"),keywords:["members","master"]},{id:"nav_favorites",title:"Go to Favorites",subtitle:"Load saved configurations",icon:t.jsx(_,{size:18}),onPerform:()=>o("favorites"),keywords:["saved","load"]},{id:"nav_reports",title:"Go to Reports",subtitle:"View annual performance",icon:t.jsx(M,{size:18}),onPerform:()=>o("reports"),keywords:["stats","statistics","charts"]},{id:"nav_analytics",title:"Go to AI Analytics",subtitle:"Chat with your data",icon:t.jsx(E,{size:18}),onPerform:()=>o("analytics"),keywords:["ai","chat","gemini"]},...m==="dark"?[{id:"theme_light",title:"Switch to Light Theme",icon:t.jsx(R,{size:18}),onPerform:()=>c("light")}]:[],...m==="light"?[{id:"theme_dark",title:"Switch to Dark Theme",icon:t.jsx(G,{size:18}),onPerform:()=>c("dark")}]:[],...S.filter(e=>w.has(e)).map(e=>({id:`start_week_${e}`,title:`Start New Week: ${e}`,subtitle:"Load latest member list",icon:t.jsx(A,{size:18}),onPerform:()=>p(e),keywords:["start",e]}))],[o,c,p,d,m,w]),r=a.useMemo(()=>{if(!n.trim())return x;const e=n.toLowerCase();return x.filter(s=>{var j,k;return s.title.toLowerCase().includes(e)||((j=s.subtitle)==null?void 0:j.toLowerCase().includes(e))||((k=s.keywords)==null?void 0:k.some(N=>N.toLowerCase().includes(e)))})},[n,x]),h=e=>{e.onPerform(),f()};a.useEffect(()=>{var e;l?(e=b.current)==null||e.focus():y("")},[l]),a.useEffect(()=>{u(0)},[n]);const C=a.useCallback(e=>{e.key==="ArrowDown"?(e.preventDefault(),u(s=>(s+1)%r.length)):e.key==="ArrowUp"?(e.preventDefault(),u(s=>(s-1+r.length)%r.length)):e.key==="Enter"&&(e.preventDefault(),r[i]&&h(r[i]))},[i,r,h]);return a.useEffect(()=>{var s;const e=(s=v.current)==null?void 0:s.querySelector(`[data-index="${i}"]`);e==null||e.scrollIntoView({block:"nearest"})},[i]),t.jsx(I,{children:l&&t.jsx(g.div,{className:"command-palette-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2,ease:"easeOut"},onClick:f,children:t.jsxs(g.div,{className:"command-palette-container",initial:{scale:.95,y:-20},animate:{scale:1,y:0},exit:{scale:.95,y:-20,opacity:0},transition:{duration:.2,ease:"easeOut"},onClick:e=>e.stopPropagation(),onKeyDown:C,children:[t.jsxs("div",{className:"p-3 border-b border-[var(--border-color)] flex items-center gap-3",children:[t.jsx(q,{size:20,className:"text-[var(--text-muted)] flex-shrink-0"}),t.jsx("input",{ref:b,type:"text",value:n,onChange:e=>y(e.target.value),placeholder:"Type a command or search...",className:"w-full bg-transparent focus:outline-none text-[var(--text-primary)] placeholder-[var(--text-placeholder)]"})]}),t.jsx("div",{ref:v,className:"overflow-y-auto p-2 max-h-[50vh]",children:r.length>0?r.map((e,s)=>t.jsxs("button",{"data-index":s,"data-selected":i===s,onClick:()=>h(e),className:"w-full flex items-center justify-between p-3 rounded-lg text-left transition-colors command-palette-item",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"text-[var(--text-secondary)]",children:e.icon}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-[var(--text-primary)]",children:e.title}),e.subtitle&&t.jsx("p",{className:"text-xs text-[var(--text-secondary)]",children:e.subtitle})]})]}),i===s&&t.jsx(K,{size:16,className:"text-[var(--text-muted)]"})]},e.id)):t.jsx("p",{className:"text-center p-8 text-sm text-[var(--text-muted)]",children:"No results found."})})]})})})};export{B as default};
