import{c as k,b7 as w,u as A,r as i,j as e,T as I,B as d,p as N,b as z,d as M,e as R,g as S,h as T,b8 as F,b9 as O}from"./index-D2A2AOn4.js";import{I as $}from"./info-_UVSSaeJ.js";import{R as C}from"./rotate-ccw-DAa-uQVw.js";/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=k("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m=k("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]),E=({memberDatabase:c})=>{const n=w(),[t,h]=i.useState(""),[x,o]=i.useState(!1),[b,l]=i.useState(!1),p=Object.keys(c),a=async()=>{if(t){o(!0);try{const r=await O(t);r.fixedCount>0?n(`Repaired ${r.fixedCount} duplicates for ${t}`,"success"):n(`No duplicates found in ${t}`,"info")}catch(r){console.error(r),n("Failed to repair order","error")}finally{o(!1),l(!1)}}};return e.jsxs("div",{className:"space-y-3",children:[e.jsxs(z,{value:t,onValueChange:r=>{h(r),l(!1)},children:[e.jsx(M,{className:"w-full border-[var(--border-color)] bg-[var(--bg-elevated)]",children:e.jsx(R,{placeholder:"Select assembly to repair..."})}),e.jsx(S,{className:"bg-[var(--bg-elevated)] border-[var(--border-color)]",children:p.map(r=>e.jsx(T,{value:r,children:r},r))})]}),b?e.jsxs("div",{className:"p-3 rounded-lg border border-blue-500/30 bg-blue-500/10 space-y-3",children:[e.jsxs("p",{className:"text-sm text-[var(--text-primary)]",children:["This will fix duplicate index numbers for ",e.jsx("strong",{children:t})," by moving conflicting members to the end of the list."]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>l(!1),className:"flex-1",children:"Cancel"}),e.jsx(d,{variant:"primary",size:"sm",isLoading:x,onClick:a,leftIcon:e.jsx(m,{size:14}),className:"flex-1",children:"Confirm Repair"})]})]}):e.jsx(d,{variant:"primary",disabled:!t||x,onClick:()=>l(!0),leftIcon:e.jsx(m,{size:16}),className:"w-full",children:"Repair Order"})]})},J=({memberDatabase:c,onDeleteAssembly:n})=>{const t=w(),{assemblies:h,isCustomAssembly:x,fuzzyMatchThreshold:o,setFuzzyMatchThreshold:b}=A(),l=Object.keys(c),p=s=>{b(s),t(`Fuzzy match threshold set to ${(s*100).toFixed(0)}%`,"info",2e3)},[a,r]=i.useState(""),[g,v]=i.useState(""),[f,j]=i.useState(!1),u=a&&g===a,L=async()=>{var y;if(!u)return;const s=((y=c[a])==null?void 0:y.data)||[];if(s.length===0){t("No members to reset","error");return}j(!0);try{await F(s,a),t(`Order reset for ${a}. ${s.length} members reordered.`,"success"),r(""),v("")}catch{t("Failed to reset order","error")}finally{j(!1)}};return e.jsxs("div",{className:"space-y-8 animate-fadeIn",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-[var(--text-primary)]",children:"Settings"}),e.jsx("p",{className:"text-[var(--text-secondary)] mt-1",children:"Manage application data and preferences."})]}),e.jsxs("div",{className:"content-card",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 pb-2 border-b border-[var(--border-color)]",children:[e.jsx(D,{className:"text-[var(--accent-color)]",size:24}),e.jsx("h3",{className:"text-lg font-semibold text-[var(--text-primary)]",children:"Assembly Configuration"})]}),e.jsx("p",{className:"text-sm text-[var(--text-secondary)] mb-4",children:"Your configured assemblies. Default Jei-Krodua District assemblies are highlighted."}),e.jsxs("div",{className:"flex items-start gap-2 p-3 mb-4 rounded-lg bg-[var(--info-bg)] border border-[var(--info-border)]",children:[e.jsx($,{size:16,className:"text-[var(--info-text)] mt-0.5 flex-shrink-0"}),e.jsxs("p",{className:"text-sm text-[var(--info-text)]",children:["To add a new assembly, go to the ",e.jsx("strong",{children:"Database"})," section and click the ",e.jsx("strong",{children:"+"})," button."]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:h.map(s=>e.jsx("div",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full border ${x(s)?"bg-[var(--bg-elevated)] border-[var(--border-color)] text-[var(--text-primary)]":"bg-[var(--accent-color)]/10 border-[var(--accent-color)]/30 text-[var(--accent-color)]"}`,children:e.jsx("span",{className:"text-sm",children:s})},s))})]}),e.jsxs("div",{className:"content-card",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 pb-2 border-b border-[var(--border-color)]",children:[e.jsx(m,{className:"text-[var(--accent-color)]",size:24}),e.jsx("h3",{className:"text-lg font-semibold text-[var(--text-primary)]",children:"Matching Preferences"})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-[var(--text-primary)] mb-2",children:["Fuzzy Name Matching Threshold: ",(o*100).toFixed(0),"%"]}),e.jsx("p",{className:"text-xs text-[var(--text-secondary)] mb-3",children:"Lower values allow more tolerance for handwriting variations and typos."}),e.jsx("input",{type:"range",min:"0.5",max:"1",step:"0.05",value:o,onChange:s=>p(parseFloat(s.target.value)),className:"w-full h-2 bg-[var(--bg-elevated)] rounded-lg appearance-none cursor-pointer accent-[var(--accent-color)]"}),e.jsxs("div",{className:"flex justify-between text-xs text-[var(--text-muted)] mt-1",children:[e.jsx("span",{children:"More Tolerant (50%)"}),e.jsx("span",{children:"Exact Match (100%)"})]})]})})]}),e.jsxs("div",{className:"content-card",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 pb-2 border-b border-[var(--border-color)]",children:[e.jsx(I,{className:"text-[var(--warning-text)]",size:24}),e.jsx("h3",{className:"text-lg font-semibold text-[var(--text-primary)]",children:"Data Management"})]}),e.jsx("p",{className:"text-sm text-[var(--text-secondary)] mb-6",children:"Manage your stored assembly data. Deleting an assembly is irreversible."}),e.jsx("div",{className:"space-y-4",children:l.length===0?e.jsx("div",{className:"text-center py-8 text-[var(--text-muted)] italic",children:"No assembly data found."}):e.jsx("div",{className:"grid gap-4",children:l.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border border-[var(--border-color)] bg-[var(--bg-elevated)]",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-[var(--text-primary)]",children:s}),e.jsxs("p",{className:"text-xs text-[var(--text-secondary)]",children:[c[s].data.length," members â€¢ Last updated:"," ",new Date(c[s].lastUpdated).toLocaleDateString()]})]}),e.jsx(d,{variant:"danger",size:"sm",onClick:()=>n(s),leftIcon:e.jsx(N,{size:16}),children:"Delete"})]},s))})}),l.length>0&&e.jsx("div",{className:"mt-8 pt-6 border-t border-[var(--border-color)]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-[var(--danger-text)]",children:"Reset Entire Database"}),e.jsx("p",{className:"text-xs text-[var(--text-secondary)] mt-1",children:"This will permanently delete ALL data for ALL assemblies."})]}),e.jsx(d,{variant:"danger",onClick:()=>n("ALL MEMBERS"),leftIcon:e.jsx(N,{size:16}),children:"Reset All Data"})]})}),l.length>0&&e.jsx("div",{className:"mt-8 pt-6 border-t border-[var(--border-color)]",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-4 rounded-lg border border-[var(--border-color)] bg-[var(--bg-secondary)]",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(C,{size:20,className:"text-amber-500"}),e.jsx("h4",{className:"font-medium text-[var(--text-primary)]",children:"Reset Member Order"})]}),e.jsxs("p",{className:"text-sm text-[var(--text-secondary)] mb-4",children:["Reset order to match the master list sequence.",e.jsx("span",{className:"text-amber-500 font-medium",children:" Destructive."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(z,{value:a,onValueChange:s=>{r(s),v("")},children:[e.jsx(M,{className:"w-full border-[var(--border-color)] bg-[var(--bg-elevated)]",children:e.jsx(R,{placeholder:"Select assembly..."})}),e.jsx(S,{className:"bg-[var(--bg-elevated)] border-[var(--border-color)]",children:l.map(s=>e.jsx(T,{value:s,children:s},s))})]}),a&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-xs text-amber-500",children:["Type ",e.jsxs("strong",{children:['"',a,'"']})," to confirm:"]}),e.jsx("input",{type:"text",placeholder:`Type ${a} to confirm`,value:g,onChange:s=>v(s.target.value),className:"w-full px-3 py-2 bg-[var(--bg-elevated)] border border-[var(--border-color)] rounded-lg text-[var(--text-primary)]"}),e.jsx(d,{variant:"danger",disabled:!u||f,isLoading:f,onClick:L,leftIcon:e.jsx(C,{size:16}),className:"w-full",children:"Reset Order"})]})]})]}),e.jsxs("div",{className:"p-4 rounded-lg border border-[var(--border-color)] bg-[var(--bg-secondary)]",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(m,{size:20,className:"text-blue-500"}),e.jsx("h4",{className:"font-medium text-[var(--text-primary)]",children:"Repair Order Duplicates"})]}),e.jsxs("p",{className:"text-sm text-[var(--text-secondary)] mb-4",children:["Fix duplicate index numbers.",e.jsx("span",{className:"text-blue-500 font-medium",children:" Safe to run."})]}),e.jsx(E,{memberDatabase:c})]})]})})]})]})};export{J as default};
