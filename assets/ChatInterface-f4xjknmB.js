import{c as d,j as e,m as h,r as c,X as N,A as w,U as k,B as z}from"./index-D2A2AOn4.js";/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=d("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=d("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=d("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x=d("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),B=({data:r})=>{if(!r||r.length===0)return null;const s=Math.max(...r.map(a=>a.count));return e.jsx("div",{className:"w-full h-full flex items-end gap-2 pt-4",children:r.map((a,l)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1 group",children:[e.jsx("div",{className:"relative w-full flex justify-center items-end h-[120px]",children:e.jsx(h.div,{initial:{height:0},animate:{height:s>0?`${a.count/s*100}%`:"0%"},transition:{duration:.5,delay:l*.1},className:"w-full max-w-[20px] bg-blue-500 rounded-t-sm opacity-80 group-hover:opacity-100 transition-opacity",children:e.jsx("div",{className:"absolute -top-8 left-1/2 -translate-x-1/2 bg-gray-800 text-white text-[10px] px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none z-10",children:a.count})})}),e.jsx("span",{className:"text-[10px] text-[var(--text-secondary)] truncate w-full text-center",title:a.label,children:a.label})]},l))})},S=({chatHistory:r,chartData:s,isLoading:a,error:l,onSendMessage:u,isOpen:i,onToggle:f})=>{const[n,m]=c.useState(""),p=c.useRef(null),g=()=>{var t;(t=p.current)==null||t.scrollIntoView({behavior:"smooth"})};c.useEffect(()=>{g()},[r,a]);const b=()=>{n.trim()&&(u(n),m(""))},y=t=>{t.key==="Enter"&&!t.shiftKey&&(t.preventDefault(),b())},j=["Who is the top tither in 2024?","Get tithe stats for January 2024","Show me a chart of top 5 tithers","Search for member 'John'"];return e.jsxs(e.Fragment,{children:[e.jsx(h.button,{className:`fixed bottom-6 right-6 z-40 p-4 rounded-full shadow-2xl transition-all duration-300 ${i?"bg-red-500 text-white rotate-90":"bg-gradient-to-r from-blue-600 to-indigo-600 text-white hover:scale-110"}`,onClick:f,whileHover:{scale:1.1},whileTap:{scale:.9},children:i?e.jsx(N,{size:24}):e.jsx(x,{size:24})}),e.jsx(w,{children:i&&e.jsxs(h.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:50,scale:.9},className:"fixed bottom-24 right-6 w-96 h-[600px] max-h-[80vh] bg-[var(--bg-card)] border border-[var(--border-color)] rounded-2xl shadow-2xl z-40 flex flex-col overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-[var(--border-color)] bg-[var(--bg-elevated)] flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(x,{size:18,className:"text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-[var(--text-primary)]",children:"The Oracle"}),e.jsx("p",{className:"text-xs text-[var(--text-secondary)]",children:"AI Data Assistant"})]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-[var(--bg-main)]/50",children:[r.length===0&&e.jsxs("div",{className:"text-center mt-10 space-y-4",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-50 dark:bg-blue-900/20 rounded-full flex items-center justify-center mx-auto",children:e.jsx(x,{size:32,className:"text-blue-500"})}),e.jsx("p",{className:"text-[var(--text-secondary)] text-sm px-6",children:"I can analyze your data, find trends, and answer questions. Try asking:"}),e.jsx("div",{className:"flex flex-wrap gap-2 justify-center px-4",children:j.map((t,o)=>e.jsx("button",{onClick:()=>u(t),className:"text-xs bg-[var(--bg-elevated)] hover:bg-blue-50 dark:hover:bg-blue-900/20 border border-[var(--border-color)] px-3 py-1.5 rounded-full transition-colors text-[var(--text-primary)]",children:t},o))})]}),r.map((t,o)=>e.jsxs("div",{className:`flex gap-3 ${t.role==="user"?"flex-row-reverse":"flex-row"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${t.role==="user"?"bg-blue-600 text-white":"bg-indigo-600 text-white"}`,children:t.role==="user"?e.jsx(k,{size:14}):e.jsx(v,{size:14})}),e.jsx("div",{className:`max-w-[80%] p-3 rounded-2xl text-sm ${t.role==="user"?"bg-blue-600 text-white rounded-tr-none":"bg-[var(--bg-elevated)] text-[var(--text-primary)] border border-[var(--border-color)] rounded-tl-none"}`,children:e.jsx("p",{className:"whitespace-pre-wrap leading-relaxed",children:t.parts[0].text})})]},o)),s.length>0&&e.jsxs("div",{className:"ml-11 max-w-[85%] bg-[var(--bg-elevated)] p-4 rounded-xl border border-[var(--border-color)]",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 text-[var(--text-secondary)]",children:[e.jsx(M,{size:14}),e.jsx("span",{className:"text-xs font-medium",children:"Visual Insight"})]}),e.jsx("div",{className:"h-40",children:e.jsx(B,{data:s})})]}),a&&e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-600 text-white flex items-center justify-center flex-shrink-0",children:e.jsx(v,{size:14})}),e.jsxs("div",{className:"bg-[var(--bg-elevated)] border border-[var(--border-color)] p-3 rounded-2xl rounded-tl-none flex gap-2 items-center",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),e.jsx("span",{className:"text-xs text-[var(--text-secondary)] animate-pulse",children:"Thinking..."})]})]}),l&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-600 dark:text-red-400 text-sm text-center",children:l}),e.jsx("div",{ref:p})]}),e.jsx("div",{className:"p-4 bg-[var(--bg-elevated)] border-t border-[var(--border-color)]",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:n,onChange:t=>m(t.target.value),onKeyDown:y,placeholder:"Ask about your data...",className:"flex-1 bg-[var(--input-bg)] border border-[var(--border-color)] rounded-xl px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 text-[var(--text-primary)] placeholder-[var(--text-placeholder)]",disabled:a}),e.jsx(z,{onClick:b,disabled:!n.trim()||a,size:"icon",className:"rounded-xl w-10 h-10 flex-shrink-0",children:e.jsx(C,{size:18})})]})})]})})]})};export{B,S as C,x as S,M as a};
