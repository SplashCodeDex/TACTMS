import{c as u,u as $,r as o,z as _,j as e,B as v,D as G,F as J,k as K}from"./index-T7Xcd3Uj.js";/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=u("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=u("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=u("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=u("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Y=()=>{const{memberDatabase:d={},onUploadMasterList:O,onCreateTitheList:z,onEditMember:A,addToast:P}=$(),[n,L]=o.useState(Object.keys(d)[0]||null),[m,F]=o.useState(""),[i,b]=o.useState([]),[s,y]=o.useState({key:"customOrder",direction:"asc"}),[x,U]=o.useState(1),[h]=o.useState(10),[g,D]=o.useState(""),[p,R]=o.useState(""),T=(t,r)=>{var c;const a=(c=t.target.files)==null?void 0:c[0];a&&O(a,!0,r)},l=o.useMemo(()=>{var r;if(!n)return[];let t=((r=d[n])==null?void 0:r.data)||[];return m&&(t=t.filter(a=>Object.values(a).some(c=>String(c).toLowerCase().includes(m.toLowerCase())))),(g||p)&&(t=_(t,Number(g)||void 0,Number(p)||void 0)),s.key&&t.sort((a,c)=>{if(s.key==="customOrder")return(a.customOrder||0)-(c.customOrder||0);const C=String(a[s.key]).toLowerCase(),S=String(c[s.key]).toLowerCase();return C<S?s.direction==="asc"?-1:1:C>S?s.direction==="asc"?1:-1:0}),t},[d,n,m,s,g,p]),f=t=>{let r="asc";s.key===t&&s.direction==="asc"&&(r="desc"),y({key:t,direction:r})},q=()=>{s.key==="customOrder"?y({key:"First Name",direction:"asc"}):y({key:"customOrder",direction:"asc"})},w=x*h,B=w-h,E=l.slice(B,w),j=t=>U(t),M=Math.ceil(l.length/h),V=t=>{b(r=>r.some(a=>a["No."]===t["No."])?r.filter(a=>a["No."]!==t["No."]):[...r,t])},H=()=>{i.length===l.length?b([]):b(l)},I=()=>{if(i.length===0){P("Please select at least one member to create a list.","warning");return}if(n){const t=[...i].sort((r,a)=>(r.customOrder||0)-(a.customOrder||0));z(t,n)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Member Database"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(v,{variant:"primary",onClick:I,disabled:i.length===0,leftIcon:e.jsx(G,{size:16}),children:["Create Tithe List (",i.length,")"]})})]}),e.jsx("div",{className:"flex border-b border-[var(--border-color)]",children:Object.keys(d).map(t=>e.jsx("button",{onClick:()=>L(t),className:`px-4 py-2 text-sm font-medium transition-colors duration-200 ${n===t?"border-b-2 border-[var(--primary-accent-start)] text-[var(--primary-accent-start)]":"text-[var(--text-secondary)] hover:text-[var(--text-primary)]"}`,children:t},t))}),n&&d[n]?e.jsxs("div",{className:"content-card",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 p-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:n}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[d[n].data.length," members"]})]}),e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-[var(--bg-secondary)] p-1 rounded-md border border-[var(--border-color)]",children:[e.jsx(J,{size:16,className:"text-gray-400 ml-2"}),e.jsx("input",{type:"number",placeholder:"Min Age",value:g,onChange:t=>D(t.target.value),className:"bg-transparent border-none text-sm w-20 focus:ring-0 p-1"}),e.jsx("span",{className:"text-gray-400",children:"-"}),e.jsx("input",{type:"number",placeholder:"Max Age",value:p,onChange:t=>R(t.target.value),className:"bg-transparent border-none text-sm w-20 focus:ring-0 p-1"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(K,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search members...",value:m,onChange:t=>F(t.target.value),className:"form-input-light w-full sm:w-64 pl-10"})]}),e.jsx(v,{onClick:q,variant:"outline",children:s.key==="customOrder"?"Sort Alphabetically":"Sort by Custom Order"}),e.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md cursor-pointer hover:bg-blue-700",children:[e.jsx(W,{size:16}),e.jsx("span",{children:"Upload Master List"}),e.jsx("input",{type:"file",className:"hidden",accept:".xlsx, .xls",onChange:t=>T(t,n)})]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"modern-table min-w-full divide-y divide-[var(--border-color)]",children:[e.jsx("thead",{className:"bg-[var(--bg-elevated)]",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"p-4",children:e.jsx("input",{type:"checkbox",className:"form-checkbox",checked:i.length===l.length&&l.length>0,onChange:H})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700 dark:hover:text-gray-200 transition-colors",onClick:()=>f("First Name"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Name",s.key==="First Name"&&(s.direction==="asc"?e.jsx(k,{size:14}):e.jsx(N,{size:14}))]})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700 dark:hover:text-gray-200 transition-colors",onClick:()=>f("Membership Number"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Membership No.",s.key==="Membership Number"&&(s.direction==="asc"?e.jsx(k,{size:14}):e.jsx(N,{size:14}))]})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700 dark:hover:text-gray-200 transition-colors",onClick:()=>f("Phone Number"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Phone Number",s.key==="Phone Number"&&(s.direction==="asc"?e.jsx(k,{size:14}):e.jsx(N,{size:14}))]})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-[var(--border-color)]",children:E.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"p-4",children:e.jsx("input",{type:"checkbox",className:"form-checkbox",checked:i.some(r=>r["No."]===t["No."]),onChange:()=>V(t)})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:[t["First Name"]," ",t.Surname]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:t["Membership Number"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:t["Phone Number"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx(v,{variant:"ghost",size:"sm",onClick:()=>A(t,n),children:e.jsx(Q,{size:16})})})]},t["No."]))})]})}),l.length>h&&e.jsx("div",{className:"flex justify-center mt-4",children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[e.jsx("button",{onClick:()=>j(x-1),disabled:x===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),Array.from({length:M},(t,r)=>e.jsx("button",{onClick:()=>j(r+1),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${x===r+1?"z-10 bg-blue-50 border-blue-500 text-blue-600 dark:bg-blue-900 dark:border-blue-400 dark:text-blue-300":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700"}`,children:r+1},r+1)),e.jsx("button",{onClick:()=>j(x+1),disabled:x===M,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})})]}):e.jsxs("div",{className:"text-center py-12 content-card",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No member databases found."}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Upload a master list for an assembly to get started."})]})]})};export{Y as default};
