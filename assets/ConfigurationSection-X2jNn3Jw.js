import{c as m,R as h,j as e,a3 as C,B as u,U as M,X as k,C as D,a4 as w,r as j,m as p,e as A}from"./index-TUc41L_N.js";import{I as f}from"./InfoTooltip-DZlsYFP2.js";/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=m("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=m("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=m("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=m("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=m("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=m("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=m("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=m("WalletCards",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2",key:"4125el"}],["path",{d:"M3 11h3c.8 0 1.6.3 2.1.9l1.1.9c1.6 1.6 4.1 1.6 5.7 0l1.1-.9c.5-.5 1.3-.9 2.1-.9H21",key:"1dpki6"}]]),U=h.memo(({ageRangeMin:a,setAgeRangeMin:t,ageRangeMax:n,setAgeRangeMax:r,inputErrors:i,handleApplyAgeFilter:c,isAgeFilterActive:d,handleRemoveAgeFilter:s,isLoading:l,originalData:o,uploadedFile:x,titheListData:N,processedDataA:b,setHasUnsavedChanges:y})=>{const g=o.length===0&&!!x&&N.length>0;return e.jsxs("div",{className:"bg-[var(--bg-elevated)] p-6 rounded-xl border border-[var(--border-color)] h-full flex flex-col",children:[e.jsx("div",{className:"flex-grow",children:e.jsxs("div",{"aria-labelledby":"age-filter-heading",children:[e.jsxs("h3",{id:"age-filter-heading",className:"text-lg font-semibold flex items-center mb-4",children:[e.jsx(C,{size:20,className:"mr-3 text-[var(--primary-accent-end)]"}),"Age Filter (Optional)"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-4 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"ageMin",className:"form-label",children:"Min Age (Years)"}),e.jsx("input",{type:"number",id:"ageMin",value:a,onChange:v=>{t(v.target.value),y(!0)},placeholder:"e.g., 18",className:`form-input-light ${i.age?"input-error":""}`,disabled:g,"aria-invalid":!!i.age,"aria-describedby":i.age?"ageError":void 0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"ageMax",className:"form-label",children:"Max Age (Years)"}),e.jsx("input",{type:"number",id:"ageMax",value:n,onChange:v=>{r(v.target.value),y(!0)},placeholder:"e.g., 65",className:`form-input-light ${i.age?"input-error":""}`,disabled:g,"aria-invalid":!!i.age,"aria-describedby":i.age?"ageError":void 0})]})]}),i.age&&e.jsx("p",{id:"ageError",className:"form-error-text mt-2 col-span-2",children:i.age}),g&&e.jsx("p",{className:"text-xs text-[var(--text-muted)] mt-2",children:"Age filter requires original member data. Re-upload Excel or load a favorite with member data to enable."}),d&&b.length>0&&e.jsxs("p",{className:"mt-4 text-sm text-[var(--primary-accent-start)]",children:["Filtered: ",b.length," records match age criteria."]}),d&&b.length===0&&o.length>0&&e.jsx("p",{className:"mt-4 text-sm text-[var(--warning-text)]",children:"No records match the current age filter."})]})}),e.jsxs("div",{className:"mt-6 flex flex-wrap gap-3",children:[e.jsx(u,{onClick:c,disabled:!a&&!n||l||g,leftIcon:e.jsx(M,{size:18}),variant:"secondary",children:"Apply Age Filter"}),d&&e.jsx(u,{onClick:s,variant:"outline",leftIcon:e.jsx(k,{size:18}),disabled:l||g,children:"Remove Filter"})]})]})}),E=({label:a,checked:t,onChange:n,id:r,size:i="md"})=>{const c={sm:"px-3.5 py-1.5 text-xs",md:"px-4 py-2 text-sm"};return e.jsx("button",{id:r,type:"button",role:"checkbox","aria-checked":t,onClick:()=>n(!t),className:`${c[i]} border rounded-lg font-medium transition-all duration-200 ease-in-out focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-[var(--bg-card)] focus-visible:ring-[var(--primary-accent-start)]
        ${t?"bg-gradient-to-r from-[var(--primary-accent-start)] to-[var(--primary-accent-end)] text-[var(--text-on-accent)] border-transparent shadow-md hover:opacity-95":"bg-[var(--input-bg)] text-[var(--text-secondary)] border-[var(--border-color)] hover:bg-[var(--bg-card-subtle-accent)] hover:border-[var(--border-color-light)] hover:text-[var(--text-primary)]"}`,children:e.jsxs("div",{className:"flex items-center justify-center",children:[t&&e.jsx(D,{size:i==="sm"?14:16,className:"mr-1.5 text-white/90"}),!t&&e.jsx("span",{className:`mr-2 ${i==="sm"?"h-3 w-3":"h-3.5 w-3.5"} rounded-full border-2 border-[var(--text-muted)] inline-block bg-transparent`}),a]})})},Y=h.memo(E),$=h.memo(({concatenationConfig:a,handleConcatenationConfigChange:t})=>e.jsx("div",{className:"bg-[var(--bg-elevated)] p-6 rounded-xl border border-[var(--border-color)] h-full",children:e.jsxs("div",{"aria-labelledby":"concat-config-heading",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{id:"concat-config-heading",className:"text-lg font-semibold flex items-center",children:[e.jsx(L,{size:20,className:"mr-3 text-[var(--primary-accent-end)]"}),"Membership Name Concatenation"]}),e.jsx(f,{text:e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-semibold mb-1 text-[var(--text-primary)]",children:'Select fields to build the "Membership Number" column.'}),e.jsx("p",{className:"text-xs",children:"This combined string identifies members. Numbers appear as (Main|Old) or (Number)."})]})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:Object.keys(w).map(n=>e.jsx(Y,{id:`concat-${n.replace(/\s/g,"-")}`,label:n,checked:a[n],onChange:()=>t(n)},n))}),e.jsx("p",{className:"mt-3 text-xs text-[var(--text-muted)]",children:"Your default settings are saved locally in your browser."})]})]})})),G=h.memo(({selectedDate:a,descriptionText:t,onDateChange:n,onDescriptionChange:r})=>{const i=h.useMemo(()=>a.toISOString().split("T")[0],[a]),c=s=>{try{const l=new Date(s.target.value),o=new Date(l.getTime()+l.getTimezoneOffset()*6e4);n(o)}catch(l){console.error("Invalid date input:",l)}},d=s=>{const l=new Date,o=l.getDay();let x=new Date(l);s==="last"?x.setDate(l.getDate()-o):x.setDate(l.getDate()+(7-o)),n(x)};return e.jsx("div",{className:"bg-[var(--bg-elevated)] p-6 rounded-xl border border-[var(--border-color)] h-full",children:e.jsxs("div",{"aria-labelledby":"tithe-details-heading",children:[e.jsxs("h3",{id:"tithe-details-heading",className:"text-lg font-semibold flex items-center mb-4",children:[e.jsx(F,{size:20,className:"mr-3 text-[var(--primary-accent-end)]"}),"Tithe List Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"selectedDate",className:"form-label",children:"Transaction Date for List"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"date",id:"selectedDate",value:i,onChange:c,className:"form-input-light flex-grow"}),e.jsx(u,{onClick:()=>d("last"),size:"icon",variant:"subtle",title:"Last Sunday",children:e.jsx(R,{size:16})}),e.jsx(u,{onClick:()=>d("next"),size:"icon",variant:"subtle",title:"Next Sunday",children:e.jsx(z,{size:16})})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"descriptionText",className:"form-label",children:"Narration/Description Template"}),e.jsx("input",{type:"text",id:"descriptionText",value:t,onChange:s=>r(s.target.value),className:"form-input-light",placeholder:"e.g., Tithe"}),e.jsx(f,{text:"Use {DD-MMM-YYYY} as a placeholder for the selected transaction date. The date will be automatically substituted.",className:"mt-2"})]})]})]})})}),V=h.memo(({originalData:a,amountMappingColumn:t,setAmountMappingColumn:n,setHasUnsavedChanges:r})=>{const i=j.useMemo(()=>{if(a.length>0){const s=new Set;return a.slice(0,10).forEach(l=>{Object.keys(l).forEach(o=>s.add(o))}),Array.from(s).sort()}return[]},[a]),c=i.length===0,d=s=>{n(s.target.value==="none"?null:s.target.value),r(!0)};return e.jsx("div",{className:"bg-[var(--bg-elevated)] p-6 rounded-xl border border-[var(--border-color)] h-full",children:e.jsxs("div",{"aria-labelledby":"amount-map-heading",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{id:"amount-map-heading",className:"text-lg font-semibold flex items-center",children:[e.jsx(O,{size:20,className:"mr-3 text-[var(--primary-accent-end)]"}),"Amount Mapping (Optional)"]}),e.jsx(f,{text:"Automatically populate 'Transaction Amount' from a column in your uploaded Excel file when you generate the list."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"amount-column-select",className:"form-label",children:"Map Amount from Excel Column"}),e.jsxs("select",{id:"amount-column-select",value:t||"none",onChange:d,disabled:c,className:"form-input-light w-full","aria-label":"Select column to map transaction amount from",children:[e.jsx("option",{value:"none",children:"Do not map amount"}),i.map(s=>e.jsx("option",{value:s,children:s},s))]}),c&&e.jsx("p",{className:"text-xs text-[var(--text-muted)] mt-2",children:"Upload a file to see available columns for mapping."})]})]})})}),q=({handleGenerateReport:a,isGenerating:t,hasData:n})=>e.jsxs("div",{children:[e.jsx("h3",{children:"AI Validation Report"}),e.jsx("button",{onClick:a,disabled:t||!n,children:t?"Generating...":"Generate Report"})]}),H=p.div,K=a=>{const[t,n]=j.useState(!0);return e.jsx(H,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.4,ease:"easeOut"},children:e.jsxs("section",{className:"content-card","aria-labelledby":"configuration-heading",children:[e.jsxs("div",{className:"flex justify-between items-center cursor-pointer",onClick:()=>n(!t),role:"button",tabIndex:0,onKeyDown:r=>{(r.key==="Enter"||r.key===" ")&&n(!t)},"aria-expanded":t,"aria-controls":"configuration-content",children:[e.jsxs("h2",{id:"configuration-heading",className:"section-heading !border-b-0 !pb-0 !mb-0",children:[e.jsx(I,{size:22,className:"mr-3 icon-primary"}),"Processing Configuration"]}),e.jsx(p.div,{animate:{rotate:t?0:-180},transition:{duration:.3},children:t?e.jsx(S,{size:20,className:"ml-2 text-[var(--text-secondary)]"}):e.jsx(T,{size:20,className:"ml-2 text-[var(--text-secondary)]"})})]}),e.jsx(A,{initial:!1,children:t&&e.jsx(p.div,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto",marginTop:"1rem"},collapsed:{opacity:0,height:0,marginTop:0}},transition:{duration:.4,ease:[.04,.62,.23,.98]},style:{overflow:"hidden"},children:e.jsx("div",{className:"pt-6 border-t border-[var(--border-color)]/50",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 items-start",children:[e.jsx($,{concatenationConfig:a.concatenationConfig,handleConcatenationConfigChange:a.handleConcatenationConfigChange}),e.jsx(G,{selectedDate:a.selectedDate,descriptionText:a.descriptionText,onDateChange:a.onDateChange,onDescriptionChange:a.onDescriptionChange}),e.jsx(U,{ageRangeMin:a.ageRangeMin,setAgeRangeMin:a.setAgeRangeMin,ageRangeMax:a.ageRangeMax,setAgeRangeMax:a.setAgeRangeMax,inputErrors:a.inputErrors,handleApplyAgeFilter:a.handleApplyAgeFilter,isAgeFilterActive:a.isAgeFilterActive,handleRemoveAgeFilter:a.handleRemoveAgeFilter,isLoading:a.isLoading,originalData:a.originalData,uploadedFile:a.uploadedFile,titheListData:a.titheListData,processedDataA:a.processedDataA,setHasUnsavedChanges:a.setHasUnsavedChanges}),e.jsx(V,{originalData:a.originalData,amountMappingColumn:a.amountMappingColumn,setAmountMappingColumn:a.setAmountMappingColumn,setHasUnsavedChanges:a.setHasUnsavedChanges}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(q,{handleGenerateReport:a.handleGenerateValidationReport,isGenerating:a.isGeneratingReport,hasData:a.originalData.length>0})})]})})},"content")})]})})};export{K as default};
