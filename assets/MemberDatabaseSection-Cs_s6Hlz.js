import{c as m,u as w,r as x,j as e,B as h,h as C,a as M}from"./index-Cg0wcI6I.js";/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=m("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=m("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),P=()=>{const{memberDatabase:c={},onUploadMasterList:p,onCreateTitheList:g,onEditMember:y,addToast:u}=w(),[s,j]=x.useState(Object.keys(c)[0]||null),[n,b]=x.useState(""),[l,o]=x.useState([]),f=(t,a)=>{var d;const r=(d=t.target.files)==null?void 0:d[0];r&&p(r,!0,a)},i=x.useMemo(()=>{var a;if(!s)return[];const t=((a=c[s])==null?void 0:a.data)||[];return n?t.filter(r=>Object.values(r).some(d=>String(d).toLowerCase().includes(n.toLowerCase()))):t},[c,s,n]),N=t=>{o(a=>a.some(r=>r["No."]===t["No."])?a.filter(r=>r["No."]!==t["No."]):[...a,t])},k=()=>{l.length===i.length?o([]):o(i)},v=()=>{if(l.length===0){u("Please select at least one member to create a list.","warning");return}s&&g(l,s)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Member Database"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(h,{variant:"primary",onClick:v,disabled:l.length===0,leftIcon:e.jsx(C,{size:16}),children:["Create Tithe List (",l.length,")"]})})]}),e.jsx("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:Object.keys(c).map(t=>e.jsx("button",{onClick:()=>j(t),className:`px-4 py-2 text-sm font-medium ${s===t?"border-b-2 border-blue-500 text-blue-500":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}`,children:t},t))}),s&&c[s]?e.jsxs("div",{className:"content-card",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 p-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:s}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[c[s].data.length," members"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(M,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search members...",value:n,onChange:t=>b(t.target.value),className:"form-input-light w-full sm:w-64 pl-10"})]}),e.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md cursor-pointer hover:bg-blue-700",children:[e.jsx(L,{size:16}),e.jsx("span",{children:"Upload Master List"}),e.jsx("input",{type:"file",className:"hidden",accept:".xlsx, .xls",onChange:t=>f(t,s)})]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"p-4",children:e.jsx("input",{type:"checkbox",className:"form-checkbox",checked:l.length===i.length&&i.length>0,onChange:k})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Membership No."}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone Number"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200 dark:bg-gray-900 dark:divide-gray-700",children:i.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"p-4",children:e.jsx("input",{type:"checkbox",className:"form-checkbox",checked:l.some(a=>a["No."]===t["No."]),onChange:()=>N(t)})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:[t["First Name"]," ",t.Surname]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:t["Membership Number"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:t["Phone Number"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>y(t,s),children:e.jsx(S,{size:16})})})]},t["No."]))})]})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No member databases found."}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Upload a master list for an assembly to get started."})]})]})};export{P as default};
