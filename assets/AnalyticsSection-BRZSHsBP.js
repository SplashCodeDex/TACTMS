import{c as I,j as t,m as V,r as d,b as R,d as X,e as xe,P as _,g as P,h as G,i as ve,B as Y,k as ge,C as we,u as Se,l as ye,n as Z,o as te,U as je,G as Ne,p as z}from"./index-Bj-t18zv.js";import{c as Ae}from"./index-oECtIDYi.js";/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=I("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=I("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=I("MessageSquareQuote",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M8 12a2 2 0 0 0 2-2V8H8",key:"1jfesj"}],["path",{d:"M14 12a2 2 0 0 0 2-2V8h-2",key:"1dq9mh"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=I("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=I("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),Me=()=>t.jsxs("div",{className:"space-y-6 p-4",children:[t.jsxs("div",{className:"flex items-end gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-[var(--bg-elevated)] animate-pulse flex-shrink-0"}),t.jsx("div",{className:"w-3/5",children:t.jsx("div",{className:"h-20 w-full rounded-lg bg-[var(--bg-elevated)] animate-pulse"})})]}),t.jsxs("div",{className:"flex items-end gap-3 flex-row-reverse",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-[var(--bg-elevated)] animate-pulse flex-shrink-0"}),t.jsx("div",{className:"w-1/2",children:t.jsx("div",{className:"h-12 w-full rounded-lg bg-[var(--bg-elevated)] animate-pulse"})})]}),t.jsxs("div",{className:"flex items-end gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-[var(--bg-elevated)] animate-pulse flex-shrink-0"}),t.jsx("div",{className:"w-4/5",children:t.jsx("div",{className:"h-28 w-full rounded-lg bg-[var(--bg-elevated)] animate-pulse"})})]})]}),Le=V.rect,ke=V.text,ze=({data:e,chartHeight:r=220,barWidth:n=35,barMargin:o=20})=>{const s=e.length*(n+o),l=Math.max(...e.map(c=>c.count),0);return t.jsx("div",{className:"bar-chart-container w-full overflow-x-auto pb-4",children:t.jsxs("svg",{width:s,height:r,"aria-label":"Contribution Distribution Chart",children:[t.jsx("g",{transform:"translate(0, 10)",children:e.map((c,u)=>{const i=l>0?c.count/l*(r-40):0;return t.jsxs("g",{transform:`translate(${u*(n+o)}, 0)`,children:[t.jsx("title",{children:`${c.label}: ${c.count} members`}),t.jsx(Le,{className:"bar",x:0,y:r-30-i,width:n,height:i,fill:"url(#barGradient)",rx:"4",ry:"4",initial:{height:0,y:r-30},animate:{height:i,y:r-30-i},transition:{duration:.8,ease:[.22,1,.36,1],delay:u*.1}}),t.jsx(ke,{className:"bar-value",x:n/2,y:r-35-i,textAnchor:"middle",initial:{opacity:0,y:r-30},animate:{opacity:1,y:r-35-i},transition:{duration:.8,ease:"easeOut",delay:u*.1+.3},children:c.count}),t.jsx("text",{className:"axis-text",x:n/2,y:r-15,textAnchor:"middle",children:c.label})]},c.label)})}),t.jsx("defs",{children:t.jsxs("linearGradient",{id:"barGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"0%",stopColor:"var(--primary-accent-hover-start)"}),t.jsx("stop",{offset:"100%",stopColor:"var(--primary-accent-start)"})]})})]})})};function Ie(e,r){return d.useReducer((n,o)=>r[n][o]??n,e)}var D=e=>{const{present:r,children:n}=e,o=_e(r),s=typeof n=="function"?n({present:o.isPresent}):d.Children.only(n),l=R(o.ref,De(s));return typeof n=="function"||o.isPresent?d.cloneElement(s,{ref:l}):null};D.displayName="Presence";function _e(e){const[r,n]=d.useState(),o=d.useRef(null),s=d.useRef(e),l=d.useRef("none"),c=e?"mounted":"unmounted",[u,i]=Ie(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return d.useEffect(()=>{const a=U(o.current);l.current=u==="mounted"?a:"none"},[u]),X(()=>{const a=o.current,m=s.current;if(m!==e){const f=l.current,p=U(a);e?i("MOUNT"):p==="none"||(a==null?void 0:a.display)==="none"?i("UNMOUNT"):i(m&&f!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,i]),X(()=>{if(r){let a;const m=r.ownerDocument.defaultView??window,h=p=>{const g=U(o.current).includes(CSS.escape(p.animationName));if(p.target===r&&g&&(i("ANIMATION_END"),!s.current)){const w=r.style.animationFillMode;r.style.animationFillMode="forwards",a=m.setTimeout(()=>{r.style.animationFillMode==="forwards"&&(r.style.animationFillMode=w)})}},f=p=>{p.target===r&&(l.current=U(o.current))};return r.addEventListener("animationstart",f),r.addEventListener("animationcancel",h),r.addEventListener("animationend",h),()=>{m.clearTimeout(a),r.removeEventListener("animationstart",f),r.removeEventListener("animationcancel",h),r.removeEventListener("animationend",h)}}else i("ANIMATION_END")},[r,i]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:d.useCallback(a=>{o.current=a?getComputedStyle(a):null,n(a)},[])}}function U(e){return(e==null?void 0:e.animationName)||"none"}function De(e){var o,s;let r=(o=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:o.get,n=r&&"isReactWarning"in r&&r.isReactWarning;return n?e.ref:(r=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=r&&"isReactWarning"in r&&r.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Oe=d.createContext(void 0);function We(e){const r=d.useContext(Oe);return e||r||"ltr"}function Ue(e,[r,n]){return Math.min(n,Math.max(r,e))}function T(e,r,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return r==null?void 0:r(s)}}function Ve(e,r){return d.useReducer((n,o)=>r[n][o]??n,e)}var q="ScrollArea",[re]=xe(q),[Ye,S]=re(q),ne=d.forwardRef((e,r)=>{const{__scopeScrollArea:n,type:o="hover",dir:s,scrollHideDelay:l=600,...c}=e,[u,i]=d.useState(null),[a,m]=d.useState(null),[h,f]=d.useState(null),[p,x]=d.useState(null),[g,w]=d.useState(null),[b,N]=d.useState(0),[L,A]=d.useState(0),[C,k]=d.useState(!1),[O,W]=d.useState(!1),v=R(r,E=>i(E)),y=We(s);return t.jsx(Ye,{scope:n,type:o,dir:y,scrollHideDelay:l,scrollArea:u,viewport:a,onViewportChange:m,content:h,onContentChange:f,scrollbarX:p,onScrollbarXChange:x,scrollbarXEnabled:C,onScrollbarXEnabledChange:k,scrollbarY:g,onScrollbarYChange:w,scrollbarYEnabled:O,onScrollbarYEnabledChange:W,onCornerWidthChange:N,onCornerHeightChange:A,children:t.jsx(_.div,{dir:y,...c,ref:v,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":L+"px",...e.style}})})});ne.displayName=q;var se="ScrollAreaViewport",oe=d.forwardRef((e,r)=>{const{__scopeScrollArea:n,children:o,nonce:s,...l}=e,c=S(se,n),u=d.useRef(null),i=R(r,u,c.onViewportChange);return t.jsxs(t.Fragment,{children:[t.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),t.jsx(_.div,{"data-radix-scroll-area-viewport":"",...l,ref:i,style:{overflowX:c.scrollbarXEnabled?"scroll":"hidden",overflowY:c.scrollbarYEnabled?"scroll":"hidden",...e.style},children:t.jsx("div",{ref:c.onContentChange,style:{minWidth:"100%",display:"table"},children:o})})]})});oe.displayName=se;var j="ScrollAreaScrollbar",J=d.forwardRef((e,r)=>{const{forceMount:n,...o}=e,s=S(j,e.__scopeScrollArea),{onScrollbarXEnabledChange:l,onScrollbarYEnabledChange:c}=s,u=e.orientation==="horizontal";return d.useEffect(()=>(u?l(!0):c(!0),()=>{u?l(!1):c(!1)}),[u,l,c]),s.type==="hover"?t.jsx(Be,{...o,ref:r,forceMount:n}):s.type==="scroll"?t.jsx($e,{...o,ref:r,forceMount:n}):s.type==="auto"?t.jsx(ae,{...o,ref:r,forceMount:n}):s.type==="always"?t.jsx(K,{...o,ref:r}):null});J.displayName=j;var Be=d.forwardRef((e,r)=>{const{forceMount:n,...o}=e,s=S(j,e.__scopeScrollArea),[l,c]=d.useState(!1);return d.useEffect(()=>{const u=s.scrollArea;let i=0;if(u){const a=()=>{window.clearTimeout(i),c(!0)},m=()=>{i=window.setTimeout(()=>c(!1),s.scrollHideDelay)};return u.addEventListener("pointerenter",a),u.addEventListener("pointerleave",m),()=>{window.clearTimeout(i),u.removeEventListener("pointerenter",a),u.removeEventListener("pointerleave",m)}}},[s.scrollArea,s.scrollHideDelay]),t.jsx(D,{present:n||l,children:t.jsx(ae,{"data-state":l?"visible":"hidden",...o,ref:r})})}),$e=d.forwardRef((e,r)=>{const{forceMount:n,...o}=e,s=S(j,e.__scopeScrollArea),l=e.orientation==="horizontal",c=H(()=>i("SCROLL_END"),100),[u,i]=Ve("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return d.useEffect(()=>{if(u==="idle"){const a=window.setTimeout(()=>i("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(a)}},[u,s.scrollHideDelay,i]),d.useEffect(()=>{const a=s.viewport,m=l?"scrollLeft":"scrollTop";if(a){let h=a[m];const f=()=>{const p=a[m];h!==p&&(i("SCROLL"),c()),h=p};return a.addEventListener("scroll",f),()=>a.removeEventListener("scroll",f)}},[s.viewport,l,i,c]),t.jsx(D,{present:n||u!=="hidden",children:t.jsx(K,{"data-state":u==="hidden"?"hidden":"visible",...o,ref:r,onPointerEnter:T(e.onPointerEnter,()=>i("POINTER_ENTER")),onPointerLeave:T(e.onPointerLeave,()=>i("POINTER_LEAVE"))})})}),ae=d.forwardRef((e,r)=>{const n=S(j,e.__scopeScrollArea),{forceMount:o,...s}=e,[l,c]=d.useState(!1),u=e.orientation==="horizontal",i=H(()=>{if(n.viewport){const a=n.viewport.offsetWidth<n.viewport.scrollWidth,m=n.viewport.offsetHeight<n.viewport.scrollHeight;c(u?a:m)}},10);return M(n.viewport,i),M(n.content,i),t.jsx(D,{present:o||l,children:t.jsx(K,{"data-state":l?"visible":"hidden",...s,ref:r})})}),K=d.forwardRef((e,r)=>{const{orientation:n="vertical",...o}=e,s=S(j,e.__scopeScrollArea),l=d.useRef(null),c=d.useRef(0),[u,i]=d.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),a=ue(u.viewport,u.content),m={...o,sizes:u,onSizesChange:i,hasThumb:a>0&&a<1,onThumbChange:f=>l.current=f,onThumbPointerUp:()=>c.current=0,onThumbPointerDown:f=>c.current=f};function h(f,p){return Je(f,c.current,u,p)}return n==="horizontal"?t.jsx(Fe,{...m,ref:r,onThumbPositionChange:()=>{if(s.viewport&&l.current){const f=s.viewport.scrollLeft,p=ee(f,u,s.dir);l.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollLeft=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollLeft=h(f,s.dir))}}):n==="vertical"?t.jsx(He,{...m,ref:r,onThumbPositionChange:()=>{if(s.viewport&&l.current){const f=s.viewport.scrollTop,p=ee(f,u);l.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollTop=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollTop=h(f))}}):null}),Fe=d.forwardRef((e,r)=>{const{sizes:n,onSizesChange:o,...s}=e,l=S(j,e.__scopeScrollArea),[c,u]=d.useState(),i=d.useRef(null),a=R(r,i,l.onScrollbarXChange);return d.useEffect(()=>{i.current&&u(getComputedStyle(i.current))},[i]),t.jsx(ie,{"data-orientation":"horizontal",...s,ref:a,sizes:n,style:{bottom:0,left:l.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:l.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":F(n)+"px",...e.style},onThumbPointerDown:m=>e.onThumbPointerDown(m.x),onDragScroll:m=>e.onDragScroll(m.x),onWheelScroll:(m,h)=>{if(l.viewport){const f=l.viewport.scrollLeft+m.deltaX;e.onWheelScroll(f),he(f,h)&&m.preventDefault()}},onResize:()=>{i.current&&l.viewport&&c&&o({content:l.viewport.scrollWidth,viewport:l.viewport.offsetWidth,scrollbar:{size:i.current.clientWidth,paddingStart:$(c.paddingLeft),paddingEnd:$(c.paddingRight)}})}})}),He=d.forwardRef((e,r)=>{const{sizes:n,onSizesChange:o,...s}=e,l=S(j,e.__scopeScrollArea),[c,u]=d.useState(),i=d.useRef(null),a=R(r,i,l.onScrollbarYChange);return d.useEffect(()=>{i.current&&u(getComputedStyle(i.current))},[i]),t.jsx(ie,{"data-orientation":"vertical",...s,ref:a,sizes:n,style:{top:0,right:l.dir==="ltr"?0:void 0,left:l.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":F(n)+"px",...e.style},onThumbPointerDown:m=>e.onThumbPointerDown(m.y),onDragScroll:m=>e.onDragScroll(m.y),onWheelScroll:(m,h)=>{if(l.viewport){const f=l.viewport.scrollTop+m.deltaY;e.onWheelScroll(f),he(f,h)&&m.preventDefault()}},onResize:()=>{i.current&&l.viewport&&c&&o({content:l.viewport.scrollHeight,viewport:l.viewport.offsetHeight,scrollbar:{size:i.current.clientHeight,paddingStart:$(c.paddingTop),paddingEnd:$(c.paddingBottom)}})}})}),[Xe,le]=re(j),ie=d.forwardRef((e,r)=>{const{__scopeScrollArea:n,sizes:o,hasThumb:s,onThumbChange:l,onThumbPointerUp:c,onThumbPointerDown:u,onThumbPositionChange:i,onDragScroll:a,onWheelScroll:m,onResize:h,...f}=e,p=S(j,n),[x,g]=d.useState(null),w=R(r,v=>g(v)),b=d.useRef(null),N=d.useRef(""),L=p.viewport,A=o.content-o.viewport,C=P(m),k=P(i),O=H(h,10);function W(v){if(b.current){const y=v.clientX-b.current.left,E=v.clientY-b.current.top;a({x:y,y:E})}}return d.useEffect(()=>{const v=y=>{const E=y.target;(x==null?void 0:x.contains(E))&&C(y,A)};return document.addEventListener("wheel",v,{passive:!1}),()=>document.removeEventListener("wheel",v,{passive:!1})},[L,x,A,C]),d.useEffect(k,[o,k]),M(x,O),M(p.content,O),t.jsx(Xe,{scope:n,scrollbar:x,hasThumb:s,onThumbChange:P(l),onThumbPointerUp:P(c),onThumbPositionChange:k,onThumbPointerDown:P(u),children:t.jsx(_.div,{...f,ref:w,style:{position:"absolute",...f.style},onPointerDown:T(e.onPointerDown,v=>{v.button===0&&(v.target.setPointerCapture(v.pointerId),b.current=x.getBoundingClientRect(),N.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),W(v))}),onPointerMove:T(e.onPointerMove,W),onPointerUp:T(e.onPointerUp,v=>{const y=v.target;y.hasPointerCapture(v.pointerId)&&y.releasePointerCapture(v.pointerId),document.body.style.webkitUserSelect=N.current,p.viewport&&(p.viewport.style.scrollBehavior=""),b.current=null})})})}),B="ScrollAreaThumb",ce=d.forwardRef((e,r)=>{const{forceMount:n,...o}=e,s=le(B,e.__scopeScrollArea);return t.jsx(D,{present:n||s.hasThumb,children:t.jsx(Ge,{ref:r,...o})})}),Ge=d.forwardRef((e,r)=>{const{__scopeScrollArea:n,style:o,...s}=e,l=S(B,n),c=le(B,n),{onThumbPositionChange:u}=c,i=R(r,h=>c.onThumbChange(h)),a=d.useRef(void 0),m=H(()=>{a.current&&(a.current(),a.current=void 0)},100);return d.useEffect(()=>{const h=l.viewport;if(h){const f=()=>{if(m(),!a.current){const p=Ke(h,u);a.current=p,u()}};return u(),h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[l.viewport,m,u]),t.jsx(_.div,{"data-state":c.hasThumb?"visible":"hidden",...s,ref:i,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...o},onPointerDownCapture:T(e.onPointerDownCapture,h=>{const p=h.target.getBoundingClientRect(),x=h.clientX-p.left,g=h.clientY-p.top;c.onThumbPointerDown({x,y:g})}),onPointerUp:T(e.onPointerUp,c.onThumbPointerUp)})});ce.displayName=B;var Q="ScrollAreaCorner",de=d.forwardRef((e,r)=>{const n=S(Q,e.__scopeScrollArea),o=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&o?t.jsx(qe,{...e,ref:r}):null});de.displayName=Q;var qe=d.forwardRef((e,r)=>{const{__scopeScrollArea:n,...o}=e,s=S(Q,n),[l,c]=d.useState(0),[u,i]=d.useState(0),a=!!(l&&u);return M(s.scrollbarX,()=>{var h;const m=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(m),i(m)}),M(s.scrollbarY,()=>{var h;const m=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(m),c(m)}),a?t.jsx(_.div,{...o,ref:r,style:{width:l,height:u,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function $(e){return e?parseInt(e,10):0}function ue(e,r){const n=e/r;return isNaN(n)?0:n}function F(e){const r=ue(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,o=(e.scrollbar.size-n)*r;return Math.max(o,18)}function Je(e,r,n,o="ltr"){const s=F(n),l=s/2,c=r||l,u=s-c,i=n.scrollbar.paddingStart+c,a=n.scrollbar.size-n.scrollbar.paddingEnd-u,m=n.content-n.viewport,h=o==="ltr"?[0,m]:[m*-1,0];return me([i,a],h)(e)}function ee(e,r,n="ltr"){const o=F(r),s=r.scrollbar.paddingStart+r.scrollbar.paddingEnd,l=r.scrollbar.size-s,c=r.content-r.viewport,u=l-o,i=n==="ltr"?[0,c]:[c*-1,0],a=Ue(e,i);return me([0,c],[0,u])(a)}function me(e,r){return n=>{if(e[0]===e[1]||r[0]===r[1])return r[0];const o=(r[1]-r[0])/(e[1]-e[0]);return r[0]+o*(n-e[0])}}function he(e,r){return e>0&&e<r}var Ke=(e,r=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},o=0;return function s(){const l={left:e.scrollLeft,top:e.scrollTop},c=n.left!==l.left,u=n.top!==l.top;(c||u)&&r(),n=l,o=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(o)};function H(e,r){const n=P(e),o=d.useRef(0);return d.useEffect(()=>()=>window.clearTimeout(o.current),[]),d.useCallback(()=>{window.clearTimeout(o.current),o.current=window.setTimeout(n,r)},[n,r])}function M(e,r){const n=P(r);X(()=>{let o=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(o),o=window.requestAnimationFrame(n)});return s.observe(e),()=>{window.cancelAnimationFrame(o),s.unobserve(e)}}},[e,n])}var fe=ne,Qe=oe,Ze=de;const pe=d.forwardRef(({className:e,children:r,...n},o)=>t.jsxs(fe,{ref:o,className:G("relative overflow-hidden",e),...n,children:[t.jsx(Qe,{className:"h-full w-full rounded-[inherit]",children:r}),t.jsx(be,{}),t.jsx(Ze,{})]}));pe.displayName=fe.displayName;const be=d.forwardRef(({className:e,orientation:r="vertical",...n},o)=>t.jsx(J,{ref:o,orientation:r,className:G("flex touch-none select-none transition-colors",r==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",r==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:t.jsx(ce,{className:"relative flex-1 rounded-full bg-border"})}));be.displayName=J.displayName;const et=({chatHistory:e,isLoading:r,onSendMessage:n,suggestedPrompts:o})=>{const[s,l]=d.useState(""),c=d.useRef(null);d.useEffect(()=>{var a;(a=c.current)==null||a.scrollIntoView({behavior:"smooth"})},[e]);const u=a=>{a==null||a.preventDefault(),s.trim()&&!r&&(n(s.trim()),l(""))},i=a=>{n(a)};return t.jsxs("div",{className:"flex flex-col h-[60vh] md:h-[calc(100vh-250px)]",children:[t.jsxs(pe,{className:"flex-grow pr-4 space-y-6",children:[e.map((a,m)=>t.jsx("div",{className:`chat-message ${a.role}`,children:t.jsx("div",{className:`chat-bubble ${a.role}`,children:a.isLoading&&a.parts[0].text===""?t.jsxs("div",{className:"typing-indicator px-2 py-1",children:[t.jsx("span",{}),t.jsx("span",{}),t.jsx("span",{})]}):t.jsx("div",{className:"text-sm",dangerouslySetInnerHTML:{__html:ve(a.parts[0].text||"")}})})},m)),t.jsx("div",{ref:c})]}),t.jsxs("div",{className:"pt-4 mt-auto",children:[t.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:o.map(a=>t.jsxs(Y,{size:"sm",variant:"subtle",onClick:()=>i(a),disabled:r,children:[t.jsx(Ee,{size:14,className:"mr-1.5 text-[var(--primary-accent-end)]"})," ",a]},a))}),t.jsxs("form",{onSubmit:u,className:"flex items-center gap-3",children:[t.jsx("textarea",{value:s,onChange:a=>l(a.target.value),onKeyDown:a=>{a.key==="Enter"&&!a.shiftKey&&u(a)},placeholder:"Ask a follow-up question...",className:"form-input-light flex-grow !rounded-xl resize-none",rows:1,style:{maxHeight:"150px"},disabled:r}),t.jsx(Y,{type:"submit",size:"icon",variant:"primary",disabled:r||!s.trim(),children:t.jsx(Re,{size:18})})]})]})]})},tt=Ae("inline-flex items-center justify-center cursor-pointer rounded-md transition-colors disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary-accent-start text-white shadow-xs hover:bg-primary-accent-end",muted:"bg-muted text-muted-foreground",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50"},size:{default:"size-8 rounded-lg [&_svg]:size-4",sm:"size-6 [&_svg]:size-3",md:"size-10 rounded-lg [&_svg]:size-5",lg:"size-12 rounded-xl [&_svg]:size-6"}},defaultVariants:{variant:"default",size:"default"}});function rt({content:e,className:r,size:n,variant:o,delay:s=3e3,onClick:l,onCopy:c,isCopied:u,onCopyChange:i,...a}){const[m,h]=d.useState(u??!1),f=m?we:Ce;d.useEffect(()=>{h(u??!1)},[u]);const p=d.useCallback(g=>{h(g),i==null||i(g)},[i]),x=d.useCallback(g=>{u||(e&&navigator.clipboard.writeText(e).then(()=>{p(!0),setTimeout(()=>p(!1),s),c==null||c(e)}).catch(w=>{console.error("Error copying command",w)}),l==null||l(g))},[u,e,s,l,c,p]);return t.jsx(V.button,{"data-slot":"copy-button",whileHover:{scale:1.05},whileTap:{scale:.95},className:G(tt({variant:o,size:n}),r),onClick:x,...a,children:t.jsx(ge,{mode:"wait",children:t.jsx(V.span,{"data-slot":"copy-button-icon",initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{duration:.15},children:t.jsx(f,{})},m?"check":"copy")})})}const nt=({summary:e})=>{const r=e.replace(/\n/g,"<br />").replace(/\* \*\*(.*?)\*\*/g,'<li><strong class="text-[var(--primary-accent-start)]">$1</strong>').replace(/<\/strong>:(.*?)<br \/>/g,"</strong>:$1</li>").replace(/- \*\*(.*?)\*\*/g,'<li><strong class="text-[var(--primary-accent-start)]">$1</strong>').replace(/\*\*(.*?)\*\*/g,'<strong class="text-[var(--primary-accent-start)]">$1</strong>').replace(/- (.*?)(<br \/>|$)/g,'<li class="list-none ml-0 mb-1.5">$1</li>');return t.jsxs("div",{className:"content-card bg-[var(--bg-elevated)] border-l-4 border-[var(--primary-accent-start)]",children:[t.jsxs("h3",{className:"section-heading text-base !mb-3",children:[t.jsx(Pe,{size:18,className:"mr-3 icon-primary"}),"AI-Generated Summary"]}),t.jsx("ul",{className:"text-sm space-y-2 text-[var(--text-secondary)]",dangerouslySetInnerHTML:{__html:r}})]})},st=()=>t.jsx("div",{className:"space-y-4",children:[...Array(3)].map((e,r)=>t.jsxs("div",{className:"p-4 bg-[var(--bg-card-subtle-accent)] rounded-lg animate-pulse",children:[t.jsx("div",{className:"h-4 bg-[var(--border-color)] rounded w-1/3 mb-3"}),t.jsx("div",{className:"h-3 bg-[var(--border-color)] rounded w-full mb-1"}),t.jsx("div",{className:"h-3 bg-[var(--border-color)] rounded w-5/6"})]},r))}),ot=({reconciliationReport:e,addToast:r})=>{const[n,o]=d.useState([]),[s,l]=d.useState(!1),[c,u]=d.useState(null),i=(e==null?void 0:e.newMembers)||[],a=async()=>{if(i.length===0){r("No new members found in the current data to generate messages for.","warning");return}l(!0),u(null),o([]);try{const h=new Ne("AIzaSyCc8wwsp9E7PuNUu20Svoc_wSaSQXtMbjM").getGenerativeModel({model:"gemini-1.5-flash"}),p=`You are a friendly and welcoming church administrator for The Apostolic Church. Your task is to generate a short, personalized, and encouraging SMS message for each of the following new church members.



Guidelines:

- Keep each message under 160 characters to fit in a standard SMS.

- Start with a warm greeting addressing the member by their first name.

- Express joy that they have joined the church family.

- End with a warm closing, for example "God bless you." or "Welcome to the family!".

- Maintain a positive and uplifting tone.

- DO NOT add any extra text or explanation outside of the required JSON output.



Here are the new members to welcome: ${i.map(b=>`${b["First Name"]||""} ${b.Surname||""}`.trim()).filter(Boolean).join(", ")}`,w=(await h.generateContent({contents:[{role:"user",parts:[{text:p}]}],generationConfig:{responseMimeType:"application/json",responseSchema:{type:z.OBJECT,properties:{analysis:{type:z.ARRAY,items:{type:z.OBJECT,properties:{memberName:{type:z.STRING,description:"The full name of the new church member."},message:{type:z.STRING,description:"The personalized welcome SMS message for the member."}},required:["memberName","message"]}}},required:["analysis"]}}})).response.text();if(w){const b=JSON.parse(w);if(b&&Array.isArray(b.analysis))o(b.analysis);else throw new Error("AI response was not a JSON object with an 'analysis' array.")}else throw new Error("AI response was empty.")}catch(m){console.error("Error generating outreach messages:",m),u("Sorry, I couldn't generate the messages. The AI might be busy. Please try again in a moment."),r("Failed to generate outreach messages.","error")}finally{l(!1)}};return t.jsxs("section",{className:"content-card",children:[t.jsxs("h2",{className:"section-heading",children:[t.jsx(Te,{size:22,className:"mr-3 icon-primary"}),"AI Outreach Assistant"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 items-center",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"outreach-target",className:"form-label",children:"Select Target Group"}),t.jsx("select",{id:"outreach-target",className:"form-input-light w-full",children:t.jsxs("option",{children:["New Members (Souls Won) (",i.length,")"]})})]}),t.jsx("div",{className:"self-end",children:t.jsx(Y,{onClick:a,isLoading:s,disabled:i.length===0||s,variant:"secondary",fullWidth:!0,children:"Generate Welcome Messages"})})]}),t.jsxs("div",{className:"mt-6 pt-6 border-t border-[var(--border-color)]",children:[s&&t.jsx(st,{}),c&&t.jsxs("div",{className:"text-center py-6 text-[var(--danger-text)]",children:[t.jsx(te,{size:32,className:"mx-auto mb-2"}),t.jsx("p",{children:c})]}),!s&&!c&&n.length>0&&t.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto pr-2",children:n.map((m,h)=>t.jsxs("div",{className:"p-4 bg-[var(--bg-elevated)] rounded-lg border border-[var(--border-color)]",children:[t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsxs("h4",{className:"font-semibold text-[var(--text-primary)] flex items-center gap-2",children:[t.jsx(je,{size:16})," ",m.memberName]}),t.jsx(rt,{content:m.message})]}),t.jsx("p",{className:"text-sm text-[var(--text-secondary)] whitespace-pre-wrap",children:m.message})]},h))}),!s&&!c&&n.length===0&&t.jsx("div",{className:"text-center py-6 text-[var(--text-muted)]",children:i.length>0?"Click 'Generate' to create personalized welcome messages for your new members.":"No new members found in the current workspace. Upload and reconcile a new file to identify them."})]})]})},ct=()=>{var A;const{titheListData:e=[],currentAssembly:r,selectedDate:n,addToast:o,tithersCount:s,nonTithersCount:l,totalAmount:c,reconciliationReport:u}=Se(),{chatHistory:i,chartData:a,isLoading:m,error:h,startChat:f,sendMessage:p}=ye(),x=()=>{f(e,r,n,s,l,c)},g=C=>{C.trim()&&p(C)},w=e.length>0,b=i.length>0,N=(A=i[0])==null?void 0:A.summary,L=["What are the key observations from this data?","Suggest some potential actions based on these numbers.","What if participation increased by 10%?",`How does ${r||"this assembly"} compare to typical patterns?`];return t.jsxs("div",{className:"space-y-8",children:[t.jsx(ot,{reconciliationReport:u,addToast:o}),t.jsx("section",{className:"content-card",children:t.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-4",children:[t.jsxs("h2",{id:"analytics-heading",className:"section-heading border-none pb-0 mb-0",children:[t.jsx(Z,{size:22,className:"mr-3 icon-primary"}),"AI-Powered Analytics Chat"]}),t.jsx(Y,{onClick:x,disabled:!w||m,isLoading:m&&!b,variant:"primary",children:b?`Restart Analysis for ${r}`:"Analyze with AI"})]})}),t.jsxs("div",{className:"min-h-[400px]",children:[h&&t.jsxs("div",{className:"content-card text-center py-10 flex flex-col items-center",children:[t.jsx(te,{size:48,className:"text-[var(--danger-text)] mb-4"}),t.jsx("h3",{className:"text-xl font-semibold text-[var(--danger-text)]",children:"Analysis Failed"}),t.jsx("p",{className:"text-[var(--text-secondary)] mt-2 max-w-md",children:h})]}),!b&&!m&&!h&&t.jsxs("div",{className:"content-card text-center py-10 flex flex-col items-center animate-fadeIn",children:[t.jsx(Z,{size:52,className:"mx-auto text-[var(--text-muted)] mb-4 opacity-50"}),t.jsx("h3",{className:"text-xl font-semibold text-[var(--text-primary)]",children:"Ready for Insights?"}),t.jsx("p",{className:"text-[var(--text-secondary)] mt-2 max-w-md",children:w?`You have a list for ${r} Assembly ready. Click "Analyze with AI" to start a conversation about your data.`:"Generate or load a tithe list in the Processor view, then come back here to get an AI-powered analysis."})]}),m&&!b&&t.jsx("div",{className:"content-card",children:t.jsx(Me,{})}),b&&!h&&t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-start",children:[t.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[N&&t.jsx(nt,{summary:N}),t.jsx("div",{className:"content-card",children:t.jsx(et,{chatHistory:i,isLoading:m,onSendMessage:g,suggestedPrompts:L})})]}),t.jsx("div",{className:"lg:col-span-1 space-y-8 sticky top-8",children:a.length>0&&t.jsxs("div",{className:"content-card animate-fadeIn",children:[t.jsx("h3",{className:"section-heading text-base !mb-6",children:"Contribution Distribution"}),t.jsx(ze,{data:a})]})})]})]})]})};export{ct as default};
