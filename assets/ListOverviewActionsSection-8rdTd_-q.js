import{c as d,j as e,m as T,R as te,r as H,B as y,U as se,i as ae,k as ie,d as ne}from"./index-B3IjnJrT.js";import{D as re,A as p,S as k,T as z}from"./AnimatedNumber-CfwlfAHY.js";import{I as le}from"./InfoTooltip-Dj0-vRuB.js";import{A as oe}from"./activity-Bulu7lKq.js";/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=d("CalendarCheck",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=d("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=d("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=d("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=d("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=d("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=d("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=d("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),pe=T.circle,ve=T.span,ye=({percentage:c,size:s=100,strokeWidth:i=10,color:r})=>{const m=(s-i)/2,l=2*Math.PI*m,x=l-c/100*l,u=r||"var(--primary-accent-start)";return e.jsxs("div",{className:"relative",style:{width:s,height:s},children:[e.jsxs("svg",{width:s,height:s,viewBox:`0 0 ${s} ${s}`,className:"-rotate-90",children:[e.jsx("circle",{cx:s/2,cy:s/2,r:m,stroke:"var(--bg-card-subtle-accent)",strokeWidth:i,fill:"transparent"}),e.jsx(pe,{cx:s/2,cy:s/2,r:m,stroke:u,strokeWidth:i,fill:"transparent",strokeDasharray:l,strokeDashoffset:l,strokeLinecap:"round",animate:{strokeDashoffset:x},transition:{duration:1.2,ease:"circOut"}})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs(ve,{className:"text-xl font-bold text-[var(--text-primary)]",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.5},children:[Math.round(c),"%"]})})]})},ge=T.section,Y=({title:c,stats:s,defaultIcon:i})=>{const{change:r,current:m,previous:l}=s;if(l==null||l===0)return e.jsxs("div",{className:"content-card card-glow-on-hover p-5 flex flex-col justify-between",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"text-sm text-[var(--text-secondary)]",children:c}),e.jsx(i,{size:20,className:"text-[var(--text-muted)]"})]}),e.jsx("p",{className:"text-xl font-bold mt-2 text-[var(--text-muted)]",children:"No Data"}),e.jsx("p",{className:"text-xs text-[var(--text-muted)] mt-1",children:"No past records to compare."})]});const x=r!==null&&r>0,u=r!==null&&r<0,g=x?"text-[var(--success-text)]":u?"text-[var(--danger-text)]":"text-[var(--text-secondary)]",b=x?z:u?q:i,f=()=>r===null?"N/A":r===1/0?"+∞%":`${r>=0?"+":""}${r.toFixed(1)}%`;return e.jsxs("div",{className:"content-card card-glow-on-hover p-5 flex flex-col justify-between",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"text-sm text-[var(--text-secondary)]",children:c}),e.jsx(b,{size:20,className:g})]}),e.jsx("p",{className:`text-3xl font-bold mt-2 ${g}`,children:f()}),e.jsxs("p",{className:"text-xs text-[var(--text-muted)] mt-1 truncate",children:["GH₵ ",m.toLocaleString(void 0,{minimumFractionDigits:2})," vs GH₵ ",l.toLocaleString(void 0,{minimumFractionDigits:2})]})]})},fe=te.memo(H.forwardRef(({currentAssembly:c,selectedDate:s,currentTotalTithe:i,hasUnsavedChanges:r,titheListData:m,tithersCount:l,nonTithersCount:x,tithersPercentage:u,setIsFullPreviewModalOpen:g,setIsDataEntryModalOpen:b,fileNameToSave:f,setFileNameToSave:E,inputErrors:w,setInputErrors:G,handleDownloadExcel:V,openSaveFavoriteModal:$,onClearWorkspace:W,transactionLog:j,soulsWonCount:O},R)=>{const{lowestTitheAmount:A,highestTitheAmount:U,lowestTitherName:B,highestTitherName:P,historicalStats:M}=H.useMemo(()=>{const n=m.map(a=>({...a,amount:Number(a["Transaction Amount"])||0})).filter(a=>a.amount>0);let h=null,v=null;n.length>0&&(h=n.reduce((a,t)=>a.amount<t.amount?a:t),v=n.reduce((a,t)=>a.amount>t.amount?a:t));const K=h?h.amount:0,Z=v?v.amount:0,J=h?h["Membership Number"]:void 0,Q=v?v["Membership Number"]:void 0,L=(a,t)=>t===null||t===0?a>0?1/0:0:(a-t)/t*100,X=s.getMonth(),I=s.getFullYear(),N=new Date(s);N.setMonth(N.getMonth()-1);const _=N.getMonth(),ee=N.getFullYear();let D=null,F=null,S=0;if(j&&j.length>0&&c){const a=j.filter(t=>t.assemblyName===c);D=a.filter(t=>{const o=new Date(t.selectedDate);return o.getMonth()===_&&o.getFullYear()===ee}).reduce((t,o)=>t+o.totalTitheAmount,0),F=a.filter(t=>{const o=new Date(t.selectedDate);return o.getMonth()===X&&o.getFullYear()===I-1}).reduce((t,o)=>t+o.totalTitheAmount,0),S=a.filter(t=>new Date(t.selectedDate).getFullYear()===I).reduce((t,o)=>t+o.totalTitheAmount,0)}return S+=i,{lowestTitheAmount:K,highestTitheAmount:Z,lowestTitherName:J,highestTitherName:Q,historicalStats:{vsLastMonth:{change:L(i,D),current:i,previous:D},vsLastYear:{change:L(i,F),current:i,previous:F},ytdTotal:S}}},[m,j,s,i,c]);return m.length===0?null:e.jsxs(ge,{ref:R,className:"space-y-8","aria-labelledby":"overview-actions-heading",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h2",{id:"overview-actions-heading",className:"section-heading !border-b-0 !pb-0 !mb-0",children:[e.jsx(oe,{size:22,className:"mr-3 icon-primary"}),c," Assembly Dashboard"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{onClick:()=>b(!0),variant:"outline",size:"md",leftIcon:e.jsx(xe,{size:16}),children:"Data Entry Mode"}),e.jsx(y,{onClick:()=>g(!0),variant:"secondary",size:"md",leftIcon:e.jsx(ue,{size:16}),children:"Full List View"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6",children:[e.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"content-card card-glow-on-hover p-5 flex flex-col justify-between",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"text-sm text-[var(--text-secondary)]",children:"Total Amount"}),e.jsx(re,{size:20,className:"text-[var(--success-text)]"})]}),e.jsxs("p",{className:"text-4xl font-bold text-[var(--text-primary)] mt-2",children:["GH₵ ",e.jsx(p,{n:i,formatter:n=>n.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})})]})]}),e.jsxs("div",{className:"content-card card-glow-on-hover p-5 flex flex-col justify-between",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"text-sm text-[var(--text-secondary)]",children:"Participation"}),e.jsx(se,{size:20,className:"text-[var(--primary-accent-start)]"})]}),e.jsxs("div",{className:"flex items-center justify-around mt-2",children:[e.jsx(ye,{percentage:u,size:90,strokeWidth:8}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-2xl text-[var(--text-primary)]",children:e.jsx(p,{n:l})}),e.jsx("p",{className:"text-sm text-[var(--text-secondary)]",children:"Tithers"}),e.jsxs("p",{className:"text-sm text-[var(--text-muted)] mt-1",children:[x," Non-tithers"]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(k,{icon:e.jsx(ae,{}),label:"Souls Won (New Members)",value:e.jsx(p,{n:O??0})}),e.jsx(k,{icon:e.jsx(z,{}),label:"Highest Tithe Amount",value:e.jsxs(e.Fragment,{children:["GH₵ ",e.jsx(p,{n:U,formatter:n=>n.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})})]}),subValue:P}),e.jsx(k,{icon:e.jsx(q,{}),label:"Lowest Tithe Amount",value:e.jsxs(e.Fragment,{children:["GH₵ ",e.jsx(p,{n:A>0?A:0,formatter:n=>n.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})})]}),subValue:B})]})]}),e.jsxs("div",{className:"lg:col-span-2 content-card card-glow-on-hover flex flex-col",children:[e.jsxs("h3",{className:"text-lg font-semibold text-[var(--text-primary)] mb-4 flex items-center gap-2",children:[e.jsx(me,{size:20})," Export & Save"]}),e.jsxs("div",{className:"flex-grow flex flex-col justify-center gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"fileNameToSave",className:"form-label",children:"File Name for Download"}),e.jsx("input",{type:"text",id:"fileNameToSave",value:f,onChange:n=>{E(n.target.value),G(h=>({...h,fileName:""}))},className:`form-input-light ${w.fileName?"input-error":""}`,placeholder:"Enter file name"}),w.fileName&&e.jsx("p",{className:"form-error-text",children:w.fileName})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx(y,{onClick:V,leftIcon:e.jsx(he,{size:18}),disabled:!f.trim(),variant:"primary",fullWidth:!0,children:"Download Excel"}),e.jsx(y,{onClick:$,leftIcon:e.jsx(ie,{size:18}),variant:"outline",fullWidth:!0,children:"Save to Favorites"})]}),e.jsx(y,{onClick:W,leftIcon:e.jsx(de,{size:18}),variant:"subtle",className:"!text-[var(--danger-text)] hover:!bg-[var(--danger-start)]/10",fullWidth:!0,children:"Clear Workspace"})]}),r&&e.jsxs("p",{className:"text-xs text-[var(--warning-text)] mt-4 flex items-center gap-1.5",children:[e.jsx(ne,{size:14})," List has been modified. Apply changes in 'Full List View' before saving or exporting for accuracy."]})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("h3",{className:"section-heading",children:[e.jsx(C,{size:22,className:"mr-3 icon-primary"}),"Historical Comparison",e.jsx(le,{text:"Compares the current list's total amount against data from your transaction log for the same assembly.",className:"ml-2"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(Y,{title:"vs. Last Month",stats:M.vsLastMonth,defaultIcon:C}),e.jsx(Y,{title:"vs. Last Year (Same Month)",stats:M.vsLastYear,defaultIcon:C}),e.jsx(k,{icon:e.jsx(ce,{}),label:"YTD Total (Live)",value:e.jsxs(e.Fragment,{children:["GH₵ ",e.jsx(p,{n:M.ytdTotal,formatter:n=>n.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})})]})})]})]})]})}));fe.displayName="ListOverviewActionsSection";export{fe as default};
