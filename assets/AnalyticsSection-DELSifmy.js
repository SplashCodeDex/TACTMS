import{c as z,j as r,m as $,r as d,b as G,d as be,B as V,e as ve,C as ge,u as we,g as Se,h as Z,i as te,U as ye,G as je,k}from"./index-CxZf8OFW.js";import{c as Ne,u as E}from"./index-SeRuvoi6.js";import{c as Ae}from"./index-CDtMB7IS.js";/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=z("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=z("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=z("MessageSquareQuote",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M8 12a2 2 0 0 0 2-2V8H8",key:"1jfesj"}],["path",{d:"M14 12a2 2 0 0 0 2-2V8h-2",key:"1dq9mh"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=z("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=z("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),Me=()=>r.jsxs("div",{className:"space-y-6 p-4",children:[r.jsxs("div",{className:"flex items-end gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-[var(--bg-elevated)] animate-pulse flex-shrink-0"}),r.jsx("div",{className:"w-3/5",children:r.jsx("div",{className:"h-20 w-full rounded-lg bg-[var(--bg-elevated)] animate-pulse"})})]}),r.jsxs("div",{className:"flex items-end gap-3 flex-row-reverse",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-[var(--bg-elevated)] animate-pulse flex-shrink-0"}),r.jsx("div",{className:"w-1/2",children:r.jsx("div",{className:"h-12 w-full rounded-lg bg-[var(--bg-elevated)] animate-pulse"})})]}),r.jsxs("div",{className:"flex items-end gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-[var(--bg-elevated)] animate-pulse flex-shrink-0"}),r.jsx("div",{className:"w-4/5",children:r.jsx("div",{className:"h-28 w-full rounded-lg bg-[var(--bg-elevated)] animate-pulse"})})]})]}),_e=$.rect,Le=$.text,ke=({data:e,chartHeight:t=220,barWidth:n=35,barMargin:s=20})=>{const o=e.length*(n+s),l=Math.max(...e.map(a=>a.count),0);return r.jsx("div",{className:"bar-chart-container w-full overflow-x-auto pb-4",children:r.jsxs("svg",{width:o,height:t,"aria-label":"Contribution Distribution Chart",children:[r.jsx("g",{transform:"translate(0, 10)",children:e.map((a,u)=>{const i=l>0?a.count/l*(t-40):0;return r.jsxs("g",{transform:`translate(${u*(n+s)}, 0)`,children:[r.jsx("title",{children:`${a.label}: ${a.count} members`}),r.jsx(_e,{className:"bar",x:0,y:t-30-i,width:n,height:i,fill:"url(#barGradient)",rx:"4",ry:"4",initial:{height:0,y:t-30},animate:{height:i,y:t-30-i},transition:{duration:.8,ease:[.22,1,.36,1],delay:u*.1}}),r.jsx(Le,{className:"bar-value",x:n/2,y:t-35-i,textAnchor:"middle",initial:{opacity:0,y:t-30},animate:{opacity:1,y:t-35-i},transition:{duration:.8,ease:"easeOut",delay:u*.1+.3},children:a.count}),r.jsx("text",{className:"axis-text",x:n/2,y:t-15,textAnchor:"middle",children:a.label})]},a.label)})}),r.jsx("defs",{children:r.jsxs("linearGradient",{id:"barGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[r.jsx("stop",{offset:"0%",stopColor:"var(--primary-accent-hover-start)"}),r.jsx("stop",{offset:"100%",stopColor:"var(--primary-accent-start)"})]})})]})})};var ze=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],I=ze.reduce((e,t)=>{const n=Ne(`Primitive.${t}`),s=d.forwardRef((o,l)=>{const{asChild:a,...u}=o,i=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(i,{...u,ref:l})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{}),X=globalThis!=null&&globalThis.document?d.useLayoutEffect:()=>{};function Ie(e,t){return d.useReducer((n,s)=>t[n][s]??n,e)}var D=e=>{const{present:t,children:n}=e,s=De(t),o=typeof n=="function"?n({present:s.isPresent}):d.Children.only(n),l=E(s.ref,Oe(o));return typeof n=="function"||s.isPresent?d.cloneElement(o,{ref:l}):null};D.displayName="Presence";function De(e){const[t,n]=d.useState(),s=d.useRef(null),o=d.useRef(e),l=d.useRef("none"),a=e?"mounted":"unmounted",[u,i]=Ie(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return d.useEffect(()=>{const c=U(s.current);l.current=u==="mounted"?c:"none"},[u]),X(()=>{const c=s.current,m=o.current;if(m!==e){const f=l.current,p=U(c);e?i("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?i("UNMOUNT"):i(m&&f!==p?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,i]),X(()=>{if(t){let c;const m=t.ownerDocument.defaultView??window,h=p=>{const v=U(s.current).includes(CSS.escape(p.animationName));if(p.target===t&&v&&(i("ANIMATION_END"),!o.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",c=m.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},f=p=>{p.target===t&&(l.current=U(s.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{m.clearTimeout(c),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else i("ANIMATION_END")},[t,i]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:d.useCallback(c=>{s.current=c?getComputedStyle(c):null,n(c)},[])}}function U(e){return(e==null?void 0:e.animationName)||"none"}function Oe(e){var s,o;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function We(e,t=[]){let n=[];function s(l,a){const u=d.createContext(a),i=n.length;n=[...n,a];const c=h=>{var b;const{scope:f,children:p,...x}=h,v=((b=f==null?void 0:f[e])==null?void 0:b[i])||u,w=d.useMemo(()=>x,Object.values(x));return r.jsx(v.Provider,{value:w,children:p})};c.displayName=l+"Provider";function m(h,f){var v;const p=((v=f==null?void 0:f[e])==null?void 0:v[i])||u,x=d.useContext(p);if(x)return x;if(a!==void 0)return a;throw new Error(`\`${h}\` must be used within \`${l}\``)}return[c,m]}const o=()=>{const l=n.map(a=>d.createContext(a));return function(u){const i=(u==null?void 0:u[e])||l;return d.useMemo(()=>({[`__scope${e}`]:{...u,[e]:i}}),[u,i])}};return o.scopeName=e,[s,Ue(o,...t)]}function Ue(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const s=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(l){const a=s.reduce((u,{useScope:i,scopeName:c})=>{const h=i(l)[`__scope${c}`];return{...u,...h}},{});return d.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}function P(e){const t=d.useRef(e);return d.useEffect(()=>{t.current=e}),d.useMemo(()=>(...n)=>{var s;return(s=t.current)==null?void 0:s.call(t,...n)},[])}var $e=d.createContext(void 0);function Ve(e){const t=d.useContext($e);return e||t||"ltr"}function Be(e,[t,n]){return Math.min(n,Math.max(t,e))}function T(e,t,{checkForDefaultPrevented:n=!0}={}){return function(o){if(e==null||e(o),n===!1||!o.defaultPrevented)return t==null?void 0:t(o)}}function Ye(e,t){return d.useReducer((n,s)=>t[n][s]??n,e)}var q="ScrollArea",[re]=We(q),[He,S]=re(q),ne=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:s="hover",dir:o,scrollHideDelay:l=600,...a}=e,[u,i]=d.useState(null),[c,m]=d.useState(null),[h,f]=d.useState(null),[p,x]=d.useState(null),[v,w]=d.useState(null),[b,N]=d.useState(0),[_,A]=d.useState(0),[C,L]=d.useState(!1),[O,W]=d.useState(!1),g=E(t,R=>i(R)),y=Ve(o);return r.jsx(He,{scope:n,type:s,dir:y,scrollHideDelay:l,scrollArea:u,viewport:c,onViewportChange:m,content:h,onContentChange:f,scrollbarX:p,onScrollbarXChange:x,scrollbarXEnabled:C,onScrollbarXEnabledChange:L,scrollbarY:v,onScrollbarYChange:w,scrollbarYEnabled:O,onScrollbarYEnabledChange:W,onCornerWidthChange:N,onCornerHeightChange:A,children:r.jsx(I.div,{dir:y,...a,ref:g,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":_+"px",...e.style}})})});ne.displayName=q;var oe="ScrollAreaViewport",se=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:s,nonce:o,...l}=e,a=S(oe,n),u=d.useRef(null),i=E(t,u,a.onViewportChange);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),r.jsx(I.div,{"data-radix-scroll-area-viewport":"",...l,ref:i,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...e.style},children:r.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});se.displayName=oe;var j="ScrollAreaScrollbar",J=d.forwardRef((e,t)=>{const{forceMount:n,...s}=e,o=S(j,e.__scopeScrollArea),{onScrollbarXEnabledChange:l,onScrollbarYEnabledChange:a}=o,u=e.orientation==="horizontal";return d.useEffect(()=>(u?l(!0):a(!0),()=>{u?l(!1):a(!1)}),[u,l,a]),o.type==="hover"?r.jsx(Fe,{...s,ref:t,forceMount:n}):o.type==="scroll"?r.jsx(Xe,{...s,ref:t,forceMount:n}):o.type==="auto"?r.jsx(ae,{...s,ref:t,forceMount:n}):o.type==="always"?r.jsx(K,{...s,ref:t}):null});J.displayName=j;var Fe=d.forwardRef((e,t)=>{const{forceMount:n,...s}=e,o=S(j,e.__scopeScrollArea),[l,a]=d.useState(!1);return d.useEffect(()=>{const u=o.scrollArea;let i=0;if(u){const c=()=>{window.clearTimeout(i),a(!0)},m=()=>{i=window.setTimeout(()=>a(!1),o.scrollHideDelay)};return u.addEventListener("pointerenter",c),u.addEventListener("pointerleave",m),()=>{window.clearTimeout(i),u.removeEventListener("pointerenter",c),u.removeEventListener("pointerleave",m)}}},[o.scrollArea,o.scrollHideDelay]),r.jsx(D,{present:n||l,children:r.jsx(ae,{"data-state":l?"visible":"hidden",...s,ref:t})})}),Xe=d.forwardRef((e,t)=>{const{forceMount:n,...s}=e,o=S(j,e.__scopeScrollArea),l=e.orientation==="horizontal",a=F(()=>i("SCROLL_END"),100),[u,i]=Ye("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return d.useEffect(()=>{if(u==="idle"){const c=window.setTimeout(()=>i("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(c)}},[u,o.scrollHideDelay,i]),d.useEffect(()=>{const c=o.viewport,m=l?"scrollLeft":"scrollTop";if(c){let h=c[m];const f=()=>{const p=c[m];h!==p&&(i("SCROLL"),a()),h=p};return c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[o.viewport,l,i,a]),r.jsx(D,{present:n||u!=="hidden",children:r.jsx(K,{"data-state":u==="hidden"?"hidden":"visible",...s,ref:t,onPointerEnter:T(e.onPointerEnter,()=>i("POINTER_ENTER")),onPointerLeave:T(e.onPointerLeave,()=>i("POINTER_LEAVE"))})})}),ae=d.forwardRef((e,t)=>{const n=S(j,e.__scopeScrollArea),{forceMount:s,...o}=e,[l,a]=d.useState(!1),u=e.orientation==="horizontal",i=F(()=>{if(n.viewport){const c=n.viewport.offsetWidth<n.viewport.scrollWidth,m=n.viewport.offsetHeight<n.viewport.scrollHeight;a(u?c:m)}},10);return M(n.viewport,i),M(n.content,i),r.jsx(D,{present:s||l,children:r.jsx(K,{"data-state":l?"visible":"hidden",...o,ref:t})})}),K=d.forwardRef((e,t)=>{const{orientation:n="vertical",...s}=e,o=S(j,e.__scopeScrollArea),l=d.useRef(null),a=d.useRef(0),[u,i]=d.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=ue(u.viewport,u.content),m={...s,sizes:u,onSizesChange:i,hasThumb:c>0&&c<1,onThumbChange:f=>l.current=f,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:f=>a.current=f};function h(f,p){return Ze(f,a.current,u,p)}return n==="horizontal"?r.jsx(Ge,{...m,ref:t,onThumbPositionChange:()=>{if(o.viewport&&l.current){const f=o.viewport.scrollLeft,p=ee(f,u,o.dir);l.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:f=>{o.viewport&&(o.viewport.scrollLeft=f)},onDragScroll:f=>{o.viewport&&(o.viewport.scrollLeft=h(f,o.dir))}}):n==="vertical"?r.jsx(qe,{...m,ref:t,onThumbPositionChange:()=>{if(o.viewport&&l.current){const f=o.viewport.scrollTop,p=ee(f,u);l.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:f=>{o.viewport&&(o.viewport.scrollTop=f)},onDragScroll:f=>{o.viewport&&(o.viewport.scrollTop=h(f))}}):null}),Ge=d.forwardRef((e,t)=>{const{sizes:n,onSizesChange:s,...o}=e,l=S(j,e.__scopeScrollArea),[a,u]=d.useState(),i=d.useRef(null),c=E(t,i,l.onScrollbarXChange);return d.useEffect(()=>{i.current&&u(getComputedStyle(i.current))},[i]),r.jsx(ie,{"data-orientation":"horizontal",...o,ref:c,sizes:n,style:{bottom:0,left:l.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:l.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":H(n)+"px",...e.style},onThumbPointerDown:m=>e.onThumbPointerDown(m.x),onDragScroll:m=>e.onDragScroll(m.x),onWheelScroll:(m,h)=>{if(l.viewport){const f=l.viewport.scrollLeft+m.deltaX;e.onWheelScroll(f),he(f,h)&&m.preventDefault()}},onResize:()=>{i.current&&l.viewport&&a&&s({content:l.viewport.scrollWidth,viewport:l.viewport.offsetWidth,scrollbar:{size:i.current.clientWidth,paddingStart:Y(a.paddingLeft),paddingEnd:Y(a.paddingRight)}})}})}),qe=d.forwardRef((e,t)=>{const{sizes:n,onSizesChange:s,...o}=e,l=S(j,e.__scopeScrollArea),[a,u]=d.useState(),i=d.useRef(null),c=E(t,i,l.onScrollbarYChange);return d.useEffect(()=>{i.current&&u(getComputedStyle(i.current))},[i]),r.jsx(ie,{"data-orientation":"vertical",...o,ref:c,sizes:n,style:{top:0,right:l.dir==="ltr"?0:void 0,left:l.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":H(n)+"px",...e.style},onThumbPointerDown:m=>e.onThumbPointerDown(m.y),onDragScroll:m=>e.onDragScroll(m.y),onWheelScroll:(m,h)=>{if(l.viewport){const f=l.viewport.scrollTop+m.deltaY;e.onWheelScroll(f),he(f,h)&&m.preventDefault()}},onResize:()=>{i.current&&l.viewport&&a&&s({content:l.viewport.scrollHeight,viewport:l.viewport.offsetHeight,scrollbar:{size:i.current.clientHeight,paddingStart:Y(a.paddingTop),paddingEnd:Y(a.paddingBottom)}})}})}),[Je,le]=re(j),ie=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:s,hasThumb:o,onThumbChange:l,onThumbPointerUp:a,onThumbPointerDown:u,onThumbPositionChange:i,onDragScroll:c,onWheelScroll:m,onResize:h,...f}=e,p=S(j,n),[x,v]=d.useState(null),w=E(t,g=>v(g)),b=d.useRef(null),N=d.useRef(""),_=p.viewport,A=s.content-s.viewport,C=P(m),L=P(i),O=F(h,10);function W(g){if(b.current){const y=g.clientX-b.current.left,R=g.clientY-b.current.top;c({x:y,y:R})}}return d.useEffect(()=>{const g=y=>{const R=y.target;(x==null?void 0:x.contains(R))&&C(y,A)};return document.addEventListener("wheel",g,{passive:!1}),()=>document.removeEventListener("wheel",g,{passive:!1})},[_,x,A,C]),d.useEffect(L,[s,L]),M(x,O),M(p.content,O),r.jsx(Je,{scope:n,scrollbar:x,hasThumb:o,onThumbChange:P(l),onThumbPointerUp:P(a),onThumbPositionChange:L,onThumbPointerDown:P(u),children:r.jsx(I.div,{...f,ref:w,style:{position:"absolute",...f.style},onPointerDown:T(e.onPointerDown,g=>{g.button===0&&(g.target.setPointerCapture(g.pointerId),b.current=x.getBoundingClientRect(),N.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),W(g))}),onPointerMove:T(e.onPointerMove,W),onPointerUp:T(e.onPointerUp,g=>{const y=g.target;y.hasPointerCapture(g.pointerId)&&y.releasePointerCapture(g.pointerId),document.body.style.webkitUserSelect=N.current,p.viewport&&(p.viewport.style.scrollBehavior=""),b.current=null})})})}),B="ScrollAreaThumb",ce=d.forwardRef((e,t)=>{const{forceMount:n,...s}=e,o=le(B,e.__scopeScrollArea);return r.jsx(D,{present:n||o.hasThumb,children:r.jsx(Ke,{ref:t,...s})})}),Ke=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:s,...o}=e,l=S(B,n),a=le(B,n),{onThumbPositionChange:u}=a,i=E(t,h=>a.onThumbChange(h)),c=d.useRef(void 0),m=F(()=>{c.current&&(c.current(),c.current=void 0)},100);return d.useEffect(()=>{const h=l.viewport;if(h){const f=()=>{if(m(),!c.current){const p=et(h,u);c.current=p,u()}};return u(),h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[l.viewport,m,u]),r.jsx(I.div,{"data-state":a.hasThumb?"visible":"hidden",...o,ref:i,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:T(e.onPointerDownCapture,h=>{const p=h.target.getBoundingClientRect(),x=h.clientX-p.left,v=h.clientY-p.top;a.onThumbPointerDown({x,y:v})}),onPointerUp:T(e.onPointerUp,a.onThumbPointerUp)})});ce.displayName=B;var Q="ScrollAreaCorner",de=d.forwardRef((e,t)=>{const n=S(Q,e.__scopeScrollArea),s=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&s?r.jsx(Qe,{...e,ref:t}):null});de.displayName=Q;var Qe=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,...s}=e,o=S(Q,n),[l,a]=d.useState(0),[u,i]=d.useState(0),c=!!(l&&u);return M(o.scrollbarX,()=>{var h;const m=((h=o.scrollbarX)==null?void 0:h.offsetHeight)||0;o.onCornerHeightChange(m),i(m)}),M(o.scrollbarY,()=>{var h;const m=((h=o.scrollbarY)==null?void 0:h.offsetWidth)||0;o.onCornerWidthChange(m),a(m)}),c?r.jsx(I.div,{...s,ref:t,style:{width:l,height:u,position:"absolute",right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Y(e){return e?parseInt(e,10):0}function ue(e,t){const n=e/t;return isNaN(n)?0:n}function H(e){const t=ue(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=(e.scrollbar.size-n)*t;return Math.max(s,18)}function Ze(e,t,n,s="ltr"){const o=H(n),l=o/2,a=t||l,u=o-a,i=n.scrollbar.paddingStart+a,c=n.scrollbar.size-n.scrollbar.paddingEnd-u,m=n.content-n.viewport,h=s==="ltr"?[0,m]:[m*-1,0];return me([i,c],h)(e)}function ee(e,t,n="ltr"){const s=H(t),o=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,l=t.scrollbar.size-o,a=t.content-t.viewport,u=l-s,i=n==="ltr"?[0,a]:[a*-1,0],c=Be(e,i);return me([0,a],[0,u])(c)}function me(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(n-e[0])}}function he(e,t){return e>0&&e<t}var et=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},s=0;return function o(){const l={left:e.scrollLeft,top:e.scrollTop},a=n.left!==l.left,u=n.top!==l.top;(a||u)&&t(),n=l,s=window.requestAnimationFrame(o)}(),()=>window.cancelAnimationFrame(s)};function F(e,t){const n=P(e),s=d.useRef(0);return d.useEffect(()=>()=>window.clearTimeout(s.current),[]),d.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(n,t)},[n,t])}function M(e,t){const n=P(t);X(()=>{let s=0;if(e){const o=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(n)});return o.observe(e),()=>{window.cancelAnimationFrame(s),o.unobserve(e)}}},[e,n])}var fe=ne,tt=se,rt=de;const pe=d.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(fe,{ref:s,className:G("relative overflow-hidden",e),...n,children:[r.jsx(tt,{className:"h-full w-full rounded-[inherit]",children:t}),r.jsx(xe,{}),r.jsx(rt,{})]}));pe.displayName=fe.displayName;const xe=d.forwardRef(({className:e,orientation:t="vertical",...n},s)=>r.jsx(J,{ref:s,orientation:t,className:G("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:r.jsx(ce,{className:"relative flex-1 rounded-full bg-border"})}));xe.displayName=J.displayName;const nt=({chatHistory:e,isLoading:t,onSendMessage:n,suggestedPrompts:s})=>{const[o,l]=d.useState(""),a=d.useRef(null);d.useEffect(()=>{var c;(c=a.current)==null||c.scrollIntoView({behavior:"smooth"})},[e]);const u=c=>{c==null||c.preventDefault(),o.trim()&&!t&&(n(o.trim()),l(""))},i=c=>{n(c)};return r.jsxs("div",{className:"flex flex-col h-[60vh] md:h-[calc(100vh-250px)]",children:[r.jsxs(pe,{className:"flex-grow pr-4 space-y-6",children:[e.map((c,m)=>r.jsx("div",{className:`chat-message ${c.role}`,children:r.jsx("div",{className:`chat-bubble ${c.role}`,children:c.isLoading&&c.parts[0].text===""?r.jsxs("div",{className:"typing-indicator px-2 py-1",children:[r.jsx("span",{}),r.jsx("span",{}),r.jsx("span",{})]}):r.jsx("div",{className:"text-sm",dangerouslySetInnerHTML:{__html:be(c.parts[0].text||"")}})})},m)),r.jsx("div",{ref:a})]}),r.jsxs("div",{className:"pt-4 mt-auto",children:[r.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:s.map(c=>r.jsxs(V,{size:"sm",variant:"subtle",onClick:()=>i(c),disabled:t,children:[r.jsx(Re,{size:14,className:"mr-1.5 text-[var(--primary-accent-end)]"})," ",c]},c))}),r.jsxs("form",{onSubmit:u,className:"flex items-center gap-3",children:[r.jsx("textarea",{value:o,onChange:c=>l(c.target.value),onKeyDown:c=>{c.key==="Enter"&&!c.shiftKey&&u(c)},placeholder:"Ask a follow-up question...",className:"form-input-light flex-grow !rounded-xl resize-none",rows:1,style:{maxHeight:"150px"},disabled:t}),r.jsx(V,{type:"submit",size:"icon",variant:"primary",disabled:t||!o.trim(),children:r.jsx(Ee,{size:18})})]})]})]})},ot=Ae("inline-flex items-center justify-center cursor-pointer rounded-md transition-colors disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary-accent-start text-white shadow-xs hover:bg-primary-accent-end",muted:"bg-muted text-muted-foreground",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50"},size:{default:"size-8 rounded-lg [&_svg]:size-4",sm:"size-6 [&_svg]:size-3",md:"size-10 rounded-lg [&_svg]:size-5",lg:"size-12 rounded-xl [&_svg]:size-6"}},defaultVariants:{variant:"default",size:"default"}});function st({content:e,className:t,size:n,variant:s,delay:o=3e3,onClick:l,onCopy:a,isCopied:u,onCopyChange:i,...c}){const[m,h]=d.useState(u??!1),f=m?ge:Ce;d.useEffect(()=>{h(u??!1)},[u]);const p=d.useCallback(v=>{h(v),i==null||i(v)},[i]),x=d.useCallback(v=>{u||(e&&navigator.clipboard.writeText(e).then(()=>{p(!0),setTimeout(()=>p(!1),o),a==null||a(e)}).catch(w=>{console.error("Error copying command",w)}),l==null||l(v))},[u,e,o,l,a,p]);return r.jsx($.button,{"data-slot":"copy-button",whileHover:{scale:1.05},whileTap:{scale:.95},className:G(ot({variant:s,size:n}),t),onClick:x,...c,children:r.jsx(ve,{mode:"wait",children:r.jsx($.span,{"data-slot":"copy-button-icon",initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{duration:.15},children:r.jsx(f,{})},m?"check":"copy")})})}const at=({summary:e})=>{const t=e.replace(/\n/g,"<br />").replace(/\* \*\*(.*?)\*\*/g,'<li><strong class="text-[var(--primary-accent-start)]">$1</strong>').replace(/<\/strong>:(.*?)<br \/>/g,"</strong>:$1</li>").replace(/- \*\*(.*?)\*\*/g,'<li><strong class="text-[var(--primary-accent-start)]">$1</strong>').replace(/\*\*(.*?)\*\*/g,'<strong class="text-[var(--primary-accent-start)]">$1</strong>').replace(/- (.*?)(<br \/>|$)/g,'<li class="list-none ml-0 mb-1.5">$1</li>');return r.jsxs("div",{className:"content-card bg-[var(--bg-elevated)] border-l-4 border-[var(--primary-accent-start)]",children:[r.jsxs("h3",{className:"section-heading text-base !mb-3",children:[r.jsx(Pe,{size:18,className:"mr-3 icon-primary"}),"AI-Generated Summary"]}),r.jsx("ul",{className:"text-sm space-y-2 text-[var(--text-secondary)]",dangerouslySetInnerHTML:{__html:t}})]})},lt=()=>r.jsx("div",{className:"space-y-4",children:[...Array(3)].map((e,t)=>r.jsxs("div",{className:"p-4 bg-[var(--bg-card-subtle-accent)] rounded-lg animate-pulse",children:[r.jsx("div",{className:"h-4 bg-[var(--border-color)] rounded w-1/3 mb-3"}),r.jsx("div",{className:"h-3 bg-[var(--border-color)] rounded w-full mb-1"}),r.jsx("div",{className:"h-3 bg-[var(--border-color)] rounded w-5/6"})]},t))}),it=({reconciliationReport:e,addToast:t})=>{const[n,s]=d.useState([]),[o,l]=d.useState(!1),[a,u]=d.useState(null),i=(e==null?void 0:e.newMembers)||[],c=async()=>{if(i.length===0){t("No new members found in the current data to generate messages for.","warning");return}l(!0),u(null),s([]);try{const h=new je("AIzaSyCc8wwsp9E7PuNUu20Svoc_wSaSQXtMbjM").getGenerativeModel({model:"gemini-1.5-flash"}),p=`You are a friendly and welcoming church administrator for The Apostolic Church. Your task is to generate a short, personalized, and encouraging SMS message for each of the following new church members.



Guidelines:

- Keep each message under 160 characters to fit in a standard SMS.

- Start with a warm greeting addressing the member by their first name.

- Express joy that they have joined the church family.

- End with a warm closing, for example "God bless you." or "Welcome to the family!".

- Maintain a positive and uplifting tone.

- DO NOT add any extra text or explanation outside of the required JSON output.



Here are the new members to welcome: ${i.map(b=>`${b["First Name"]||""} ${b.Surname||""}`.trim()).filter(Boolean).join(", ")}`,w=(await h.generateContent({contents:[{role:"user",parts:[{text:p}]}],generationConfig:{responseMimeType:"application/json",responseSchema:{type:k.OBJECT,properties:{analysis:{type:k.ARRAY,items:{type:k.OBJECT,properties:{memberName:{type:k.STRING,description:"The full name of the new church member."},message:{type:k.STRING,description:"The personalized welcome SMS message for the member."}},required:["memberName","message"]}}},required:["analysis"]}}})).response.text();if(w){const b=JSON.parse(w);if(b&&Array.isArray(b.analysis))s(b.analysis);else throw new Error("AI response was not a JSON object with an 'analysis' array.")}else throw new Error("AI response was empty.")}catch(m){console.error("Error generating outreach messages:",m),u("Sorry, I couldn't generate the messages. The AI might be busy. Please try again in a moment."),t("Failed to generate outreach messages.","error")}finally{l(!1)}};return r.jsxs("section",{className:"content-card",children:[r.jsxs("h2",{className:"section-heading",children:[r.jsx(Te,{size:22,className:"mr-3 icon-primary"}),"AI Outreach Assistant"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 items-center",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"outreach-target",className:"form-label",children:"Select Target Group"}),r.jsx("select",{id:"outreach-target",className:"form-input-light w-full",children:r.jsxs("option",{children:["New Members (Souls Won) (",i.length,")"]})})]}),r.jsx("div",{className:"self-end",children:r.jsx(V,{onClick:c,isLoading:o,disabled:i.length===0||o,variant:"secondary",fullWidth:!0,children:"Generate Welcome Messages"})})]}),r.jsxs("div",{className:"mt-6 pt-6 border-t border-[var(--border-color)]",children:[o&&r.jsx(lt,{}),a&&r.jsxs("div",{className:"text-center py-6 text-[var(--danger-text)]",children:[r.jsx(te,{size:32,className:"mx-auto mb-2"}),r.jsx("p",{children:a})]}),!o&&!a&&n.length>0&&r.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto pr-2",children:n.map((m,h)=>r.jsxs("div",{className:"p-4 bg-[var(--bg-elevated)] rounded-lg border border-[var(--border-color)]",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsxs("h4",{className:"font-semibold text-[var(--text-primary)] flex items-center gap-2",children:[r.jsx(ye,{size:16})," ",m.memberName]}),r.jsx(st,{content:m.message})]}),r.jsx("p",{className:"text-sm text-[var(--text-secondary)] whitespace-pre-wrap",children:m.message})]},h))}),!o&&!a&&n.length===0&&r.jsx("div",{className:"text-center py-6 text-[var(--text-muted)]",children:i.length>0?"Click 'Generate' to create personalized welcome messages for your new members.":"No new members found in the current workspace. Upload and reconcile a new file to identify them."})]})]})},ht=()=>{var A;const{titheListData:e=[],currentAssembly:t,selectedDate:n,addToast:s,tithersCount:o,nonTithersCount:l,totalAmount:a,reconciliationReport:u}=we(),{chatHistory:i,chartData:c,isLoading:m,error:h,startChat:f,sendMessage:p}=Se(),x=()=>{f(e,t,n,o,l,a)},v=C=>{C.trim()&&p(C)},w=e.length>0,b=i.length>0,N=(A=i[0])==null?void 0:A.summary,_=["What are the key observations from this data?","Suggest some potential actions based on these numbers.","What if participation increased by 10%?",`How does ${t||"this assembly"} compare to typical patterns?`];return r.jsxs("div",{className:"space-y-8",children:[r.jsx(it,{reconciliationReport:u,addToast:s}),r.jsx("section",{className:"content-card",children:r.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-4",children:[r.jsxs("h2",{id:"analytics-heading",className:"section-heading border-none pb-0 mb-0",children:[r.jsx(Z,{size:22,className:"mr-3 icon-primary"}),"AI-Powered Analytics Chat"]}),r.jsx(V,{onClick:x,disabled:!w||m,isLoading:m&&!b,variant:"primary",children:b?`Restart Analysis for ${t}`:"Analyze with AI"})]})}),r.jsxs("div",{className:"min-h-[400px]",children:[h&&r.jsxs("div",{className:"content-card text-center py-10 flex flex-col items-center",children:[r.jsx(te,{size:48,className:"text-[var(--danger-text)] mb-4"}),r.jsx("h3",{className:"text-xl font-semibold text-[var(--danger-text)]",children:"Analysis Failed"}),r.jsx("p",{className:"text-[var(--text-secondary)] mt-2 max-w-md",children:h})]}),!b&&!m&&!h&&r.jsxs("div",{className:"content-card text-center py-10 flex flex-col items-center animate-fadeIn",children:[r.jsx(Z,{size:52,className:"mx-auto text-[var(--text-muted)] mb-4 opacity-50"}),r.jsx("h3",{className:"text-xl font-semibold text-[var(--text-primary)]",children:"Ready for Insights?"}),r.jsx("p",{className:"text-[var(--text-secondary)] mt-2 max-w-md",children:w?`You have a list for ${t} Assembly ready. Click "Analyze with AI" to start a conversation about your data.`:"Generate or load a tithe list in the Processor view, then come back here to get an AI-powered analysis."})]}),m&&!b&&r.jsx("div",{className:"content-card",children:r.jsx(Me,{})}),b&&!h&&r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-start",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[N&&r.jsx(at,{summary:N}),r.jsx("div",{className:"content-card",children:r.jsx(nt,{chatHistory:i,isLoading:m,onSendMessage:v,suggestedPrompts:_})})]}),r.jsx("div",{className:"lg:col-span-1 space-y-8 sticky top-8",children:c.length>0&&r.jsxs("div",{className:"content-card animate-fadeIn",children:[r.jsx("h3",{className:"section-heading text-base !mb-6",children:"Contribution Distribution"}),r.jsx(ke,{data:c})]})})]})]})]})};export{ht as default};
