import{c as D,R,u as A,i as T,r as o,j as e,n as w,o as P,B as c,C as M,X as $,p as B}from"./index-D2A2AOn4.js";import{R as K}from"./rotate-ccw-DAa-uQVw.js";import{I as O}from"./info-_UVSSaeJ.js";/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=D("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),H=R.memo(()=>{const{assemblies:v}=A(),{favorites:d=[],favoritesSearchTerm:i,setFavoritesSearchTerm:f,loadFavorite:F,deleteFavorite:S,viewFavoriteDetails:z,updateFavoriteName:I,addToast:j}=T(),[x,b]=o.useState(i),[m,N]=o.useState(null),[u,h]=o.useState("");o.useEffect(()=>{const s=setTimeout(()=>{f(x)},300);return()=>clearTimeout(s)},[x,f]),o.useEffect(()=>{b(i)},[i]);const k=s=>{N(s.id),h(s.name)},p=()=>{N(null),h("")},y=()=>{if(m){if(!u.trim()){j("Favorite name cannot be empty.","error");return}I(m,u),j("Favorite renamed successfully.","success"),p()}},E=s=>{s.key==="Enter"?y():s.key==="Escape"&&p()},C=o.useMemo(()=>{const s=(i||"").toLowerCase(),n=d.filter(a=>!a||!a.assemblyName?!1:s?(a.name??"").toLowerCase().includes(s)||(a.originalFileName??"").toLowerCase().includes(s)||(a.assemblyName??"").toLowerCase().includes(s):!0).sort((a,r)=>r.timestamp-a.timestamp),t=new Map;new Set([...v,...n.map(a=>a.assemblyName)]).forEach(a=>{t.set(a,[])}),n.forEach(a=>{const r=t.get(a.assemblyName);r&&r.push(a)});const l=Array.from(t.entries());return(i?l.filter(([a,r])=>r.length>0):l).sort((a,r)=>(a[0]||"").localeCompare(r[0]||""))},[d,i,v]),L=C.length>0;return e.jsx("div",{className:"space-y-8",children:e.jsxs("section",{className:"content-card","aria-labelledby":"favorites-heading",children:[e.jsxs("h2",{id:"favorites-heading",className:"section-heading",children:[e.jsx(w,{size:22,className:"mr-3 icon-primary"}),"Saved Configurations & Data"]}),e.jsx("input",{type:"search",placeholder:"Search favorites by name, original file, or assembly...",value:x,onChange:s=>b(s.target.value),className:"form-input-light w-full mb-8","aria-label":"Search saved favorites"}),d.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(w,{size:52,className:"mx-auto text-[var(--text-muted)] mb-4 opacity-50"}),e.jsx("p",{className:"text-[var(--text-secondary)] text-lg",children:"No favorites found."}),e.jsx("p",{className:"text-[var(--text-muted)] text-sm mt-1",children:"Save configurations from the Processor view for easy reuse!"})]}):L?e.jsx("div",{className:"space-y-10",children:C.map(([s,n])=>i&&n.length===0?null:e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold text-gradient-primary mb-4 pb-2 border-b border-[var(--border-color)]",children:[s," Assembly"]}),n.length===0?e.jsx("p",{className:"text-sm text-center text-[var(--text-muted)] py-4",children:"No saved items for this assembly."}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:n.map(t=>{var g;return e.jsxs("div",{className:"content-card p-5 border border-[var(--border-color-light)] transition-all duration-200 card-glow-on-hover flex flex-col",children:[e.jsxs("div",{className:"flex-grow",children:[m===t.id?e.jsx("div",{className:"w-full mb-3",children:e.jsx("input",{id:`edit-fav-name-${t.id}`,type:"text",value:u,onChange:l=>h(l.target.value),onKeyDown:E,className:"form-input-light w-full text-lg py-1",autoFocus:!0,onFocus:l=>l.target.select(),"aria-label":`New name for favorite ${t.name}`})}):e.jsx("h3",{className:"font-semibold text-lg text-[var(--text-primary)] truncate mb-1.5",title:t.name,children:t.name}),e.jsxs("p",{className:"text-xs text-[var(--text-muted)] mb-0.5",children:["Original File:"," ",e.jsx("span",{className:"font-medium text-[var(--text-secondary)] truncate block max-w-xs",children:t.originalFileName||"N/A"})]}),e.jsxs("p",{className:"text-xs text-[var(--text-muted)] mb-1",children:["List Records:"," ",e.jsx("span",{className:"font-medium text-[var(--text-secondary)]",children:((g=t.titheListData)==null?void 0:g.length)||0})]}),e.jsxs("p",{className:"text-xs text-[var(--text-muted)] mb-4",children:["Saved:"," ",new Date(t.timestamp).toLocaleString()]})]}),e.jsx("div",{className:"flex flex-wrap gap-2.5 mt-auto pt-4 border-t border-[var(--border-color)]",children:m===t.id?e.jsxs(e.Fragment,{children:[e.jsx(c,{size:"sm",variant:"primary",onClick:y,leftIcon:e.jsx(M,{size:16}),children:"Save"}),e.jsx(c,{size:"sm",variant:"ghost",onClick:p,leftIcon:e.jsx($,{size:16}),children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsx(c,{size:"sm",variant:"primary",onClick:()=>F(t.id),leftIcon:e.jsx(K,{size:16}),children:"Load"}),e.jsx(c,{size:"sm",variant:"subtle",onClick:()=>k(t),leftIcon:e.jsx(V,{size:16}),children:"Rename"}),e.jsx(c,{size:"sm",variant:"ghost",onClick:()=>z(t),leftIcon:e.jsx(O,{size:16}),children:"Details"}),e.jsx(c,{size:"sm",variant:"danger",onClick:()=>S(t.id),leftIcon:e.jsx(B,{size:16}),className:"ml-auto !bg-transparent !text-[var(--danger-text)] hover:!bg-[var(--danger-start)]/10","aria-label":`Delete favorite ${t.name}`,children:"Delete"})]})})]},t.id)})})]},s))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(P,{size:52,className:"mx-auto text-[var(--text-muted)] mb-4 opacity-50"}),e.jsx("p",{className:"text-[var(--text-secondary)] text-lg",children:"No favorites match your search."}),e.jsx("p",{className:"text-[var(--text-muted)] text-sm mt-1",children:"Try a different search term or clear the search to see all items."})]})]})})});export{H as default};
