import{c as p,u as V,r as c,j as e,B as w,l as B,a as H}from"./index-BQ4ypfwp.js";/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u=p("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f=p("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=p("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=p("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),_=()=>{const{memberDatabase:o={},onUploadMasterList:C,onCreateTitheList:M,onEditMember:S,addToast:P}=V(),[a,z]=c.useState(Object.keys(o)[0]||null),[m,L]=c.useState(""),[l,g]=c.useState([]),[r,A]=c.useState({key:null,direction:"asc"}),[d,U]=c.useState(1),[h]=c.useState(10),F=(t,s)=>{var x;const i=(x=t.target.files)==null?void 0:x[0];i&&C(i,!0,s)},n=c.useMemo(()=>{var s;if(!a)return[];let t=((s=o[a])==null?void 0:s.data)||[];return m&&(t=t.filter(i=>Object.values(i).some(x=>String(x).toLowerCase().includes(m.toLowerCase())))),r.key&&t.sort((i,x)=>{const v=String(i[r.key]).toLowerCase(),N=String(x[r.key]).toLowerCase();return v<N?r.direction==="asc"?-1:1:v>N?r.direction==="asc"?1:-1:0}),t},[o,a,m,r]),b=t=>{let s="asc";r.key===t&&r.direction==="asc"&&(s="desc"),A({key:t,direction:s})},j=d*h,O=j-h,D=n.slice(O,j),y=t=>U(t),k=Math.ceil(n.length/h),T=t=>{g(s=>s.some(i=>i["No."]===t["No."])?s.filter(i=>i["No."]!==t["No."]):[...s,t])},q=()=>{l.length===n.length?g([]):g(n)},E=()=>{if(l.length===0){P("Please select at least one member to create a list.","warning");return}a&&M(l,a)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Member Database"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(w,{variant:"primary",onClick:E,disabled:l.length===0,leftIcon:e.jsx(B,{size:16}),children:["Create Tithe List (",l.length,")"]})})]}),e.jsx("div",{className:"flex border-b border-[var(--border-color)]",children:Object.keys(o).map(t=>e.jsx("button",{onClick:()=>z(t),className:`px-4 py-2 text-sm font-medium transition-colors duration-200 ${a===t?"border-b-2 border-[var(--primary-accent-start)] text-[var(--primary-accent-start)]":"text-[var(--text-secondary)] hover:text-[var(--text-primary)]"}`,children:t},t))}),a&&o[a]?e.jsxs("div",{className:"content-card",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 p-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:a}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[o[a].data.length," members"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(H,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search members...",value:m,onChange:t=>L(t.target.value),className:"form-input-light w-full sm:w-64 pl-10"})]}),e.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md cursor-pointer hover:bg-blue-700",children:[e.jsx($,{size:16}),e.jsx("span",{children:"Upload Master List"}),e.jsx("input",{type:"file",className:"hidden",accept:".xlsx, .xls",onChange:t=>F(t,a)})]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"modern-table min-w-full divide-y divide-[var(--border-color)]",children:[e.jsx("thead",{className:"bg-[var(--bg-elevated)]",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"p-4",children:e.jsx("input",{type:"checkbox",className:"form-checkbox",checked:l.length===n.length&&n.length>0,onChange:q})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700 dark:hover:text-gray-200 transition-colors",onClick:()=>b("First Name"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Name",r.key==="First Name"&&(r.direction==="asc"?e.jsx(f,{size:14}):e.jsx(u,{size:14}))]})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700 dark:hover:text-gray-200 transition-colors",onClick:()=>b("Membership Number"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Membership No.",r.key==="Membership Number"&&(r.direction==="asc"?e.jsx(f,{size:14}):e.jsx(u,{size:14}))]})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700 dark:hover:text-gray-200 transition-colors",onClick:()=>b("Phone Number"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Phone Number",r.key==="Phone Number"&&(r.direction==="asc"?e.jsx(f,{size:14}):e.jsx(u,{size:14}))]})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-[var(--border-color)]",children:D.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"p-4",children:e.jsx("input",{type:"checkbox",className:"form-checkbox",checked:l.some(s=>s["No."]===t["No."]),onChange:()=>T(t)})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:[t["First Name"]," ",t.Surname]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:t["Membership Number"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:t["Phone Number"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx(w,{variant:"ghost",size:"sm",onClick:()=>S(t,a),children:e.jsx(I,{size:16})})})]},t["No."]))})]})}),n.length>h&&e.jsx("div",{className:"flex justify-center mt-4",children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[e.jsx("button",{onClick:()=>y(d-1),disabled:d===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),Array.from({length:k},(t,s)=>e.jsx("button",{onClick:()=>y(s+1),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${d===s+1?"z-10 bg-blue-50 border-blue-500 text-blue-600 dark:bg-blue-900 dark:border-blue-400 dark:text-blue-300":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700"}`,children:s+1},s+1)),e.jsx("button",{onClick:()=>y(d+1),disabled:d===k,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No member databases found."}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Upload a master list for an assembly to get started."})]})]})};export{_ as default};
