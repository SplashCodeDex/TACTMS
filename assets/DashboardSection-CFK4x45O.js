import{c as h,u as U,r as m,R as Y,j as e,m as c,U as L,A as z,B as b,f as H}from"./index-DNqp5Jkm.js";import{S as u,A as y,D as T,T as E}from"./AnimatedNumber-DUPV3nH0.js";import{A as R}from"./activity-B4QL38nQ.js";/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=h("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=h("CloudUpload",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=h("ListPlus",[["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M16 18H3",key:"12xzn7"}],["path",{d:"M18 9v6",key:"1twb98"}],["path",{d:"M21 12h-6",key:"bt1uis"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=h("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),q=()=>{const{transactionLog:x=[],memberDatabase:i={},onStartNewWeek:N,onUploadFile:v,userProfile:f}=U(),[o,k]=m.useState(""),g=Y.useRef(null),n=m.useMemo(()=>{const t=new Date().getFullYear(),l=x.filter(s=>new Date(s.selectedDate).getFullYear()===t).reduce((s,a)=>s+a.totalTitheAmount,0);let r=0;Object.values(i).forEach(s=>{s&&Array.isArray(s.data)&&s.data.forEach(a=>{if(a.firstSeenDate)try{new Date(a.firstSeenDate).getFullYear()===t&&r++}catch{}})});const F=Object.values(i).reduce((s,a)=>{var p;return s+(((p=a==null?void 0:a.data)==null?void 0:p.length)||0)},0),C=[...x].sort((s,a)=>a.timestamp-s.timestamp).slice(0,5);return{ytdTithe:l,ytdSouls:r,totalMembers:F,recentActivities:C}},[x,i]),j=m.useMemo(()=>new Set(Object.keys(i).filter(t=>{var l,r;return((r=(l=i[t])==null?void 0:l.data)==null?void 0:r.length)>0})),[i]),M=()=>{o&&N(o)},S=()=>{var t;(t=g.current)==null||t.click()},A=t=>{var r;const l=((r=t.target.files)==null?void 0:r[0])||null;v&&v(l,!1),t.target&&(t.target.value="")},w={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},d={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},D=m.useMemo(()=>{const t=new Date().getHours();return t<12?"Good morning":t<18?"Good afternoon":"Good evening"},[]);return e.jsxs(c.div,{className:"space-y-8",variants:w,initial:"hidden",animate:"visible",children:[e.jsxs(c.div,{variants:d,children:[e.jsxs("h1",{className:"text-3xl font-bold text-[var(--text-primary)]",children:[D,f?`, ${f.name.split(" ")[0]}`:"","."]}),e.jsx("p",{className:"text-lg text-[var(--text-secondary)]",children:"Here's your district's overview for today."})]}),e.jsxs(c.div,{variants:d,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(u,{icon:e.jsx(T,{}),label:`Year-to-Date Tithe (${new Date().getFullYear()})`,value:e.jsxs(e.Fragment,{children:["GH₵"," ",e.jsx(y,{n:n.ytdTithe,formatter:t=>t.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})})]})}),e.jsx(u,{icon:e.jsx(E,{}),label:"Year-to-Date Souls Won",value:e.jsx(y,{n:n.ytdSouls})}),e.jsx(u,{icon:e.jsx(L,{}),label:"Total Members on Record",value:e.jsx(y,{n:n.totalMembers})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs(c.section,{variants:d,className:"lg:col-span-2 content-card space-y-6",children:[e.jsxs("h2",{className:"section-heading",children:[e.jsx(B,{size:22,className:"mr-3 icon-primary"}),"Quick Actions"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"p-6 bg-[var(--bg-elevated)] rounded-xl border border-[var(--border-color)] text-left space-y-4",children:[e.jsx("h3",{className:"font-semibold text-[var(--text-primary)]",children:"Start New Weekly List"}),e.jsx("p",{className:"text-sm text-[var(--text-secondary)]",children:"Load the latest tithe list for an assembly."}),e.jsxs("div",{className:"flex items-end gap-3",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsx("label",{htmlFor:"assembly-start-select-dash",className:"form-label",children:"Select Assembly"}),e.jsxs("select",{id:"assembly-start-select-dash",value:o,onChange:t=>k(t.target.value),className:"form-input-light w-full",disabled:Object.keys(i).length===0,children:[e.jsx("option",{value:"",disabled:!0,children:"-- Select Assembly --"}),z.map(t=>e.jsxs("option",{value:t,disabled:!j.has(t),children:[t," ",j.has(t)?"":"(No member data)"]},t))]})]}),e.jsx(b,{onClick:M,disabled:!o,leftIcon:e.jsx(I,{size:16}),children:"Start"})]})]}),e.jsxs("div",{className:"p-6 bg-[var(--bg-elevated)] rounded-xl border border-[var(--border-color)] text-left space-y-4 flex flex-col justify-center",children:[e.jsx("h3",{className:"font-semibold text-[var(--text-primary)]",children:"Upload a New List File"}),e.jsx("p",{className:"text-sm text-[var(--text-secondary)]",children:"If you have a new file to process from an assembly."}),e.jsx(b,{onClick:S,fullWidth:!0,variant:"secondary",size:"lg",leftIcon:e.jsx(W,{size:18}),children:"Upload Excel File"}),e.jsx("input",{type:"file",ref:g,className:"hidden",accept:".xlsx,.xls",onChange:A})]})]})]}),e.jsxs(c.section,{variants:d,className:"content-card",children:[e.jsxs("h2",{className:"section-heading",children:[e.jsx(R,{size:22,className:"mr-3 icon-primary"}),"Recent Activity"]}),n.recentActivities.length>0?e.jsx("ul",{className:"space-y-3",children:n.recentActivities.map(t=>e.jsxs("li",{className:"flex items-center gap-4 p-3 rounded-lg hover:bg-[var(--bg-card-subtle-accent)] transition-colors",children:[e.jsx("div",{className:"w-10 h-10 flex-shrink-0 bg-gradient-to-br from-[var(--primary-accent-start)] to-[var(--primary-accent-end)] rounded-lg flex items-center justify-center text-white",children:e.jsx(G,{size:20})}),e.jsxs("div",{className:"overflow-hidden",children:[e.jsxs("p",{className:"font-semibold text-sm text-[var(--text-primary)] truncate",children:[t.assemblyName," Assembly"]}),e.jsxs("p",{className:"text-xs text-[var(--text-secondary)]",children:[H(new Date(t.selectedDate)),e.jsx("span",{className:"text-[var(--text-muted)] mx-1",children:"•"}),e.jsxs("span",{className:"font-medium text-[var(--success-text)]",children:["GH₵ ",t.totalTitheAmount.toLocaleString()]})]})]})]},t.id+t.timestamp))}):e.jsx("p",{className:"text-sm text-center py-8 text-[var(--text-muted)]",children:"No recent transactions logged."})]})]})]})};export{q as default};
