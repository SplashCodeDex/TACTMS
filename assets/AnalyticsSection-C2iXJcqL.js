import{c as I,j as e,m as H,r as d,b as k,d as ve,P as D,e as U,g as E,h as P,i as ge,k as _,l as Q,n as Z,o as ee,p as $,q as we,B as Y,s as ye,C as Se,t as je,u as Ne,v as Ae,w as re,U as Ce,G as Pe,x as M}from"./index-Bq4oxRZ8.js";/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=I("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=I("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=I("MessageSquareQuote",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M8 12a2 2 0 0 0 2-2V8H8",key:"1jfesj"}],["path",{d:"M14 12a2 2 0 0 0 2-2V8h-2",key:"1dq9mh"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=I("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=I("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),Le=()=>e.jsxs("div",{className:"space-y-6 p-4",children:[e.jsxs("div",{className:"flex items-end gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-[var(--bg-elevated)] animate-pulse flex-shrink-0"}),e.jsx("div",{className:"w-3/5",children:e.jsx("div",{className:"h-20 w-full rounded-lg bg-[var(--bg-elevated)] animate-pulse"})})]}),e.jsxs("div",{className:"flex items-end gap-3 flex-row-reverse",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-[var(--bg-elevated)] animate-pulse flex-shrink-0"}),e.jsx("div",{className:"w-1/2",children:e.jsx("div",{className:"h-12 w-full rounded-lg bg-[var(--bg-elevated)] animate-pulse"})})]}),e.jsxs("div",{className:"flex items-end gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-[var(--bg-elevated)] animate-pulse flex-shrink-0"}),e.jsx("div",{className:"w-4/5",children:e.jsx("div",{className:"h-28 w-full rounded-lg bg-[var(--bg-elevated)] animate-pulse"})})]})]}),Me=H.rect,_e=H.text,Ie=({data:t,chartHeight:r=220,barWidth:s=35,barMargin:l=20})=>{const o=t.length*(s+l),n=Math.max(...t.map(a=>a.count),0);return e.jsx("div",{className:"bar-chart-container w-full overflow-x-auto pb-4",children:e.jsxs("svg",{width:o,height:r,"aria-label":"Contribution Distribution Chart",children:[e.jsx("g",{transform:"translate(0, 10)",children:t.map((a,h)=>{const c=n>0?a.count/n*(r-40):0;return e.jsxs("g",{transform:`translate(${h*(s+l)}, 0)`,children:[e.jsx("title",{children:`${a.label}: ${a.count} members`}),e.jsx(Me,{className:"bar",x:0,y:r-30-c,width:s,height:c,fill:"url(#barGradient)",rx:"4",ry:"4",initial:{height:0,y:r-30},animate:{height:c,y:r-30-c},transition:{duration:.8,ease:[.22,1,.36,1],delay:h*.1}}),e.jsx(_e,{className:"bar-value",x:s/2,y:r-35-c,textAnchor:"middle",initial:{opacity:0,y:r-30},animate:{opacity:1,y:r-35-c},transition:{duration:.8,ease:"easeOut",delay:h*.1+.3},children:a.count}),e.jsx("text",{className:"axis-text",x:s/2,y:r-15,textAnchor:"middle",children:a.label})]},a.label)})}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"barGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"var(--primary-accent-hover-start)"}),e.jsx("stop",{offset:"100%",stopColor:"var(--primary-accent-start)"})]})})]})})};var De=d.createContext(void 0);function Oe(t){const r=d.useContext(De);return t||r||"ltr"}function We(t,[r,s]){return Math.min(s,Math.max(r,t))}function He(t,r){return d.useReducer((s,l)=>r[s][l]??s,t)}var F="ScrollArea",[se]=ve(F),[Ye,w]=se(F),oe=d.forwardRef((t,r)=>{const{__scopeScrollArea:s,type:l="hover",dir:o,scrollHideDelay:n=600,...a}=t,[h,c]=d.useState(null),[i,u]=d.useState(null),[m,f]=d.useState(null),[x,v]=d.useState(null),[g,y]=d.useState(null),[b,N]=d.useState(0),[z,A]=d.useState(0),[C,L]=d.useState(!1),[O,W]=d.useState(!1),p=k(r,T=>c(T)),S=Oe(o);return e.jsx(Ye,{scope:s,type:l,dir:S,scrollHideDelay:n,scrollArea:h,viewport:i,onViewportChange:u,content:m,onContentChange:f,scrollbarX:x,onScrollbarXChange:v,scrollbarXEnabled:C,onScrollbarXEnabledChange:L,scrollbarY:g,onScrollbarYChange:y,scrollbarYEnabled:O,onScrollbarYEnabledChange:W,onCornerWidthChange:N,onCornerHeightChange:A,children:e.jsx(D.div,{dir:S,...a,ref:p,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":z+"px",...t.style}})})});oe.displayName=F;var ae="ScrollAreaViewport",ne=d.forwardRef((t,r)=>{const{__scopeScrollArea:s,children:l,nonce:o,...n}=t,a=w(ae,s),h=d.useRef(null),c=k(r,h,a.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),e.jsx(D.div,{"data-radix-scroll-area-viewport":"",...n,ref:c,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...t.style},children:e.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:l})})]})});ne.displayName=ae;var j="ScrollAreaScrollbar",q=d.forwardRef((t,r)=>{const{forceMount:s,...l}=t,o=w(j,t.__scopeScrollArea),{onScrollbarXEnabledChange:n,onScrollbarYEnabledChange:a}=o,h=t.orientation==="horizontal";return d.useEffect(()=>(h?n(!0):a(!0),()=>{h?n(!1):a(!1)}),[h,n,a]),o.type==="hover"?e.jsx(Ve,{...l,ref:r,forceMount:s}):o.type==="scroll"?e.jsx(Be,{...l,ref:r,forceMount:s}):o.type==="auto"?e.jsx(le,{...l,ref:r,forceMount:s}):o.type==="always"?e.jsx(J,{...l,ref:r}):null});q.displayName=j;var Ve=d.forwardRef((t,r)=>{const{forceMount:s,...l}=t,o=w(j,t.__scopeScrollArea),[n,a]=d.useState(!1);return d.useEffect(()=>{const h=o.scrollArea;let c=0;if(h){const i=()=>{window.clearTimeout(c),a(!0)},u=()=>{c=window.setTimeout(()=>a(!1),o.scrollHideDelay)};return h.addEventListener("pointerenter",i),h.addEventListener("pointerleave",u),()=>{window.clearTimeout(c),h.removeEventListener("pointerenter",i),h.removeEventListener("pointerleave",u)}}},[o.scrollArea,o.scrollHideDelay]),e.jsx(U,{present:s||n,children:e.jsx(le,{"data-state":n?"visible":"hidden",...l,ref:r})})}),Be=d.forwardRef((t,r)=>{const{forceMount:s,...l}=t,o=w(j,t.__scopeScrollArea),n=t.orientation==="horizontal",a=G(()=>c("SCROLL_END"),100),[h,c]=He("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return d.useEffect(()=>{if(h==="idle"){const i=window.setTimeout(()=>c("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(i)}},[h,o.scrollHideDelay,c]),d.useEffect(()=>{const i=o.viewport,u=n?"scrollLeft":"scrollTop";if(i){let m=i[u];const f=()=>{const x=i[u];m!==x&&(c("SCROLL"),a()),m=x};return i.addEventListener("scroll",f),()=>i.removeEventListener("scroll",f)}},[o.viewport,n,c,a]),e.jsx(U,{present:s||h!=="hidden",children:e.jsx(J,{"data-state":h==="hidden"?"hidden":"visible",...l,ref:r,onPointerEnter:E(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:E(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),le=d.forwardRef((t,r)=>{const s=w(j,t.__scopeScrollArea),{forceMount:l,...o}=t,[n,a]=d.useState(!1),h=t.orientation==="horizontal",c=G(()=>{if(s.viewport){const i=s.viewport.offsetWidth<s.viewport.scrollWidth,u=s.viewport.offsetHeight<s.viewport.scrollHeight;a(h?i:u)}},10);return R(s.viewport,c),R(s.content,c),e.jsx(U,{present:l||n,children:e.jsx(J,{"data-state":n?"visible":"hidden",...o,ref:r})})}),J=d.forwardRef((t,r)=>{const{orientation:s="vertical",...l}=t,o=w(j,t.__scopeScrollArea),n=d.useRef(null),a=d.useRef(0),[h,c]=d.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),i=ue(h.viewport,h.content),u={...l,sizes:h,onSizesChange:c,hasThumb:i>0&&i<1,onThumbChange:f=>n.current=f,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:f=>a.current=f};function m(f,x){return qe(f,a.current,h,x)}return s==="horizontal"?e.jsx(Ue,{...u,ref:r,onThumbPositionChange:()=>{if(o.viewport&&n.current){const f=o.viewport.scrollLeft,x=te(f,h,o.dir);n.current.style.transform=`translate3d(${x}px, 0, 0)`}},onWheelScroll:f=>{o.viewport&&(o.viewport.scrollLeft=f)},onDragScroll:f=>{o.viewport&&(o.viewport.scrollLeft=m(f,o.dir))}}):s==="vertical"?e.jsx(Xe,{...u,ref:r,onThumbPositionChange:()=>{if(o.viewport&&n.current){const f=o.viewport.scrollTop,x=te(f,h);n.current.style.transform=`translate3d(0, ${x}px, 0)`}},onWheelScroll:f=>{o.viewport&&(o.viewport.scrollTop=f)},onDragScroll:f=>{o.viewport&&(o.viewport.scrollTop=m(f))}}):null}),Ue=d.forwardRef((t,r)=>{const{sizes:s,onSizesChange:l,...o}=t,n=w(j,t.__scopeScrollArea),[a,h]=d.useState(),c=d.useRef(null),i=k(r,c,n.onScrollbarXChange);return d.useEffect(()=>{c.current&&h(getComputedStyle(c.current))},[c]),e.jsx(ce,{"data-orientation":"horizontal",...o,ref:i,sizes:s,style:{bottom:0,left:n.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:n.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":X(s)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.x),onDragScroll:u=>t.onDragScroll(u.x),onWheelScroll:(u,m)=>{if(n.viewport){const f=n.viewport.scrollLeft+u.deltaX;t.onWheelScroll(f),fe(f,m)&&u.preventDefault()}},onResize:()=>{c.current&&n.viewport&&a&&l({content:n.viewport.scrollWidth,viewport:n.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:B(a.paddingLeft),paddingEnd:B(a.paddingRight)}})}})}),Xe=d.forwardRef((t,r)=>{const{sizes:s,onSizesChange:l,...o}=t,n=w(j,t.__scopeScrollArea),[a,h]=d.useState(),c=d.useRef(null),i=k(r,c,n.onScrollbarYChange);return d.useEffect(()=>{c.current&&h(getComputedStyle(c.current))},[c]),e.jsx(ce,{"data-orientation":"vertical",...o,ref:i,sizes:s,style:{top:0,right:n.dir==="ltr"?0:void 0,left:n.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":X(s)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.y),onDragScroll:u=>t.onDragScroll(u.y),onWheelScroll:(u,m)=>{if(n.viewport){const f=n.viewport.scrollTop+u.deltaY;t.onWheelScroll(f),fe(f,m)&&u.preventDefault()}},onResize:()=>{c.current&&n.viewport&&a&&l({content:n.viewport.scrollHeight,viewport:n.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:B(a.paddingTop),paddingEnd:B(a.paddingBottom)}})}})}),[Ge,ie]=se(j),ce=d.forwardRef((t,r)=>{const{__scopeScrollArea:s,sizes:l,hasThumb:o,onThumbChange:n,onThumbPointerUp:a,onThumbPointerDown:h,onThumbPositionChange:c,onDragScroll:i,onWheelScroll:u,onResize:m,...f}=t,x=w(j,s),[v,g]=d.useState(null),y=k(r,p=>g(p)),b=d.useRef(null),N=d.useRef(""),z=x.viewport,A=l.content-l.viewport,C=P(u),L=P(c),O=G(m,10);function W(p){if(b.current){const S=p.clientX-b.current.left,T=p.clientY-b.current.top;i({x:S,y:T})}}return d.useEffect(()=>{const p=S=>{const T=S.target;(v==null?void 0:v.contains(T))&&C(S,A)};return document.addEventListener("wheel",p,{passive:!1}),()=>document.removeEventListener("wheel",p,{passive:!1})},[z,v,A,C]),d.useEffect(L,[l,L]),R(v,O),R(x.content,O),e.jsx(Ge,{scope:s,scrollbar:v,hasThumb:o,onThumbChange:P(n),onThumbPointerUp:P(a),onThumbPositionChange:L,onThumbPointerDown:P(h),children:e.jsx(D.div,{...f,ref:y,style:{position:"absolute",...f.style},onPointerDown:E(t.onPointerDown,p=>{p.button===0&&(p.target.setPointerCapture(p.pointerId),b.current=v.getBoundingClientRect(),N.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",x.viewport&&(x.viewport.style.scrollBehavior="auto"),W(p))}),onPointerMove:E(t.onPointerMove,W),onPointerUp:E(t.onPointerUp,p=>{const S=p.target;S.hasPointerCapture(p.pointerId)&&S.releasePointerCapture(p.pointerId),document.body.style.webkitUserSelect=N.current,x.viewport&&(x.viewport.style.scrollBehavior=""),b.current=null})})})}),V="ScrollAreaThumb",de=d.forwardRef((t,r)=>{const{forceMount:s,...l}=t,o=ie(V,t.__scopeScrollArea);return e.jsx(U,{present:s||o.hasThumb,children:e.jsx($e,{ref:r,...l})})}),$e=d.forwardRef((t,r)=>{const{__scopeScrollArea:s,style:l,...o}=t,n=w(V,s),a=ie(V,s),{onThumbPositionChange:h}=a,c=k(r,m=>a.onThumbChange(m)),i=d.useRef(void 0),u=G(()=>{i.current&&(i.current(),i.current=void 0)},100);return d.useEffect(()=>{const m=n.viewport;if(m){const f=()=>{if(u(),!i.current){const x=Je(m,h);i.current=x,h()}};return h(),m.addEventListener("scroll",f),()=>m.removeEventListener("scroll",f)}},[n.viewport,u,h]),e.jsx(D.div,{"data-state":a.hasThumb?"visible":"hidden",...o,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...l},onPointerDownCapture:E(t.onPointerDownCapture,m=>{const x=m.target.getBoundingClientRect(),v=m.clientX-x.left,g=m.clientY-x.top;a.onThumbPointerDown({x:v,y:g})}),onPointerUp:E(t.onPointerUp,a.onThumbPointerUp)})});de.displayName=V;var K="ScrollAreaCorner",he=d.forwardRef((t,r)=>{const s=w(K,t.__scopeScrollArea),l=!!(s.scrollbarX&&s.scrollbarY);return s.type!=="scroll"&&l?e.jsx(Fe,{...t,ref:r}):null});he.displayName=K;var Fe=d.forwardRef((t,r)=>{const{__scopeScrollArea:s,...l}=t,o=w(K,s),[n,a]=d.useState(0),[h,c]=d.useState(0),i=!!(n&&h);return R(o.scrollbarX,()=>{var m;const u=((m=o.scrollbarX)==null?void 0:m.offsetHeight)||0;o.onCornerHeightChange(u),c(u)}),R(o.scrollbarY,()=>{var m;const u=((m=o.scrollbarY)==null?void 0:m.offsetWidth)||0;o.onCornerWidthChange(u),a(u)}),i?e.jsx(D.div,{...l,ref:r,style:{width:n,height:h,position:"absolute",right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function B(t){return t?parseInt(t,10):0}function ue(t,r){const s=t/r;return isNaN(s)?0:s}function X(t){const r=ue(t.viewport,t.content),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,l=(t.scrollbar.size-s)*r;return Math.max(l,18)}function qe(t,r,s,l="ltr"){const o=X(s),n=o/2,a=r||n,h=o-a,c=s.scrollbar.paddingStart+a,i=s.scrollbar.size-s.scrollbar.paddingEnd-h,u=s.content-s.viewport,m=l==="ltr"?[0,u]:[u*-1,0];return me([c,i],m)(t)}function te(t,r,s="ltr"){const l=X(r),o=r.scrollbar.paddingStart+r.scrollbar.paddingEnd,n=r.scrollbar.size-o,a=r.content-r.viewport,h=n-l,c=s==="ltr"?[0,a]:[a*-1,0],i=We(t,c);return me([0,a],[0,h])(i)}function me(t,r){return s=>{if(t[0]===t[1]||r[0]===r[1])return r[0];const l=(r[1]-r[0])/(t[1]-t[0]);return r[0]+l*(s-t[0])}}function fe(t,r){return t>0&&t<r}var Je=(t,r=()=>{})=>{let s={left:t.scrollLeft,top:t.scrollTop},l=0;return function o(){const n={left:t.scrollLeft,top:t.scrollTop},a=s.left!==n.left,h=s.top!==n.top;(a||h)&&r(),s=n,l=window.requestAnimationFrame(o)}(),()=>window.cancelAnimationFrame(l)};function G(t,r){const s=P(t),l=d.useRef(0);return d.useEffect(()=>()=>window.clearTimeout(l.current),[]),d.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(s,r)},[s,r])}function R(t,r){const s=P(r);ge(()=>{let l=0;if(t){const o=new ResizeObserver(()=>{cancelAnimationFrame(l),l=window.requestAnimationFrame(s)});return o.observe(t),()=>{window.cancelAnimationFrame(l),o.unobserve(t)}}},[t,s])}var xe=oe,Ke=ne,Qe=he;const be=d.forwardRef(({className:t,children:r,...s},l)=>e.jsxs(xe,{ref:l,className:_("relative overflow-hidden",t),...s,children:[e.jsx(Ke,{className:"h-full w-full rounded-[inherit]",children:r}),e.jsx(pe,{}),e.jsx(Qe,{})]}));be.displayName=xe.displayName;const pe=d.forwardRef(({className:t,orientation:r="vertical",...s},l)=>e.jsx(q,{ref:l,orientation:r,className:_("flex touch-none select-none transition-colors",r==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",r==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...s,children:e.jsx(de,{className:"relative flex-1 rounded-full bg-border"})}));pe.displayName=q.displayName;const Ze=({chatHistory:t,isLoading:r,onSendMessage:s,suggestedPrompts:l})=>{const[o,n]=d.useState(""),a=d.useRef(null);d.useEffect(()=>{var i;(i=a.current)==null||i.scrollIntoView({behavior:"smooth"})},[t]);const h=i=>{i==null||i.preventDefault(),o.trim()&&!r&&(s(o.trim()),n(""))},c=i=>{s(i)};return e.jsxs("div",{className:"flex flex-col h-[60vh] md:h-[calc(100vh-250px)]",children:[e.jsxs(be,{className:"flex-grow pr-4 space-y-6",children:[t.map((i,u)=>e.jsxs("div",{className:_("flex items-start gap-3",i.role==="user"?"justify-end":"justify-start"),children:[i.role==="model"&&e.jsxs(Q,{className:"h-8 w-8",children:[e.jsx(Z,{src:"/img/ai-avatar.png",alt:"AI Avatar"})," ",e.jsx(ee,{children:e.jsx($,{className:"h-5 w-5"})})]}),e.jsx("div",{className:_("chat-bubble p-3 rounded-lg max-w-[70%]",i.role==="user"?"bg-[var(--primary-accent-start)] text-white rounded-br-none":"bg-[var(--bg-card)] text-[var(--text-primary)] rounded-bl-none"),children:i.isLoading&&i.parts[0].text===""?e.jsxs("div",{className:"typing-indicator px-2 py-1",children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]}):e.jsx("div",{className:"text-sm",dangerouslySetInnerHTML:{__html:we(i.parts[0].text||"")}})}),i.role==="user"&&e.jsxs(Q,{className:"h-8 w-8",children:[e.jsx(Z,{src:"/img/user-avatar.png",alt:"User Avatar"})," ",e.jsx(ee,{children:"You"})]})]},u)),e.jsx("div",{ref:a})]}),e.jsxs("div",{className:"pt-4 mt-auto",children:[e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:l.map(i=>e.jsxs(Y,{size:"sm",variant:"subtle",onClick:()=>c(i),disabled:r,children:[e.jsx(ze,{size:14,className:"mr-1.5 text-[var(--primary-accent-end)]"})," ",i]},i))}),e.jsxs("form",{onSubmit:h,className:"flex items-center gap-3",children:[e.jsx("textarea",{value:o,onChange:i=>n(i.target.value),onKeyDown:i=>{i.key==="Enter"&&!i.shiftKey&&h(i)},placeholder:"Ask a follow-up question...",className:"form-input-light flex-grow !rounded-xl resize-none",rows:1,style:{maxHeight:"150px"},disabled:r}),e.jsx(Y,{type:"submit",size:"icon",variant:"primary",disabled:r||!o.trim(),children:e.jsx(ke,{size:18})})]})]})]})},et=je("inline-flex items-center justify-center cursor-pointer rounded-md transition-colors disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary-accent-start text-white shadow-xs hover:bg-primary-accent-end",muted:"bg-muted text-muted-foreground",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50"},size:{default:"size-8 rounded-lg [&_svg]:size-4",sm:"size-6 [&_svg]:size-3",md:"size-10 rounded-lg [&_svg]:size-5",lg:"size-12 rounded-xl [&_svg]:size-6"}},defaultVariants:{variant:"default",size:"default"}});function tt({content:t,className:r,size:s,variant:l,delay:o=3e3,onClick:n,onCopy:a,isCopied:h,onCopyChange:c,...i}){const[u,m]=d.useState(h??!1),f=u?Se:Ee;d.useEffect(()=>{m(h??!1)},[h]);const x=d.useCallback(g=>{m(g),c==null||c(g)},[c]),v=d.useCallback(g=>{h||(t&&navigator.clipboard.writeText(t).then(()=>{x(!0),setTimeout(()=>x(!1),o),a==null||a(t)}).catch(y=>{console.error("Error copying command",y)}),n==null||n(g))},[h,t,o,n,a,x]);return e.jsx(H.button,{"data-slot":"copy-button",whileHover:{scale:1.05},whileTap:{scale:.95},className:_(et({variant:l,size:s}),r),onClick:v,...i,children:e.jsx(ye,{mode:"wait",children:e.jsx(H.span,{"data-slot":"copy-button-icon",initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{duration:.15},children:e.jsx(f,{})},u?"check":"copy")})})}const rt=({summary:t})=>{const r=t.replace(/\n/g,"<br />").replace(/\* \*\*(.*?)\*\*/g,'<li><strong class="text-[var(--primary-accent-start)]">$1</strong>').replace(/<\/strong>:(.*?)<br \/>/g,"</strong>:$1</li>").replace(/- \*\*(.*?)\*\*/g,'<li><strong class="text-[var(--primary-accent-start)]">$1</strong>').replace(/\*\*(.*?)\*\*/g,'<strong class="text-[var(--primary-accent-start)]">$1</strong>').replace(/- (.*?)(<br \/>|$)/g,'<li class="list-none ml-0 mb-1.5">$1</li>');return e.jsxs("div",{className:"content-card bg-[var(--bg-elevated)] border-l-4 border-[var(--primary-accent-start)]",children:[e.jsxs("h3",{className:"section-heading text-base !mb-3",children:[e.jsx(Te,{size:18,className:"mr-3 icon-primary"}),"AI-Generated Summary"]}),e.jsx("ul",{className:"text-sm space-y-2 text-[var(--text-secondary)]",dangerouslySetInnerHTML:{__html:r}})]})},st=()=>e.jsx("div",{className:"space-y-4",children:[...Array(3)].map((t,r)=>e.jsxs("div",{className:"p-4 bg-[var(--bg-card-subtle-accent)] rounded-lg animate-pulse",children:[e.jsx("div",{className:"h-4 bg-[var(--border-color)] rounded w-1/3 mb-3"}),e.jsx("div",{className:"h-3 bg-[var(--border-color)] rounded w-full mb-1"}),e.jsx("div",{className:"h-3 bg-[var(--border-color)] rounded w-5/6"})]},r))}),ot=({reconciliationReport:t,addToast:r})=>{const[s,l]=d.useState([]),[o,n]=d.useState(!1),[a,h]=d.useState(null),c=(t==null?void 0:t.newMembers)||[],i=async()=>{if(c.length===0){r("No new members found in the current data to generate messages for.","warning");return}n(!0),h(null),l([]);try{const m=new Pe("AIzaSyCc8wwsp9E7PuNUu20Svoc_wSaSQXtMbjM").getGenerativeModel({model:"gemini-1.5-flash"}),x=`You are a friendly and welcoming church administrator for The Apostolic Church. Your task is to generate a short, personalized, and encouraging SMS message for each of the following new church members.



Guidelines:

- Keep each message under 160 characters to fit in a standard SMS.

- Start with a warm greeting addressing the member by their first name.

- Express joy that they have joined the church family.

- End with a warm closing, for example "God bless you." or "Welcome to the family!".

- Maintain a positive and uplifting tone.

- DO NOT add any extra text or explanation outside of the required JSON output.



Here are the new members to welcome: ${c.map(b=>`${b["First Name"]||""} ${b.Surname||""}`.trim()).filter(Boolean).join(", ")}`,y=(await m.generateContent({contents:[{role:"user",parts:[{text:x}]}],generationConfig:{responseMimeType:"application/json",responseSchema:{type:M.OBJECT,properties:{analysis:{type:M.ARRAY,items:{type:M.OBJECT,properties:{memberName:{type:M.STRING,description:"The full name of the new church member."},message:{type:M.STRING,description:"The personalized welcome SMS message for the member."}},required:["memberName","message"]}}},required:["analysis"]}}})).response.text();if(y){const b=JSON.parse(y);if(b&&Array.isArray(b.analysis))l(b.analysis);else throw new Error("AI response was not a JSON object with an 'analysis' array.")}else throw new Error("AI response was empty.")}catch(u){console.error("Error generating outreach messages:",u),h("Sorry, I couldn't generate the messages. The AI might be busy. Please try again in a moment."),r("Failed to generate outreach messages.","error")}finally{n(!1)}};return e.jsxs("section",{className:"content-card",children:[e.jsxs("h2",{className:"section-heading",children:[e.jsx(Re,{size:22,className:"mr-3 icon-primary"}),"AI Outreach Assistant"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 items-center",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"outreach-target",className:"form-label",children:"Select Target Group"}),e.jsx("select",{id:"outreach-target",className:"form-input-light w-full",children:e.jsxs("option",{children:["New Members (Souls Won) (",c.length,")"]})})]}),e.jsx("div",{className:"self-end",children:e.jsx(Y,{onClick:i,isLoading:o,disabled:c.length===0||o,variant:"secondary",fullWidth:!0,children:"Generate Welcome Messages"})})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-[var(--border-color)]",children:[o&&e.jsx(st,{}),a&&e.jsxs("div",{className:"text-center py-6 text-[var(--danger-text)]",children:[e.jsx(re,{size:32,className:"mx-auto mb-2"}),e.jsx("p",{children:a})]}),!o&&!a&&s.length>0&&e.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto pr-2",children:s.map((u,m)=>e.jsxs("div",{className:"p-4 bg-[var(--bg-elevated)] rounded-lg border border-[var(--border-color)]",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("h4",{className:"font-semibold text-[var(--text-primary)] flex items-center gap-2",children:[e.jsx(Ce,{size:16})," ",u.memberName]}),e.jsx(tt,{content:u.message})]}),e.jsx("p",{className:"text-sm text-[var(--text-secondary)] whitespace-pre-wrap",children:u.message})]},m))}),!o&&!a&&s.length===0&&e.jsx("div",{className:"text-center py-6 text-[var(--text-muted)]",children:c.length>0?"Click 'Generate' to create personalized welcome messages for your new members.":"No new members found in the current workspace. Upload and reconcile a new file to identify them."})]})]})},lt=()=>{var A;const{titheListData:t=[],currentAssembly:r,selectedDate:s,addToast:l,tithersCount:o,nonTithersCount:n,totalAmount:a,reconciliationReport:h}=Ne(),{chatHistory:c,chartData:i,isLoading:u,error:m,startChat:f,sendMessage:x}=Ae(),v=()=>{f(t,r,s,o,n,a)},g=C=>{C.trim()&&x(C)},y=t.length>0,b=c.length>0,N=(A=c[0])==null?void 0:A.summary,z=["What are the key observations from this data?","Suggest some potential actions based on these numbers.","What if participation increased by 10%?",`How does ${r||"this assembly"} compare to typical patterns?`];return e.jsxs("div",{className:"space-y-8",children:[e.jsx(ot,{reconciliationReport:h,addToast:l}),e.jsx("section",{className:"content-card",children:e.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-4",children:[e.jsxs("h2",{id:"analytics-heading",className:"section-heading border-none pb-0 mb-0",children:[e.jsx($,{size:22,className:"mr-3 icon-primary"}),"AI-Powered Analytics Chat"]}),e.jsx(Y,{onClick:v,disabled:!y||u,isLoading:u&&!b,variant:"primary",children:b?`Restart Analysis for ${r}`:"Analyze with AI"})]})}),e.jsxs("div",{className:"min-h-[400px]",children:[m&&e.jsxs("div",{className:"content-card text-center py-10 flex flex-col items-center",children:[e.jsx(re,{size:48,className:"text-[var(--danger-text)] mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-[var(--danger-text)]",children:"Analysis Failed"}),e.jsx("p",{className:"text-[var(--text-secondary)] mt-2 max-w-md",children:m})]}),!b&&!u&&!m&&e.jsxs("div",{className:"content-card text-center py-10 flex flex-col items-center animate-fadeIn",children:[e.jsx($,{size:52,className:"mx-auto text-[var(--text-muted)] mb-4 opacity-50"}),e.jsx("h3",{className:"text-xl font-semibold text-[var(--text-primary)]",children:"Ready for Insights?"}),e.jsx("p",{className:"text-[var(--text-secondary)] mt-2 max-w-md",children:y?`You have a list for ${r} Assembly ready. Click "Analyze with AI" to start a conversation about your data.`:"Generate or load a tithe list in the Processor view, then come back here to get an AI-powered analysis."})]}),u&&!b&&e.jsx("div",{className:"content-card",children:e.jsx(Le,{})}),b&&!m&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-start",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[N&&e.jsx(rt,{summary:N}),e.jsx("div",{className:"content-card",children:e.jsx(Ze,{chatHistory:c,isLoading:u,onSendMessage:g,suggestedPrompts:z})})]}),e.jsx("div",{className:"lg:col-span-1 space-y-8 sticky top-8",children:i.length>0&&e.jsxs("div",{className:"content-card animate-fadeIn",children:[e.jsx("h3",{className:"section-heading text-base !mb-6",children:"Contribution Distribution"}),e.jsx(Ie,{data:i})]})})]})]})]})};export{lt as default};
